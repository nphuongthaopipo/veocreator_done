"use strict";const Ce=require("electron"),Ie=require("path"),Ye=require("fs"),tc=require("constants"),hr=require("stream"),Ji=require("util"),Rl=require("assert"),kr=require("child_process"),Cl=require("events"),pr=require("crypto"),bl=require("tty"),qr=require("os"),Lt=require("url"),rc=require("string_decoder"),Pl=require("zlib"),nc=require("http");var et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_t={},Xr={},Tr={},Aa;function ze(){return Aa||(Aa=1,Tr.fromCallback=function(r){return Object.defineProperty(function(...d){if(typeof d[d.length-1]=="function")r.apply(this,d);else return new Promise((h,u)=>{d.push((c,l)=>c!=null?u(c):h(l)),r.apply(this,d)})},"name",{value:r.name})},Tr.fromPromise=function(r){return Object.defineProperty(function(...d){const h=d[d.length-1];if(typeof h!="function")return r.apply(this,d);d.pop(),r.apply(this,d).then(u=>h(null,u),h)},"name",{value:r.name})}),Tr}var Kr,Ta;function ic(){if(Ta)return Kr;Ta=1;var r=tc,d=process.cwd,h=null,u=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return h||(h=d.call(process)),h};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var c=process.chdir;process.chdir=function(t){h=null,c.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,c)}Kr=l;function l(t){r.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&f(t),t.lutimes||i(t),t.chown=o(t.chown),t.fchown=o(t.fchown),t.lchown=o(t.lchown),t.chmod=s(t.chmod),t.fchmod=s(t.fchmod),t.lchmod=s(t.lchmod),t.chownSync=a(t.chownSync),t.fchownSync=a(t.fchownSync),t.lchownSync=a(t.lchownSync),t.chmodSync=n(t.chmodSync),t.fchmodSync=n(t.fchmodSync),t.lchmodSync=n(t.lchmodSync),t.stat=m(t.stat),t.fstat=m(t.fstat),t.lstat=m(t.lstat),t.statSync=g(t.statSync),t.fstatSync=g(t.fstatSync),t.lstatSync=g(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(p,A,C){C&&process.nextTick(C)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(p,A,C,I){I&&process.nextTick(I)},t.lchownSync=function(){}),u==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:(function(p){function A(C,I,P){var $=Date.now(),R=0;p(C,I,function _(T){if(T&&(T.code==="EACCES"||T.code==="EPERM"||T.code==="EBUSY")&&Date.now()-$<6e4){setTimeout(function(){t.stat(I,function(E,k){E&&E.code==="ENOENT"?p(C,I,_):P(T)})},R),R<100&&(R+=10);return}P&&P(T)})}return Object.setPrototypeOf&&Object.setPrototypeOf(A,p),A})(t.rename)),t.read=typeof t.read!="function"?t.read:(function(p){function A(C,I,P,$,R,_){var T;if(_&&typeof _=="function"){var E=0;T=function(k,U,x){if(k&&k.code==="EAGAIN"&&E<10)return E++,p.call(t,C,I,P,$,R,T);_.apply(this,arguments)}}return p.call(t,C,I,P,$,R,T)}return Object.setPrototypeOf&&Object.setPrototypeOf(A,p),A})(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:(function(p){return function(A,C,I,P,$){for(var R=0;;)try{return p.call(t,A,C,I,P,$)}catch(_){if(_.code==="EAGAIN"&&R<10){R++;continue}throw _}}})(t.readSync);function f(p){p.lchmod=function(A,C,I){p.open(A,r.O_WRONLY|r.O_SYMLINK,C,function(P,$){if(P){I&&I(P);return}p.fchmod($,C,function(R){p.close($,function(_){I&&I(R||_)})})})},p.lchmodSync=function(A,C){var I=p.openSync(A,r.O_WRONLY|r.O_SYMLINK,C),P=!0,$;try{$=p.fchmodSync(I,C),P=!1}finally{if(P)try{p.closeSync(I)}catch{}else p.closeSync(I)}return $}}function i(p){r.hasOwnProperty("O_SYMLINK")&&p.futimes?(p.lutimes=function(A,C,I,P){p.open(A,r.O_SYMLINK,function($,R){if($){P&&P($);return}p.futimes(R,C,I,function(_){p.close(R,function(T){P&&P(_||T)})})})},p.lutimesSync=function(A,C,I){var P=p.openSync(A,r.O_SYMLINK),$,R=!0;try{$=p.futimesSync(P,C,I),R=!1}finally{if(R)try{p.closeSync(P)}catch{}else p.closeSync(P)}return $}):p.futimes&&(p.lutimes=function(A,C,I,P){P&&process.nextTick(P)},p.lutimesSync=function(){})}function s(p){return p&&function(A,C,I){return p.call(t,A,C,function(P){y(P)&&(P=null),I&&I.apply(this,arguments)})}}function n(p){return p&&function(A,C){try{return p.call(t,A,C)}catch(I){if(!y(I))throw I}}}function o(p){return p&&function(A,C,I,P){return p.call(t,A,C,I,function($){y($)&&($=null),P&&P.apply(this,arguments)})}}function a(p){return p&&function(A,C,I){try{return p.call(t,A,C,I)}catch(P){if(!y(P))throw P}}}function m(p){return p&&function(A,C,I){typeof C=="function"&&(I=C,C=null);function P($,R){R&&(R.uid<0&&(R.uid+=4294967296),R.gid<0&&(R.gid+=4294967296)),I&&I.apply(this,arguments)}return C?p.call(t,A,C,P):p.call(t,A,P)}}function g(p){return p&&function(A,C){var I=C?p.call(t,A,C):p.call(t,A);return I&&(I.uid<0&&(I.uid+=4294967296),I.gid<0&&(I.gid+=4294967296)),I}}function y(p){if(!p||p.code==="ENOSYS")return!0;var A=!process.getuid||process.getuid()!==0;return!!(A&&(p.code==="EINVAL"||p.code==="EPERM"))}}return Kr}var Jr,Ra;function ac(){if(Ra)return Jr;Ra=1;var r=hr.Stream;Jr=d;function d(h){return{ReadStream:u,WriteStream:c};function u(l,t){if(!(this instanceof u))return new u(l,t);r.call(this);var f=this;this.path=l,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,t=t||{};for(var i=Object.keys(t),s=0,n=i.length;s<n;s++){var o=i[s];this[o]=t[o]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){f._read()});return}h.open(this.path,this.flags,this.mode,function(a,m){if(a){f.emit("error",a),f.readable=!1;return}f.fd=m,f.emit("open",m),f._read()})}function c(l,t){if(!(this instanceof c))return new c(l,t);r.call(this),this.path=l,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,t=t||{};for(var f=Object.keys(t),i=0,s=f.length;i<s;i++){var n=f[i];this[n]=t[n]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=h.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}return Jr}var Qr,Ca;function oc(){if(Ca)return Qr;Ca=1,Qr=d;var r=Object.getPrototypeOf||function(h){return h.__proto__};function d(h){if(h===null||typeof h!="object")return h;if(h instanceof Object)var u={__proto__:r(h)};else var u=Object.create(null);return Object.getOwnPropertyNames(h).forEach(function(c){Object.defineProperty(u,c,Object.getOwnPropertyDescriptor(h,c))}),u}return Qr}var Rr,ba;function We(){if(ba)return Rr;ba=1;var r=Ye,d=ic(),h=ac(),u=oc(),c=Ji,l,t;typeof Symbol=="function"&&typeof Symbol.for=="function"?(l=Symbol.for("graceful-fs.queue"),t=Symbol.for("graceful-fs.previous")):(l="___graceful-fs.queue",t="___graceful-fs.previous");function f(){}function i(p,A){Object.defineProperty(p,l,{get:function(){return A}})}var s=f;if(c.debuglog?s=c.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(s=function(){var p=c.format.apply(c,arguments);p="GFS4: "+p.split(/\n/).join(`
GFS4: `),console.error(p)}),!r[l]){var n=et[l]||[];i(r,n),r.close=(function(p){function A(C,I){return p.call(r,C,function(P){P||g(),typeof I=="function"&&I.apply(this,arguments)})}return Object.defineProperty(A,t,{value:p}),A})(r.close),r.closeSync=(function(p){function A(C){p.apply(r,arguments),g()}return Object.defineProperty(A,t,{value:p}),A})(r.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){s(r[l]),Rl.equal(r[l].length,0)})}et[l]||i(et,r[l]),Rr=o(u(r)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!r.__patched&&(Rr=o(r),r.__patched=!0);function o(p){d(p),p.gracefulify=o,p.createReadStream=ce,p.createWriteStream=ue;var A=p.readFile;p.readFile=C;function C(K,Ee,S){return typeof Ee=="function"&&(S=Ee,Ee=null),v(K,Ee,S);function v(H,N,le,me){return A(H,N,function(pe){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?a([v,[H,N,le],pe,me||Date.now(),Date.now()]):typeof le=="function"&&le.apply(this,arguments)})}}var I=p.writeFile;p.writeFile=P;function P(K,Ee,S,v){return typeof S=="function"&&(v=S,S=null),H(K,Ee,S,v);function H(N,le,me,pe,_e){return I(N,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?a([H,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var $=p.appendFile;$&&(p.appendFile=R);function R(K,Ee,S,v){return typeof S=="function"&&(v=S,S=null),H(K,Ee,S,v);function H(N,le,me,pe,_e){return $(N,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?a([H,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var _=p.copyFile;_&&(p.copyFile=T);function T(K,Ee,S,v){return typeof S=="function"&&(v=S,S=0),H(K,Ee,S,v);function H(N,le,me,pe,_e){return _(N,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?a([H,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var E=p.readdir;p.readdir=U;var k=/^v[0-5]\./;function U(K,Ee,S){typeof Ee=="function"&&(S=Ee,Ee=null);var v=k.test(process.version)?function(le,me,pe,_e){return E(le,H(le,me,pe,_e))}:function(le,me,pe,_e){return E(le,me,H(le,me,pe,_e))};return v(K,Ee,S);function H(N,le,me,pe){return function(_e,ye){_e&&(_e.code==="EMFILE"||_e.code==="ENFILE")?a([v,[N,le,me],_e,pe||Date.now(),Date.now()]):(ye&&ye.sort&&ye.sort(),typeof me=="function"&&me.call(this,_e,ye))}}}if(process.version.substr(0,4)==="v0.8"){var x=h(p);q=x.ReadStream,W=x.WriteStream}var M=p.ReadStream;M&&(q.prototype=Object.create(M.prototype),q.prototype.open=J);var D=p.WriteStream;D&&(W.prototype=Object.create(D.prototype),W.prototype.open=ne),Object.defineProperty(p,"ReadStream",{get:function(){return q},set:function(K){q=K},enumerable:!0,configurable:!0}),Object.defineProperty(p,"WriteStream",{get:function(){return W},set:function(K){W=K},enumerable:!0,configurable:!0});var O=q;Object.defineProperty(p,"FileReadStream",{get:function(){return O},set:function(K){O=K},enumerable:!0,configurable:!0});var F=W;Object.defineProperty(p,"FileWriteStream",{get:function(){return F},set:function(K){F=K},enumerable:!0,configurable:!0});function q(K,Ee){return this instanceof q?(M.apply(this,arguments),this):q.apply(Object.create(q.prototype),arguments)}function J(){var K=this;Ae(K.path,K.flags,K.mode,function(Ee,S){Ee?(K.autoClose&&K.destroy(),K.emit("error",Ee)):(K.fd=S,K.emit("open",S),K.read())})}function W(K,Ee){return this instanceof W?(D.apply(this,arguments),this):W.apply(Object.create(W.prototype),arguments)}function ne(){var K=this;Ae(K.path,K.flags,K.mode,function(Ee,S){Ee?(K.destroy(),K.emit("error",Ee)):(K.fd=S,K.emit("open",S))})}function ce(K,Ee){return new p.ReadStream(K,Ee)}function ue(K,Ee){return new p.WriteStream(K,Ee)}var ie=p.open;p.open=Ae;function Ae(K,Ee,S,v){return typeof S=="function"&&(v=S,S=null),H(K,Ee,S,v);function H(N,le,me,pe,_e){return ie(N,le,me,function(ye,xe){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?a([H,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}return p}function a(p){s("ENQUEUE",p[0].name,p[1]),r[l].push(p),y()}var m;function g(){for(var p=Date.now(),A=0;A<r[l].length;++A)r[l][A].length>2&&(r[l][A][3]=p,r[l][A][4]=p);y()}function y(){if(clearTimeout(m),m=void 0,r[l].length!==0){var p=r[l].shift(),A=p[0],C=p[1],I=p[2],P=p[3],$=p[4];if(P===void 0)s("RETRY",A.name,C),A.apply(null,C);else if(Date.now()-P>=6e4){s("TIMEOUT",A.name,C);var R=C.pop();typeof R=="function"&&R.call(null,I)}else{var _=Date.now()-$,T=Math.max($-P,1),E=Math.min(T*1.2,100);_>=E?(s("RETRY",A.name,C),A.apply(null,C.concat([P]))):r[l].push(p)}m===void 0&&(m=setTimeout(y,0))}}return Rr}var Pa;function Ut(){return Pa||(Pa=1,(function(r){const d=ze().fromCallback,h=We(),u=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(c=>typeof h[c]=="function");Object.assign(r,h),u.forEach(c=>{r[c]=d(h[c])}),r.exists=function(c,l){return typeof l=="function"?h.exists(c,l):new Promise(t=>h.exists(c,t))},r.read=function(c,l,t,f,i,s){return typeof s=="function"?h.read(c,l,t,f,i,s):new Promise((n,o)=>{h.read(c,l,t,f,i,(a,m,g)=>{if(a)return o(a);n({bytesRead:m,buffer:g})})})},r.write=function(c,l,...t){return typeof t[t.length-1]=="function"?h.write(c,l,...t):new Promise((f,i)=>{h.write(c,l,...t,(s,n,o)=>{if(s)return i(s);f({bytesWritten:n,buffer:o})})})},typeof h.writev=="function"&&(r.writev=function(c,l,...t){return typeof t[t.length-1]=="function"?h.writev(c,l,...t):new Promise((f,i)=>{h.writev(c,l,...t,(s,n,o)=>{if(s)return i(s);f({bytesWritten:n,buffers:o})})})}),typeof h.realpath.native=="function"?r.realpath.native=d(h.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(Xr)),Xr}var Cr={},Zr={},Ia;function sc(){if(Ia)return Zr;Ia=1;const r=Ie;return Zr.checkPath=function(h){if(process.platform==="win32"&&/[<>:"|?*]/.test(h.replace(r.parse(h).root,""))){const c=new Error(`Path contains invalid characters: ${h}`);throw c.code="EINVAL",c}},Zr}var Oa;function lc(){if(Oa)return Cr;Oa=1;const r=Ut(),{checkPath:d}=sc(),h=u=>{const c={mode:511};return typeof u=="number"?u:{...c,...u}.mode};return Cr.makeDir=async(u,c)=>(d(u),r.mkdir(u,{mode:h(c),recursive:!0})),Cr.makeDirSync=(u,c)=>(d(u),r.mkdirSync(u,{mode:h(c),recursive:!0})),Cr}var en,Da;function it(){if(Da)return en;Da=1;const r=ze().fromPromise,{makeDir:d,makeDirSync:h}=lc(),u=r(d);return en={mkdirs:u,mkdirsSync:h,mkdirp:u,mkdirpSync:h,ensureDir:u,ensureDirSync:h},en}var tn,Na;function Ct(){if(Na)return tn;Na=1;const r=ze().fromPromise,d=Ut();function h(u){return d.access(u).then(()=>!0).catch(()=>!1)}return tn={pathExists:r(h),pathExistsSync:d.existsSync},tn}var rn,Fa;function Il(){if(Fa)return rn;Fa=1;const r=We();function d(u,c,l,t){r.open(u,"r+",(f,i)=>{if(f)return t(f);r.futimes(i,c,l,s=>{r.close(i,n=>{t&&t(s||n)})})})}function h(u,c,l){const t=r.openSync(u,"r+");return r.futimesSync(t,c,l),r.closeSync(t)}return rn={utimesMillis:d,utimesMillisSync:h},rn}var nn,xa;function $t(){if(xa)return nn;xa=1;const r=Ut(),d=Ie,h=Ji;function u(a,m,g){const y=g.dereference?p=>r.stat(p,{bigint:!0}):p=>r.lstat(p,{bigint:!0});return Promise.all([y(a),y(m).catch(p=>{if(p.code==="ENOENT")return null;throw p})]).then(([p,A])=>({srcStat:p,destStat:A}))}function c(a,m,g){let y;const p=g.dereference?C=>r.statSync(C,{bigint:!0}):C=>r.lstatSync(C,{bigint:!0}),A=p(a);try{y=p(m)}catch(C){if(C.code==="ENOENT")return{srcStat:A,destStat:null};throw C}return{srcStat:A,destStat:y}}function l(a,m,g,y,p){h.callbackify(u)(a,m,y,(A,C)=>{if(A)return p(A);const{srcStat:I,destStat:P}=C;if(P){if(s(I,P)){const $=d.basename(a),R=d.basename(m);return g==="move"&&$!==R&&$.toLowerCase()===R.toLowerCase()?p(null,{srcStat:I,destStat:P,isChangingCase:!0}):p(new Error("Source and destination must not be the same."))}if(I.isDirectory()&&!P.isDirectory())return p(new Error(`Cannot overwrite non-directory '${m}' with directory '${a}'.`));if(!I.isDirectory()&&P.isDirectory())return p(new Error(`Cannot overwrite directory '${m}' with non-directory '${a}'.`))}return I.isDirectory()&&n(a,m)?p(new Error(o(a,m,g))):p(null,{srcStat:I,destStat:P})})}function t(a,m,g,y){const{srcStat:p,destStat:A}=c(a,m,y);if(A){if(s(p,A)){const C=d.basename(a),I=d.basename(m);if(g==="move"&&C!==I&&C.toLowerCase()===I.toLowerCase())return{srcStat:p,destStat:A,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(p.isDirectory()&&!A.isDirectory())throw new Error(`Cannot overwrite non-directory '${m}' with directory '${a}'.`);if(!p.isDirectory()&&A.isDirectory())throw new Error(`Cannot overwrite directory '${m}' with non-directory '${a}'.`)}if(p.isDirectory()&&n(a,m))throw new Error(o(a,m,g));return{srcStat:p,destStat:A}}function f(a,m,g,y,p){const A=d.resolve(d.dirname(a)),C=d.resolve(d.dirname(g));if(C===A||C===d.parse(C).root)return p();r.stat(C,{bigint:!0},(I,P)=>I?I.code==="ENOENT"?p():p(I):s(m,P)?p(new Error(o(a,g,y))):f(a,m,C,y,p))}function i(a,m,g,y){const p=d.resolve(d.dirname(a)),A=d.resolve(d.dirname(g));if(A===p||A===d.parse(A).root)return;let C;try{C=r.statSync(A,{bigint:!0})}catch(I){if(I.code==="ENOENT")return;throw I}if(s(m,C))throw new Error(o(a,g,y));return i(a,m,A,y)}function s(a,m){return m.ino&&m.dev&&m.ino===a.ino&&m.dev===a.dev}function n(a,m){const g=d.resolve(a).split(d.sep).filter(p=>p),y=d.resolve(m).split(d.sep).filter(p=>p);return g.reduce((p,A,C)=>p&&y[C]===A,!0)}function o(a,m,g){return`Cannot ${g} '${a}' to a subdirectory of itself, '${m}'.`}return nn={checkPaths:l,checkPathsSync:t,checkParentPaths:f,checkParentPathsSync:i,isSrcSubdir:n,areIdentical:s},nn}var an,La;function uc(){if(La)return an;La=1;const r=We(),d=Ie,h=it().mkdirs,u=Ct().pathExists,c=Il().utimesMillis,l=$t();function t(U,x,M,D){typeof M=="function"&&!D?(D=M,M={}):typeof M=="function"&&(M={filter:M}),D=D||function(){},M=M||{},M.clobber="clobber"in M?!!M.clobber:!0,M.overwrite="overwrite"in M?!!M.overwrite:M.clobber,M.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),l.checkPaths(U,x,"copy",M,(O,F)=>{if(O)return D(O);const{srcStat:q,destStat:J}=F;l.checkParentPaths(U,q,x,"copy",W=>W?D(W):M.filter?i(f,J,U,x,M,D):f(J,U,x,M,D))})}function f(U,x,M,D,O){const F=d.dirname(M);u(F,(q,J)=>{if(q)return O(q);if(J)return n(U,x,M,D,O);h(F,W=>W?O(W):n(U,x,M,D,O))})}function i(U,x,M,D,O,F){Promise.resolve(O.filter(M,D)).then(q=>q?U(x,M,D,O,F):F(),q=>F(q))}function s(U,x,M,D,O){return D.filter?i(n,U,x,M,D,O):n(U,x,M,D,O)}function n(U,x,M,D,O){(D.dereference?r.stat:r.lstat)(x,(q,J)=>q?O(q):J.isDirectory()?P(J,U,x,M,D,O):J.isFile()||J.isCharacterDevice()||J.isBlockDevice()?o(J,U,x,M,D,O):J.isSymbolicLink()?E(U,x,M,D,O):J.isSocket()?O(new Error(`Cannot copy a socket file: ${x}`)):J.isFIFO()?O(new Error(`Cannot copy a FIFO pipe: ${x}`)):O(new Error(`Unknown file: ${x}`)))}function o(U,x,M,D,O,F){return x?a(U,M,D,O,F):m(U,M,D,O,F)}function a(U,x,M,D,O){if(D.overwrite)r.unlink(M,F=>F?O(F):m(U,x,M,D,O));else return D.errorOnExist?O(new Error(`'${M}' already exists`)):O()}function m(U,x,M,D,O){r.copyFile(x,M,F=>F?O(F):D.preserveTimestamps?g(U.mode,x,M,O):C(M,U.mode,O))}function g(U,x,M,D){return y(U)?p(M,U,O=>O?D(O):A(U,x,M,D)):A(U,x,M,D)}function y(U){return(U&128)===0}function p(U,x,M){return C(U,x|128,M)}function A(U,x,M,D){I(x,M,O=>O?D(O):C(M,U,D))}function C(U,x,M){return r.chmod(U,x,M)}function I(U,x,M){r.stat(U,(D,O)=>D?M(D):c(x,O.atime,O.mtime,M))}function P(U,x,M,D,O,F){return x?R(M,D,O,F):$(U.mode,M,D,O,F)}function $(U,x,M,D,O){r.mkdir(M,F=>{if(F)return O(F);R(x,M,D,q=>q?O(q):C(M,U,O))})}function R(U,x,M,D){r.readdir(U,(O,F)=>O?D(O):_(F,U,x,M,D))}function _(U,x,M,D,O){const F=U.pop();return F?T(U,F,x,M,D,O):O()}function T(U,x,M,D,O,F){const q=d.join(M,x),J=d.join(D,x);l.checkPaths(q,J,"copy",O,(W,ne)=>{if(W)return F(W);const{destStat:ce}=ne;s(ce,q,J,O,ue=>ue?F(ue):_(U,M,D,O,F))})}function E(U,x,M,D,O){r.readlink(x,(F,q)=>{if(F)return O(F);if(D.dereference&&(q=d.resolve(process.cwd(),q)),U)r.readlink(M,(J,W)=>J?J.code==="EINVAL"||J.code==="UNKNOWN"?r.symlink(q,M,O):O(J):(D.dereference&&(W=d.resolve(process.cwd(),W)),l.isSrcSubdir(q,W)?O(new Error(`Cannot copy '${q}' to a subdirectory of itself, '${W}'.`)):U.isDirectory()&&l.isSrcSubdir(W,q)?O(new Error(`Cannot overwrite '${W}' with '${q}'.`)):k(q,M,O)));else return r.symlink(q,M,O)})}function k(U,x,M){r.unlink(x,D=>D?M(D):r.symlink(U,x,M))}return an=t,an}var on,Ua;function cc(){if(Ua)return on;Ua=1;const r=We(),d=Ie,h=it().mkdirsSync,u=Il().utimesMillisSync,c=$t();function l(_,T,E){typeof E=="function"&&(E={filter:E}),E=E||{},E.clobber="clobber"in E?!!E.clobber:!0,E.overwrite="overwrite"in E?!!E.overwrite:E.clobber,E.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:k,destStat:U}=c.checkPathsSync(_,T,"copy",E);return c.checkParentPathsSync(_,k,T,"copy"),t(U,_,T,E)}function t(_,T,E,k){if(k.filter&&!k.filter(T,E))return;const U=d.dirname(E);return r.existsSync(U)||h(U),i(_,T,E,k)}function f(_,T,E,k){if(!(k.filter&&!k.filter(T,E)))return i(_,T,E,k)}function i(_,T,E,k){const x=(k.dereference?r.statSync:r.lstatSync)(T);if(x.isDirectory())return A(x,_,T,E,k);if(x.isFile()||x.isCharacterDevice()||x.isBlockDevice())return s(x,_,T,E,k);if(x.isSymbolicLink())return $(_,T,E,k);throw x.isSocket()?new Error(`Cannot copy a socket file: ${T}`):x.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${T}`):new Error(`Unknown file: ${T}`)}function s(_,T,E,k,U){return T?n(_,E,k,U):o(_,E,k,U)}function n(_,T,E,k){if(k.overwrite)return r.unlinkSync(E),o(_,T,E,k);if(k.errorOnExist)throw new Error(`'${E}' already exists`)}function o(_,T,E,k){return r.copyFileSync(T,E),k.preserveTimestamps&&a(_.mode,T,E),y(E,_.mode)}function a(_,T,E){return m(_)&&g(E,_),p(T,E)}function m(_){return(_&128)===0}function g(_,T){return y(_,T|128)}function y(_,T){return r.chmodSync(_,T)}function p(_,T){const E=r.statSync(_);return u(T,E.atime,E.mtime)}function A(_,T,E,k,U){return T?I(E,k,U):C(_.mode,E,k,U)}function C(_,T,E,k){return r.mkdirSync(E),I(T,E,k),y(E,_)}function I(_,T,E){r.readdirSync(_).forEach(k=>P(k,_,T,E))}function P(_,T,E,k){const U=d.join(T,_),x=d.join(E,_),{destStat:M}=c.checkPathsSync(U,x,"copy",k);return f(M,U,x,k)}function $(_,T,E,k){let U=r.readlinkSync(T);if(k.dereference&&(U=d.resolve(process.cwd(),U)),_){let x;try{x=r.readlinkSync(E)}catch(M){if(M.code==="EINVAL"||M.code==="UNKNOWN")return r.symlinkSync(U,E);throw M}if(k.dereference&&(x=d.resolve(process.cwd(),x)),c.isSrcSubdir(U,x))throw new Error(`Cannot copy '${U}' to a subdirectory of itself, '${x}'.`);if(r.statSync(E).isDirectory()&&c.isSrcSubdir(x,U))throw new Error(`Cannot overwrite '${x}' with '${U}'.`);return R(U,E)}else return r.symlinkSync(U,E)}function R(_,T){return r.unlinkSync(T),r.symlinkSync(_,T)}return on=l,on}var sn,$a;function Qi(){if($a)return sn;$a=1;const r=ze().fromCallback;return sn={copy:r(uc()),copySync:cc()},sn}var ln,ka;function fc(){if(ka)return ln;ka=1;const r=We(),d=Ie,h=Rl,u=process.platform==="win32";function c(g){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(p=>{g[p]=g[p]||r[p],p=p+"Sync",g[p]=g[p]||r[p]}),g.maxBusyTries=g.maxBusyTries||3}function l(g,y,p){let A=0;typeof y=="function"&&(p=y,y={}),h(g,"rimraf: missing path"),h.strictEqual(typeof g,"string","rimraf: path should be a string"),h.strictEqual(typeof p,"function","rimraf: callback function required"),h(y,"rimraf: invalid options argument provided"),h.strictEqual(typeof y,"object","rimraf: options should be object"),c(y),t(g,y,function C(I){if(I){if((I.code==="EBUSY"||I.code==="ENOTEMPTY"||I.code==="EPERM")&&A<y.maxBusyTries){A++;const P=A*100;return setTimeout(()=>t(g,y,C),P)}I.code==="ENOENT"&&(I=null)}p(I)})}function t(g,y,p){h(g),h(y),h(typeof p=="function"),y.lstat(g,(A,C)=>{if(A&&A.code==="ENOENT")return p(null);if(A&&A.code==="EPERM"&&u)return f(g,y,A,p);if(C&&C.isDirectory())return s(g,y,A,p);y.unlink(g,I=>{if(I){if(I.code==="ENOENT")return p(null);if(I.code==="EPERM")return u?f(g,y,I,p):s(g,y,I,p);if(I.code==="EISDIR")return s(g,y,I,p)}return p(I)})})}function f(g,y,p,A){h(g),h(y),h(typeof A=="function"),y.chmod(g,438,C=>{C?A(C.code==="ENOENT"?null:p):y.stat(g,(I,P)=>{I?A(I.code==="ENOENT"?null:p):P.isDirectory()?s(g,y,p,A):y.unlink(g,A)})})}function i(g,y,p){let A;h(g),h(y);try{y.chmodSync(g,438)}catch(C){if(C.code==="ENOENT")return;throw p}try{A=y.statSync(g)}catch(C){if(C.code==="ENOENT")return;throw p}A.isDirectory()?a(g,y,p):y.unlinkSync(g)}function s(g,y,p,A){h(g),h(y),h(typeof A=="function"),y.rmdir(g,C=>{C&&(C.code==="ENOTEMPTY"||C.code==="EEXIST"||C.code==="EPERM")?n(g,y,A):C&&C.code==="ENOTDIR"?A(p):A(C)})}function n(g,y,p){h(g),h(y),h(typeof p=="function"),y.readdir(g,(A,C)=>{if(A)return p(A);let I=C.length,P;if(I===0)return y.rmdir(g,p);C.forEach($=>{l(d.join(g,$),y,R=>{if(!P){if(R)return p(P=R);--I===0&&y.rmdir(g,p)}})})})}function o(g,y){let p;y=y||{},c(y),h(g,"rimraf: missing path"),h.strictEqual(typeof g,"string","rimraf: path should be a string"),h(y,"rimraf: missing options"),h.strictEqual(typeof y,"object","rimraf: options should be object");try{p=y.lstatSync(g)}catch(A){if(A.code==="ENOENT")return;A.code==="EPERM"&&u&&i(g,y,A)}try{p&&p.isDirectory()?a(g,y,null):y.unlinkSync(g)}catch(A){if(A.code==="ENOENT")return;if(A.code==="EPERM")return u?i(g,y,A):a(g,y,A);if(A.code!=="EISDIR")throw A;a(g,y,A)}}function a(g,y,p){h(g),h(y);try{y.rmdirSync(g)}catch(A){if(A.code==="ENOTDIR")throw p;if(A.code==="ENOTEMPTY"||A.code==="EEXIST"||A.code==="EPERM")m(g,y);else if(A.code!=="ENOENT")throw A}}function m(g,y){if(h(g),h(y),y.readdirSync(g).forEach(p=>o(d.join(g,p),y)),u){const p=Date.now();do try{return y.rmdirSync(g,y)}catch{}while(Date.now()-p<500)}else return y.rmdirSync(g,y)}return ln=l,l.sync=o,ln}var un,qa;function Mr(){if(qa)return un;qa=1;const r=We(),d=ze().fromCallback,h=fc();function u(l,t){if(r.rm)return r.rm(l,{recursive:!0,force:!0},t);h(l,t)}function c(l){if(r.rmSync)return r.rmSync(l,{recursive:!0,force:!0});h.sync(l)}return un={remove:d(u),removeSync:c},un}var cn,Ma;function dc(){if(Ma)return cn;Ma=1;const r=ze().fromPromise,d=Ut(),h=Ie,u=it(),c=Mr(),l=r(async function(i){let s;try{s=await d.readdir(i)}catch{return u.mkdirs(i)}return Promise.all(s.map(n=>c.remove(h.join(i,n))))});function t(f){let i;try{i=d.readdirSync(f)}catch{return u.mkdirsSync(f)}i.forEach(s=>{s=h.join(f,s),c.removeSync(s)})}return cn={emptyDirSync:t,emptydirSync:t,emptyDir:l,emptydir:l},cn}var fn,Ba;function hc(){if(Ba)return fn;Ba=1;const r=ze().fromCallback,d=Ie,h=We(),u=it();function c(t,f){function i(){h.writeFile(t,"",s=>{if(s)return f(s);f()})}h.stat(t,(s,n)=>{if(!s&&n.isFile())return f();const o=d.dirname(t);h.stat(o,(a,m)=>{if(a)return a.code==="ENOENT"?u.mkdirs(o,g=>{if(g)return f(g);i()}):f(a);m.isDirectory()?i():h.readdir(o,g=>{if(g)return f(g)})})})}function l(t){let f;try{f=h.statSync(t)}catch{}if(f&&f.isFile())return;const i=d.dirname(t);try{h.statSync(i).isDirectory()||h.readdirSync(i)}catch(s){if(s&&s.code==="ENOENT")u.mkdirsSync(i);else throw s}h.writeFileSync(t,"")}return fn={createFile:r(c),createFileSync:l},fn}var dn,Ha;function pc(){if(Ha)return dn;Ha=1;const r=ze().fromCallback,d=Ie,h=We(),u=it(),c=Ct().pathExists,{areIdentical:l}=$t();function t(i,s,n){function o(a,m){h.link(a,m,g=>{if(g)return n(g);n(null)})}h.lstat(s,(a,m)=>{h.lstat(i,(g,y)=>{if(g)return g.message=g.message.replace("lstat","ensureLink"),n(g);if(m&&l(y,m))return n(null);const p=d.dirname(s);c(p,(A,C)=>{if(A)return n(A);if(C)return o(i,s);u.mkdirs(p,I=>{if(I)return n(I);o(i,s)})})})})}function f(i,s){let n;try{n=h.lstatSync(s)}catch{}try{const m=h.lstatSync(i);if(n&&l(m,n))return}catch(m){throw m.message=m.message.replace("lstat","ensureLink"),m}const o=d.dirname(s);return h.existsSync(o)||u.mkdirsSync(o),h.linkSync(i,s)}return dn={createLink:r(t),createLinkSync:f},dn}var hn,ja;function mc(){if(ja)return hn;ja=1;const r=Ie,d=We(),h=Ct().pathExists;function u(l,t,f){if(r.isAbsolute(l))return d.lstat(l,i=>i?(i.message=i.message.replace("lstat","ensureSymlink"),f(i)):f(null,{toCwd:l,toDst:l}));{const i=r.dirname(t),s=r.join(i,l);return h(s,(n,o)=>n?f(n):o?f(null,{toCwd:s,toDst:l}):d.lstat(l,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),f(a)):f(null,{toCwd:l,toDst:r.relative(i,l)})))}}function c(l,t){let f;if(r.isAbsolute(l)){if(f=d.existsSync(l),!f)throw new Error("absolute srcpath does not exist");return{toCwd:l,toDst:l}}else{const i=r.dirname(t),s=r.join(i,l);if(f=d.existsSync(s),f)return{toCwd:s,toDst:l};if(f=d.existsSync(l),!f)throw new Error("relative srcpath does not exist");return{toCwd:l,toDst:r.relative(i,l)}}}return hn={symlinkPaths:u,symlinkPathsSync:c},hn}var pn,Ga;function gc(){if(Ga)return pn;Ga=1;const r=We();function d(u,c,l){if(l=typeof c=="function"?c:l,c=typeof c=="function"?!1:c,c)return l(null,c);r.lstat(u,(t,f)=>{if(t)return l(null,"file");c=f&&f.isDirectory()?"dir":"file",l(null,c)})}function h(u,c){let l;if(c)return c;try{l=r.lstatSync(u)}catch{return"file"}return l&&l.isDirectory()?"dir":"file"}return pn={symlinkType:d,symlinkTypeSync:h},pn}var mn,Wa;function vc(){if(Wa)return mn;Wa=1;const r=ze().fromCallback,d=Ie,h=Ut(),u=it(),c=u.mkdirs,l=u.mkdirsSync,t=mc(),f=t.symlinkPaths,i=t.symlinkPathsSync,s=gc(),n=s.symlinkType,o=s.symlinkTypeSync,a=Ct().pathExists,{areIdentical:m}=$t();function g(A,C,I,P){P=typeof I=="function"?I:P,I=typeof I=="function"?!1:I,h.lstat(C,($,R)=>{!$&&R.isSymbolicLink()?Promise.all([h.stat(A),h.stat(C)]).then(([_,T])=>{if(m(_,T))return P(null);y(A,C,I,P)}):y(A,C,I,P)})}function y(A,C,I,P){f(A,C,($,R)=>{if($)return P($);A=R.toDst,n(R.toCwd,I,(_,T)=>{if(_)return P(_);const E=d.dirname(C);a(E,(k,U)=>{if(k)return P(k);if(U)return h.symlink(A,C,T,P);c(E,x=>{if(x)return P(x);h.symlink(A,C,T,P)})})})})}function p(A,C,I){let P;try{P=h.lstatSync(C)}catch{}if(P&&P.isSymbolicLink()){const T=h.statSync(A),E=h.statSync(C);if(m(T,E))return}const $=i(A,C);A=$.toDst,I=o($.toCwd,I);const R=d.dirname(C);return h.existsSync(R)||l(R),h.symlinkSync(A,C,I)}return mn={createSymlink:r(g),createSymlinkSync:p},mn}var gn,Va;function Ec(){if(Va)return gn;Va=1;const{createFile:r,createFileSync:d}=hc(),{createLink:h,createLinkSync:u}=pc(),{createSymlink:c,createSymlinkSync:l}=vc();return gn={createFile:r,createFileSync:d,ensureFile:r,ensureFileSync:d,createLink:h,createLinkSync:u,ensureLink:h,ensureLinkSync:u,createSymlink:c,createSymlinkSync:l,ensureSymlink:c,ensureSymlinkSync:l},gn}var vn,Ya;function Zi(){if(Ya)return vn;Ya=1;function r(h,{EOL:u=`
`,finalEOL:c=!0,replacer:l=null,spaces:t}={}){const f=c?u:"";return JSON.stringify(h,l,t).replace(/\n/g,u)+f}function d(h){return Buffer.isBuffer(h)&&(h=h.toString("utf8")),h.replace(/^\uFEFF/,"")}return vn={stringify:r,stripBom:d},vn}var En,za;function yc(){if(za)return En;za=1;let r;try{r=We()}catch{r=Ye}const d=ze(),{stringify:h,stripBom:u}=Zi();async function c(n,o={}){typeof o=="string"&&(o={encoding:o});const a=o.fs||r,m="throws"in o?o.throws:!0;let g=await d.fromCallback(a.readFile)(n,o);g=u(g);let y;try{y=JSON.parse(g,o?o.reviver:null)}catch(p){if(m)throw p.message=`${n}: ${p.message}`,p;return null}return y}const l=d.fromPromise(c);function t(n,o={}){typeof o=="string"&&(o={encoding:o});const a=o.fs||r,m="throws"in o?o.throws:!0;try{let g=a.readFileSync(n,o);return g=u(g),JSON.parse(g,o.reviver)}catch(g){if(m)throw g.message=`${n}: ${g.message}`,g;return null}}async function f(n,o,a={}){const m=a.fs||r,g=h(o,a);await d.fromCallback(m.writeFile)(n,g,a)}const i=d.fromPromise(f);function s(n,o,a={}){const m=a.fs||r,g=h(o,a);return m.writeFileSync(n,g,a)}return En={readFile:l,readFileSync:t,writeFile:i,writeFileSync:s},En}var yn,Xa;function wc(){if(Xa)return yn;Xa=1;const r=yc();return yn={readJson:r.readFile,readJsonSync:r.readFileSync,writeJson:r.writeFile,writeJsonSync:r.writeFileSync},yn}var wn,Ka;function ea(){if(Ka)return wn;Ka=1;const r=ze().fromCallback,d=We(),h=Ie,u=it(),c=Ct().pathExists;function l(f,i,s,n){typeof s=="function"&&(n=s,s="utf8");const o=h.dirname(f);c(o,(a,m)=>{if(a)return n(a);if(m)return d.writeFile(f,i,s,n);u.mkdirs(o,g=>{if(g)return n(g);d.writeFile(f,i,s,n)})})}function t(f,...i){const s=h.dirname(f);if(d.existsSync(s))return d.writeFileSync(f,...i);u.mkdirsSync(s),d.writeFileSync(f,...i)}return wn={outputFile:r(l),outputFileSync:t},wn}var _n,Ja;function _c(){if(Ja)return _n;Ja=1;const{stringify:r}=Zi(),{outputFile:d}=ea();async function h(u,c,l={}){const t=r(c,l);await d(u,t,l)}return _n=h,_n}var Sn,Qa;function Sc(){if(Qa)return Sn;Qa=1;const{stringify:r}=Zi(),{outputFileSync:d}=ea();function h(u,c,l){const t=r(c,l);d(u,t,l)}return Sn=h,Sn}var An,Za;function Ac(){if(Za)return An;Za=1;const r=ze().fromPromise,d=wc();return d.outputJson=r(_c()),d.outputJsonSync=Sc(),d.outputJSON=d.outputJson,d.outputJSONSync=d.outputJsonSync,d.writeJSON=d.writeJson,d.writeJSONSync=d.writeJsonSync,d.readJSON=d.readJson,d.readJSONSync=d.readJsonSync,An=d,An}var Tn,eo;function Tc(){if(eo)return Tn;eo=1;const r=We(),d=Ie,h=Qi().copy,u=Mr().remove,c=it().mkdirp,l=Ct().pathExists,t=$t();function f(a,m,g,y){typeof g=="function"&&(y=g,g={}),g=g||{};const p=g.overwrite||g.clobber||!1;t.checkPaths(a,m,"move",g,(A,C)=>{if(A)return y(A);const{srcStat:I,isChangingCase:P=!1}=C;t.checkParentPaths(a,I,m,"move",$=>{if($)return y($);if(i(m))return s(a,m,p,P,y);c(d.dirname(m),R=>R?y(R):s(a,m,p,P,y))})})}function i(a){const m=d.dirname(a);return d.parse(m).root===m}function s(a,m,g,y,p){if(y)return n(a,m,g,p);if(g)return u(m,A=>A?p(A):n(a,m,g,p));l(m,(A,C)=>A?p(A):C?p(new Error("dest already exists.")):n(a,m,g,p))}function n(a,m,g,y){r.rename(a,m,p=>p?p.code!=="EXDEV"?y(p):o(a,m,g,y):y())}function o(a,m,g,y){h(a,m,{overwrite:g,errorOnExist:!0},A=>A?y(A):u(a,y))}return Tn=f,Tn}var Rn,to;function Rc(){if(to)return Rn;to=1;const r=We(),d=Ie,h=Qi().copySync,u=Mr().removeSync,c=it().mkdirpSync,l=$t();function t(o,a,m){m=m||{};const g=m.overwrite||m.clobber||!1,{srcStat:y,isChangingCase:p=!1}=l.checkPathsSync(o,a,"move",m);return l.checkParentPathsSync(o,y,a,"move"),f(a)||c(d.dirname(a)),i(o,a,g,p)}function f(o){const a=d.dirname(o);return d.parse(a).root===a}function i(o,a,m,g){if(g)return s(o,a,m);if(m)return u(a),s(o,a,m);if(r.existsSync(a))throw new Error("dest already exists.");return s(o,a,m)}function s(o,a,m){try{r.renameSync(o,a)}catch(g){if(g.code!=="EXDEV")throw g;return n(o,a,m)}}function n(o,a,m){return h(o,a,{overwrite:m,errorOnExist:!0}),u(o)}return Rn=t,Rn}var Cn,ro;function Cc(){if(ro)return Cn;ro=1;const r=ze().fromCallback;return Cn={move:r(Tc()),moveSync:Rc()},Cn}var bn,no;function pt(){return no||(no=1,bn={...Ut(),...Qi(),...dc(),...Ec(),...Ac(),...it(),...Cc(),...ea(),...Ct(),...Mr()}),bn}var Ht={},St={},Pn={},At={},io;function ta(){if(io)return At;io=1,Object.defineProperty(At,"__esModule",{value:!0}),At.CancellationError=At.CancellationToken=void 0;const r=Cl;let d=class extends r.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(c){this.removeParentCancelHandler(),this._parent=c,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(c){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,c!=null&&(this.parent=c)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(c){this.cancelled?c():this.once("cancel",c)}createPromise(c){if(this.cancelled)return Promise.reject(new h);const l=()=>{if(t!=null)try{this.removeListener("cancel",t),t=null}catch{}};let t=null;return new Promise((f,i)=>{let s=null;if(t=()=>{try{s!=null&&(s(),s=null)}finally{i(new h)}},this.cancelled){t();return}this.onCancel(t),c(f,i,n=>{s=n})}).then(f=>(l(),f)).catch(f=>{throw l(),f})}removeParentCancelHandler(){const c=this._parent;c!=null&&this.parentCancelHandler!=null&&(c.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};At.CancellationToken=d;class h extends Error{constructor(){super("cancelled")}}return At.CancellationError=h,At}var br={},ao;function Br(){if(ao)return br;ao=1,Object.defineProperty(br,"__esModule",{value:!0}),br.newError=r;function r(d,h){const u=new Error(d);return u.code=h,u}return br}var Be={},Pr={exports:{}},Ir={exports:{}},In,oo;function bc(){if(oo)return In;oo=1;var r=1e3,d=r*60,h=d*60,u=h*24,c=u*7,l=u*365.25;In=function(n,o){o=o||{};var a=typeof n;if(a==="string"&&n.length>0)return t(n);if(a==="number"&&isFinite(n))return o.long?i(n):f(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))};function t(n){if(n=String(n),!(n.length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(n);if(o){var a=parseFloat(o[1]),m=(o[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return a*l;case"weeks":case"week":case"w":return a*c;case"days":case"day":case"d":return a*u;case"hours":case"hour":case"hrs":case"hr":case"h":return a*h;case"minutes":case"minute":case"mins":case"min":case"m":return a*d;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function f(n){var o=Math.abs(n);return o>=u?Math.round(n/u)+"d":o>=h?Math.round(n/h)+"h":o>=d?Math.round(n/d)+"m":o>=r?Math.round(n/r)+"s":n+"ms"}function i(n){var o=Math.abs(n);return o>=u?s(n,o,u,"day"):o>=h?s(n,o,h,"hour"):o>=d?s(n,o,d,"minute"):o>=r?s(n,o,r,"second"):n+" ms"}function s(n,o,a,m){var g=o>=a*1.5;return Math.round(n/a)+" "+m+(g?"s":"")}return In}var On,so;function Ol(){if(so)return On;so=1;function r(d){u.debug=u,u.default=u,u.coerce=s,u.disable=f,u.enable=l,u.enabled=i,u.humanize=bc(),u.destroy=n,Object.keys(d).forEach(o=>{u[o]=d[o]}),u.names=[],u.skips=[],u.formatters={};function h(o){let a=0;for(let m=0;m<o.length;m++)a=(a<<5)-a+o.charCodeAt(m),a|=0;return u.colors[Math.abs(a)%u.colors.length]}u.selectColor=h;function u(o){let a,m=null,g,y;function p(...A){if(!p.enabled)return;const C=p,I=Number(new Date),P=I-(a||I);C.diff=P,C.prev=a,C.curr=I,a=I,A[0]=u.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let $=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(_,T)=>{if(_==="%%")return"%";$++;const E=u.formatters[T];if(typeof E=="function"){const k=A[$];_=E.call(C,k),A.splice($,1),$--}return _}),u.formatArgs.call(C,A),(C.log||u.log).apply(C,A)}return p.namespace=o,p.useColors=u.useColors(),p.color=u.selectColor(o),p.extend=c,p.destroy=u.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(g!==u.namespaces&&(g=u.namespaces,y=u.enabled(o)),y),set:A=>{m=A}}),typeof u.init=="function"&&u.init(p),p}function c(o,a){const m=u(this.namespace+(typeof a>"u"?":":a)+o);return m.log=this.log,m}function l(o){u.save(o),u.namespaces=o,u.names=[],u.skips=[];const a=(typeof o=="string"?o:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const m of a)m[0]==="-"?u.skips.push(m.slice(1)):u.names.push(m)}function t(o,a){let m=0,g=0,y=-1,p=0;for(;m<o.length;)if(g<a.length&&(a[g]===o[m]||a[g]==="*"))a[g]==="*"?(y=g,p=m,g++):(m++,g++);else if(y!==-1)g=y+1,p++,m=p;else return!1;for(;g<a.length&&a[g]==="*";)g++;return g===a.length}function f(){const o=[...u.names,...u.skips.map(a=>"-"+a)].join(",");return u.enable(""),o}function i(o){for(const a of u.skips)if(t(o,a))return!1;for(const a of u.names)if(t(o,a))return!0;return!1}function s(o){return o instanceof Error?o.stack||o.message:o}function n(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return u.enable(u.load()),u}return On=r,On}var lo;function Pc(){return lo||(lo=1,(function(r,d){d.formatArgs=u,d.save=c,d.load=l,d.useColors=h,d.storage=t(),d.destroy=(()=>{let i=!1;return()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),d.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function h(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let i;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(i=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(i[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function u(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;i.splice(1,0,s,"color: inherit");let n=0,o=0;i[0].replace(/%[a-zA-Z%]/g,a=>{a!=="%%"&&(n++,a==="%c"&&(o=n))}),i.splice(o,0,s)}d.log=console.debug||console.log||(()=>{});function c(i){try{i?d.storage.setItem("debug",i):d.storage.removeItem("debug")}catch{}}function l(){let i;try{i=d.storage.getItem("debug")||d.storage.getItem("DEBUG")}catch{}return!i&&typeof process<"u"&&"env"in process&&(i=process.env.DEBUG),i}function t(){try{return localStorage}catch{}}r.exports=Ol()(d);const{formatters:f}=r.exports;f.j=function(i){try{return JSON.stringify(i)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(Ir,Ir.exports)),Ir.exports}var Or={exports:{}},Dn,uo;function Ic(){return uo||(uo=1,Dn=(r,d=process.argv)=>{const h=r.startsWith("-")?"":r.length===1?"-":"--",u=d.indexOf(h+r),c=d.indexOf("--");return u!==-1&&(c===-1||u<c)}),Dn}var Nn,co;function Oc(){if(co)return Nn;co=1;const r=qr,d=bl,h=Ic(),{env:u}=process;let c;h("no-color")||h("no-colors")||h("color=false")||h("color=never")?c=0:(h("color")||h("colors")||h("color=true")||h("color=always"))&&(c=1),"FORCE_COLOR"in u&&(u.FORCE_COLOR==="true"?c=1:u.FORCE_COLOR==="false"?c=0:c=u.FORCE_COLOR.length===0?1:Math.min(parseInt(u.FORCE_COLOR,10),3));function l(i){return i===0?!1:{level:i,hasBasic:!0,has256:i>=2,has16m:i>=3}}function t(i,s){if(c===0)return 0;if(h("color=16m")||h("color=full")||h("color=truecolor"))return 3;if(h("color=256"))return 2;if(i&&!s&&c===void 0)return 0;const n=c||0;if(u.TERM==="dumb")return n;if(process.platform==="win32"){const o=r.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in u)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(o=>o in u)||u.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in u)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(u.TEAMCITY_VERSION)?1:0;if(u.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in u){const o=parseInt((u.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(u.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(u.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(u.TERM)||"COLORTERM"in u?1:n}function f(i){const s=t(i,i&&i.isTTY);return l(s)}return Nn={supportsColor:f,stdout:l(t(!0,d.isatty(1))),stderr:l(t(!0,d.isatty(2)))},Nn}var fo;function Dc(){return fo||(fo=1,(function(r,d){const h=bl,u=Ji;d.init=n,d.log=f,d.formatArgs=l,d.save=i,d.load=s,d.useColors=c,d.destroy=u.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),d.colors=[6,2,3,4,5,1];try{const a=Oc();a&&(a.stderr||a).level>=2&&(d.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}d.inspectOpts=Object.keys(process.env).filter(a=>/^debug_/i.test(a)).reduce((a,m)=>{const g=m.substring(6).toLowerCase().replace(/_([a-z])/g,(p,A)=>A.toUpperCase());let y=process.env[m];return/^(yes|on|true|enabled)$/i.test(y)?y=!0:/^(no|off|false|disabled)$/i.test(y)?y=!1:y==="null"?y=null:y=Number(y),a[g]=y,a},{});function c(){return"colors"in d.inspectOpts?!!d.inspectOpts.colors:h.isatty(process.stderr.fd)}function l(a){const{namespace:m,useColors:g}=this;if(g){const y=this.color,p="\x1B[3"+(y<8?y:"8;5;"+y),A=`  ${p};1m${m} \x1B[0m`;a[0]=A+a[0].split(`
`).join(`
`+A),a.push(p+"m+"+r.exports.humanize(this.diff)+"\x1B[0m")}else a[0]=t()+m+" "+a[0]}function t(){return d.inspectOpts.hideDate?"":new Date().toISOString()+" "}function f(...a){return process.stderr.write(u.formatWithOptions(d.inspectOpts,...a)+`
`)}function i(a){a?process.env.DEBUG=a:delete process.env.DEBUG}function s(){return process.env.DEBUG}function n(a){a.inspectOpts={};const m=Object.keys(d.inspectOpts);for(let g=0;g<m.length;g++)a.inspectOpts[m[g]]=d.inspectOpts[m[g]]}r.exports=Ol()(d);const{formatters:o}=r.exports;o.o=function(a){return this.inspectOpts.colors=this.useColors,u.inspect(a,this.inspectOpts).split(`
`).map(m=>m.trim()).join(" ")},o.O=function(a){return this.inspectOpts.colors=this.useColors,u.inspect(a,this.inspectOpts)}})(Or,Or.exports)),Or.exports}var ho;function Nc(){return ho||(ho=1,typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Pr.exports=Pc():Pr.exports=Dc()),Pr.exports}var jt={},po;function Dl(){if(po)return jt;po=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.ProgressCallbackTransform=void 0;const r=hr;let d=class extends r.Transform{constructor(u,c,l){super(),this.total=u,this.cancellationToken=c,this.onProgress=l,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(u,c,l){if(this.cancellationToken.cancelled){l(new Error("cancelled"),null);return}this.transferred+=u.length,this.delta+=u.length;const t=Date.now();t>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=t+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((t-this.start)/1e3))}),this.delta=0),l(null,u)}_flush(u){if(this.cancellationToken.cancelled){u(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,u(null)}};return jt.ProgressCallbackTransform=d,jt}var mo;function Fc(){if(mo)return Be;mo=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.DigestTransform=Be.HttpExecutor=Be.HttpError=void 0,Be.createHttpError=s,Be.parseJson=a,Be.configureRequestOptionsFromUrl=g,Be.configureRequestUrl=y,Be.safeGetHeader=C,Be.configureRequestOptions=P,Be.safeStringifyJson=$;const r=pr,d=Nc(),h=Ye,u=hr,c=Lt,l=ta(),t=Br(),f=Dl(),i=(0,d.default)("electron-builder");function s(R,_=null){return new o(R.statusCode||-1,`${R.statusCode} ${R.statusMessage}`+(_==null?"":`
`+JSON.stringify(_,null,"  "))+`
Headers: `+$(R.headers),_)}const n=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class o extends Error{constructor(_,T=`HTTP error: ${n.get(_)||_}`,E=null){super(T),this.statusCode=_,this.description=E,this.name="HttpError",this.code=`HTTP_ERROR_${_}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}Be.HttpError=o;function a(R){return R.then(_=>_==null||_.length===0?null:JSON.parse(_))}class m{constructor(){this.maxRedirects=10}request(_,T=new l.CancellationToken,E){P(_);const k=E==null?void 0:JSON.stringify(E),U=k?Buffer.from(k):void 0;if(U!=null){i(k);const{headers:x,...M}=_;_={method:"post",headers:{"Content-Type":"application/json","Content-Length":U.length,...x},...M}}return this.doApiRequest(_,T,x=>x.end(U))}doApiRequest(_,T,E,k=0){return i.enabled&&i(`Request: ${$(_)}`),T.createPromise((U,x,M)=>{const D=this.createRequest(_,O=>{try{this.handleResponse(O,_,T,U,x,k,E)}catch(F){x(F)}});this.addErrorAndTimeoutHandlers(D,x,_.timeout),this.addRedirectHandlers(D,_,x,k,O=>{this.doApiRequest(O,T,E,k).then(U).catch(x)}),E(D,x),M(()=>D.abort())})}addRedirectHandlers(_,T,E,k,U){}addErrorAndTimeoutHandlers(_,T,E=60*1e3){this.addTimeOutHandler(_,T,E),_.on("error",T),_.on("aborted",()=>{T(new Error("Request has been aborted by the server"))})}handleResponse(_,T,E,k,U,x,M){var D;if(i.enabled&&i(`Response: ${_.statusCode} ${_.statusMessage}, request options: ${$(T)}`),_.statusCode===404){U(s(_,`method: ${T.method||"GET"} url: ${T.protocol||"https:"}//${T.hostname}${T.port?`:${T.port}`:""}${T.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(_.statusCode===204){k();return}const O=(D=_.statusCode)!==null&&D!==void 0?D:0,F=O>=300&&O<400,q=C(_,"location");if(F&&q!=null){if(x>this.maxRedirects){U(this.createMaxRedirectError());return}this.doApiRequest(m.prepareRedirectUrlOptions(q,T),E,M,x).then(k).catch(U);return}_.setEncoding("utf8");let J="";_.on("error",U),_.on("data",W=>J+=W),_.on("end",()=>{try{if(_.statusCode!=null&&_.statusCode>=400){const W=C(_,"content-type"),ne=W!=null&&(Array.isArray(W)?W.find(ce=>ce.includes("json"))!=null:W.includes("json"));U(s(_,`method: ${T.method||"GET"} url: ${T.protocol||"https:"}//${T.hostname}${T.port?`:${T.port}`:""}${T.path}

          Data:
          ${ne?JSON.stringify(JSON.parse(J)):J}
          `))}else k(J.length===0?null:J)}catch(W){U(W)}})}async downloadToBuffer(_,T){return await T.cancellationToken.createPromise((E,k,U)=>{const x=[],M={headers:T.headers||void 0,redirect:"manual"};y(_,M),P(M),this.doDownload(M,{destination:null,options:T,onCancel:U,callback:D=>{D==null?E(Buffer.concat(x)):k(D)},responseHandler:(D,O)=>{let F=0;D.on("data",q=>{if(F+=q.length,F>524288e3){O(new Error("Maximum allowed size is 500 MB"));return}x.push(q)}),D.on("end",()=>{O(null)})}},0)})}doDownload(_,T,E){const k=this.createRequest(_,U=>{if(U.statusCode>=400){T.callback(new Error(`Cannot download "${_.protocol||"https:"}//${_.hostname}${_.path}", status ${U.statusCode}: ${U.statusMessage}`));return}U.on("error",T.callback);const x=C(U,"location");if(x!=null){E<this.maxRedirects?this.doDownload(m.prepareRedirectUrlOptions(x,_),T,E++):T.callback(this.createMaxRedirectError());return}T.responseHandler==null?I(T,U):T.responseHandler(U,T.callback)});this.addErrorAndTimeoutHandlers(k,T.callback,_.timeout),this.addRedirectHandlers(k,_,T.callback,E,U=>{this.doDownload(U,T,E++)}),k.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(_,T,E){_.on("socket",k=>{k.setTimeout(E,()=>{_.abort(),T(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(_,T){const E=g(_,{...T}),k=E.headers;if(k?.authorization){const U=new c.URL(_);(U.hostname.endsWith(".amazonaws.com")||U.searchParams.has("X-Amz-Credential"))&&delete k.authorization}return E}static retryOnServerError(_,T=3){for(let E=0;;E++)try{return _()}catch(k){if(E<T&&(k instanceof o&&k.isServerError()||k.code==="EPIPE"))continue;throw k}}}Be.HttpExecutor=m;function g(R,_){const T=P(_);return y(new c.URL(R),T),T}function y(R,_){_.protocol=R.protocol,_.hostname=R.hostname,R.port?_.port=R.port:_.port&&delete _.port,_.path=R.pathname+R.search}class p extends u.Transform{get actual(){return this._actual}constructor(_,T="sha512",E="base64"){super(),this.expected=_,this.algorithm=T,this.encoding=E,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,r.createHash)(T)}_transform(_,T,E){this.digester.update(_),E(null,_)}_flush(_){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(T){_(T);return}_(null)}validate(){if(this._actual==null)throw(0,t.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,t.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}Be.DigestTransform=p;function A(R,_,T){return R!=null&&_!=null&&R!==_?(T(new Error(`checksum mismatch: expected ${_} but got ${R} (X-Checksum-Sha2 header)`)),!1):!0}function C(R,_){const T=R.headers[_];return T==null?null:Array.isArray(T)?T.length===0?null:T[T.length-1]:T}function I(R,_){if(!A(C(_,"X-Checksum-Sha2"),R.options.sha2,R.callback))return;const T=[];if(R.options.onProgress!=null){const x=C(_,"content-length");x!=null&&T.push(new f.ProgressCallbackTransform(parseInt(x,10),R.options.cancellationToken,R.options.onProgress))}const E=R.options.sha512;E!=null?T.push(new p(E,"sha512",E.length===128&&!E.includes("+")&&!E.includes("Z")&&!E.includes("=")?"hex":"base64")):R.options.sha2!=null&&T.push(new p(R.options.sha2,"sha256","hex"));const k=(0,h.createWriteStream)(R.destination);T.push(k);let U=_;for(const x of T)x.on("error",M=>{k.close(),R.options.cancellationToken.cancelled||R.callback(M)}),U=U.pipe(x);k.on("finish",()=>{k.close(R.callback)})}function P(R,_,T){T!=null&&(R.method=T),R.headers={...R.headers};const E=R.headers;return _!=null&&(E.authorization=_.startsWith("Basic")||_.startsWith("Bearer")?_:`token ${_}`),E["User-Agent"]==null&&(E["User-Agent"]="electron-builder"),(T==null||T==="GET"||E["Cache-Control"]==null)&&(E["Cache-Control"]="no-cache"),R.protocol==null&&process.versions.electron!=null&&(R.protocol="https:"),R}function $(R,_){return JSON.stringify(R,(T,E)=>T.endsWith("Authorization")||T.endsWith("authorization")||T.endsWith("Password")||T.endsWith("PASSWORD")||T.endsWith("Token")||T.includes("password")||T.includes("token")||_!=null&&_.has(T)?"<stripped sensitive data>":E,2)}return Be}var Gt={},go;function xc(){if(go)return Gt;go=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.MemoLazy=void 0;let r=class{constructor(u,c){this.selector=u,this.creator=c,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const u=this.selector();if(this._value!==void 0&&d(this.selected,u))return this._value;this.selected=u;const c=this.creator(u);return this.value=c,c}set value(u){this._value=u}};Gt.MemoLazy=r;function d(h,u){if(typeof h=="object"&&h!==null&&(typeof u=="object"&&u!==null)){const t=Object.keys(h),f=Object.keys(u);return t.length===f.length&&t.every(i=>d(h[i],u[i]))}return h===u}return Gt}var Wt={},vo;function Lc(){if(vo)return Wt;vo=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.githubUrl=r,Wt.getS3LikeProviderBaseUrl=d;function r(l,t="github.com"){return`${l.protocol||"https"}://${l.host||t}`}function d(l){const t=l.provider;if(t==="s3")return h(l);if(t==="spaces")return c(l);throw new Error(`Not supported provider: ${t}`)}function h(l){let t;if(l.accelerate==!0)t=`https://${l.bucket}.s3-accelerate.amazonaws.com`;else if(l.endpoint!=null)t=`${l.endpoint}/${l.bucket}`;else if(l.bucket.includes(".")){if(l.region==null)throw new Error(`Bucket name "${l.bucket}" includes a dot, but S3 region is missing`);l.region==="us-east-1"?t=`https://s3.amazonaws.com/${l.bucket}`:t=`https://s3-${l.region}.amazonaws.com/${l.bucket}`}else l.region==="cn-north-1"?t=`https://${l.bucket}.s3.${l.region}.amazonaws.com.cn`:t=`https://${l.bucket}.s3.amazonaws.com`;return u(t,l.path)}function u(l,t){return t!=null&&t.length>0&&(t.startsWith("/")||(l+="/"),l+=t),l}function c(l){if(l.name==null)throw new Error("name is missing");if(l.region==null)throw new Error("region is missing");return u(`https://${l.name}.${l.region}.digitaloceanspaces.com`,l.path)}return Wt}var Dr={},Eo;function Uc(){if(Eo)return Dr;Eo=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.retry=d;const r=ta();async function d(h,u,c,l=0,t=0,f){var i;const s=new r.CancellationToken;try{return await h()}catch(n){if((!((i=f?.(n))!==null&&i!==void 0)||i)&&u>0&&!s.cancelled)return await new Promise(o=>setTimeout(o,c+l*t)),await d(h,u-1,c,l,t+1,f);throw n}}return Dr}var Nr={},yo;function $c(){if(yo)return Nr;yo=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.parseDn=r;function r(d){let h=!1,u=null,c="",l=0;d=d.trim();const t=new Map;for(let f=0;f<=d.length;f++){if(f===d.length){u!==null&&t.set(u,c);break}const i=d[f];if(h){if(i==='"'){h=!1;continue}}else{if(i==='"'){h=!0;continue}if(i==="\\"){f++;const s=parseInt(d.slice(f,f+2),16);Number.isNaN(s)?c+=d[f]:(f++,c+=String.fromCharCode(s));continue}if(u===null&&i==="="){u=c,c="";continue}if(i===","||i===";"||i==="+"){u!==null&&t.set(u,c),u=null,c="";continue}}if(i===" "&&!h){if(c.length===0)continue;if(f>l){let s=f;for(;d[s]===" ";)s++;l=s}if(l>=d.length||d[l]===","||d[l]===";"||u===null&&d[l]==="="||u!==null&&d[l]==="+"){f=l-1;continue}}c+=i}return t}return Nr}var Tt={},wo;function kc(){if(wo)return Tt;wo=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.nil=Tt.UUID=void 0;const r=pr,d=Br(),h="options.name must be either a string or a Buffer",u=(0,r.randomBytes)(16);u[0]=u[0]|1;const c={},l=[];for(let o=0;o<256;o++){const a=(o+256).toString(16).substr(1);c[a]=o,l[o]=a}class t{constructor(a){this.ascii=null,this.binary=null;const m=t.check(a);if(!m)throw new Error("not a UUID");this.version=m.version,m.format==="ascii"?this.ascii=a:this.binary=a}static v5(a,m){return s(a,"sha1",80,m)}toString(){return this.ascii==null&&(this.ascii=n(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(a,m=0){if(typeof a=="string")return a=a.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(a)?a==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(c[a[14]+a[15]]&240)>>4,variant:f((c[a[19]+a[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(a)){if(a.length<m+16)return!1;let g=0;for(;g<16&&a[m+g]===0;g++);return g===16?{version:void 0,variant:"nil",format:"binary"}:{version:(a[m+6]&240)>>4,variant:f((a[m+8]&224)>>5),format:"binary"}}throw(0,d.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(a){const m=Buffer.allocUnsafe(16);let g=0;for(let y=0;y<16;y++)m[y]=c[a[g++]+a[g++]],(y===3||y===5||y===7||y===9)&&(g+=1);return m}}Tt.UUID=t,t.OID=t.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function f(o){switch(o){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var i;(function(o){o[o.ASCII=0]="ASCII",o[o.BINARY=1]="BINARY",o[o.OBJECT=2]="OBJECT"})(i||(i={}));function s(o,a,m,g,y=i.ASCII){const p=(0,r.createHash)(a);if(typeof o!="string"&&!Buffer.isBuffer(o))throw(0,d.newError)(h,"ERR_INVALID_UUID_NAME");p.update(g),p.update(o);const C=p.digest();let I;switch(y){case i.BINARY:C[6]=C[6]&15|m,C[8]=C[8]&63|128,I=C;break;case i.OBJECT:C[6]=C[6]&15|m,C[8]=C[8]&63|128,I=new t(C);break;default:I=l[C[0]]+l[C[1]]+l[C[2]]+l[C[3]]+"-"+l[C[4]]+l[C[5]]+"-"+l[C[6]&15|m]+l[C[7]]+"-"+l[C[8]&63|128]+l[C[9]]+"-"+l[C[10]]+l[C[11]]+l[C[12]]+l[C[13]]+l[C[14]]+l[C[15]];break}return I}function n(o){return l[o[0]]+l[o[1]]+l[o[2]]+l[o[3]]+"-"+l[o[4]]+l[o[5]]+"-"+l[o[6]]+l[o[7]]+"-"+l[o[8]]+l[o[9]]+"-"+l[o[10]]+l[o[11]]+l[o[12]]+l[o[13]]+l[o[14]]+l[o[15]]}return Tt.nil=new t("00000000-0000-0000-0000-000000000000"),Tt}var Dt={},Fn={},_o;function qc(){return _o||(_o=1,(function(r){(function(d){d.parser=function(S,v){return new u(S,v)},d.SAXParser=u,d.SAXStream=n,d.createStream=s,d.MAX_BUFFER_LENGTH=64*1024;var h=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];d.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function u(S,v){if(!(this instanceof u))return new u(S,v);var H=this;l(H),H.q=H.c="",H.bufferCheckPosition=d.MAX_BUFFER_LENGTH,H.opt=v||{},H.opt.lowercase=H.opt.lowercase||H.opt.lowercasetags,H.looseCase=H.opt.lowercase?"toLowerCase":"toUpperCase",H.tags=[],H.closed=H.closedRoot=H.sawRoot=!1,H.tag=H.error=null,H.strict=!!S,H.noscript=!!(S||H.opt.noscript),H.state=E.BEGIN,H.strictEntities=H.opt.strictEntities,H.ENTITIES=H.strictEntities?Object.create(d.XML_ENTITIES):Object.create(d.ENTITIES),H.attribList=[],H.opt.xmlns&&(H.ns=Object.create(y)),H.opt.unquotedAttributeValues===void 0&&(H.opt.unquotedAttributeValues=!S),H.trackPosition=H.opt.position!==!1,H.trackPosition&&(H.position=H.line=H.column=0),U(H,"onready")}Object.create||(Object.create=function(S){function v(){}v.prototype=S;var H=new v;return H}),Object.keys||(Object.keys=function(S){var v=[];for(var H in S)S.hasOwnProperty(H)&&v.push(H);return v});function c(S){for(var v=Math.max(d.MAX_BUFFER_LENGTH,10),H=0,N=0,le=h.length;N<le;N++){var me=S[h[N]].length;if(me>v)switch(h[N]){case"textNode":M(S);break;case"cdata":x(S,"oncdata",S.cdata),S.cdata="";break;case"script":x(S,"onscript",S.script),S.script="";break;default:O(S,"Max buffer length exceeded: "+h[N])}H=Math.max(H,me)}var pe=d.MAX_BUFFER_LENGTH-H;S.bufferCheckPosition=pe+S.position}function l(S){for(var v=0,H=h.length;v<H;v++)S[h[v]]=""}function t(S){M(S),S.cdata!==""&&(x(S,"oncdata",S.cdata),S.cdata=""),S.script!==""&&(x(S,"onscript",S.script),S.script="")}u.prototype={end:function(){F(this)},write:Ee,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){t(this)}};var f;try{f=require("stream").Stream}catch{f=function(){}}f||(f=function(){});var i=d.EVENTS.filter(function(S){return S!=="error"&&S!=="end"});function s(S,v){return new n(S,v)}function n(S,v){if(!(this instanceof n))return new n(S,v);f.apply(this),this._parser=new u(S,v),this.writable=!0,this.readable=!0;var H=this;this._parser.onend=function(){H.emit("end")},this._parser.onerror=function(N){H.emit("error",N),H._parser.error=null},this._decoder=null,i.forEach(function(N){Object.defineProperty(H,"on"+N,{get:function(){return H._parser["on"+N]},set:function(le){if(!le)return H.removeAllListeners(N),H._parser["on"+N]=le,le;H.on(N,le)},enumerable:!0,configurable:!1})})}n.prototype=Object.create(f.prototype,{constructor:{value:n}}),n.prototype.write=function(S){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(S)){if(!this._decoder){var v=rc.StringDecoder;this._decoder=new v("utf8")}S=this._decoder.write(S)}return this._parser.write(S.toString()),this.emit("data",S),!0},n.prototype.end=function(S){return S&&S.length&&this.write(S),this._parser.end(),!0},n.prototype.on=function(S,v){var H=this;return!H._parser["on"+S]&&i.indexOf(S)!==-1&&(H._parser["on"+S]=function(){var N=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);N.splice(0,0,S),H.emit.apply(H,N)}),f.prototype.on.call(H,S,v)};var o="[CDATA[",a="DOCTYPE",m="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",y={xml:m,xmlns:g},p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,I=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function P(S){return S===" "||S===`
`||S==="\r"||S==="	"}function $(S){return S==='"'||S==="'"}function R(S){return S===">"||P(S)}function _(S,v){return S.test(v)}function T(S,v){return!_(S,v)}var E=0;d.STATE={BEGIN:E++,BEGIN_WHITESPACE:E++,TEXT:E++,TEXT_ENTITY:E++,OPEN_WAKA:E++,SGML_DECL:E++,SGML_DECL_QUOTED:E++,DOCTYPE:E++,DOCTYPE_QUOTED:E++,DOCTYPE_DTD:E++,DOCTYPE_DTD_QUOTED:E++,COMMENT_STARTING:E++,COMMENT:E++,COMMENT_ENDING:E++,COMMENT_ENDED:E++,CDATA:E++,CDATA_ENDING:E++,CDATA_ENDING_2:E++,PROC_INST:E++,PROC_INST_BODY:E++,PROC_INST_ENDING:E++,OPEN_TAG:E++,OPEN_TAG_SLASH:E++,ATTRIB:E++,ATTRIB_NAME:E++,ATTRIB_NAME_SAW_WHITE:E++,ATTRIB_VALUE:E++,ATTRIB_VALUE_QUOTED:E++,ATTRIB_VALUE_CLOSED:E++,ATTRIB_VALUE_UNQUOTED:E++,ATTRIB_VALUE_ENTITY_Q:E++,ATTRIB_VALUE_ENTITY_U:E++,CLOSE_TAG:E++,CLOSE_TAG_SAW_WHITE:E++,SCRIPT:E++,SCRIPT_ENDING:E++},d.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},d.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(d.ENTITIES).forEach(function(S){var v=d.ENTITIES[S],H=typeof v=="number"?String.fromCharCode(v):v;d.ENTITIES[S]=H});for(var k in d.STATE)d.STATE[d.STATE[k]]=k;E=d.STATE;function U(S,v,H){S[v]&&S[v](H)}function x(S,v,H){S.textNode&&M(S),U(S,v,H)}function M(S){S.textNode=D(S.opt,S.textNode),S.textNode&&U(S,"ontext",S.textNode),S.textNode=""}function D(S,v){return S.trim&&(v=v.trim()),S.normalize&&(v=v.replace(/\s+/g," ")),v}function O(S,v){return M(S),S.trackPosition&&(v+=`
Line: `+S.line+`
Column: `+S.column+`
Char: `+S.c),v=new Error(v),S.error=v,U(S,"onerror",v),S}function F(S){return S.sawRoot&&!S.closedRoot&&q(S,"Unclosed root tag"),S.state!==E.BEGIN&&S.state!==E.BEGIN_WHITESPACE&&S.state!==E.TEXT&&O(S,"Unexpected end"),M(S),S.c="",S.closed=!0,U(S,"onend"),u.call(S,S.strict,S.opt),S}function q(S,v){if(typeof S!="object"||!(S instanceof u))throw new Error("bad call to strictFail");S.strict&&O(S,v)}function J(S){S.strict||(S.tagName=S.tagName[S.looseCase]());var v=S.tags[S.tags.length-1]||S,H=S.tag={name:S.tagName,attributes:{}};S.opt.xmlns&&(H.ns=v.ns),S.attribList.length=0,x(S,"onopentagstart",H)}function W(S,v){var H=S.indexOf(":"),N=H<0?["",S]:S.split(":"),le=N[0],me=N[1];return v&&S==="xmlns"&&(le="xmlns",me=""),{prefix:le,local:me}}function ne(S){if(S.strict||(S.attribName=S.attribName[S.looseCase]()),S.attribList.indexOf(S.attribName)!==-1||S.tag.attributes.hasOwnProperty(S.attribName)){S.attribName=S.attribValue="";return}if(S.opt.xmlns){var v=W(S.attribName,!0),H=v.prefix,N=v.local;if(H==="xmlns")if(N==="xml"&&S.attribValue!==m)q(S,"xml: prefix must be bound to "+m+`
Actual: `+S.attribValue);else if(N==="xmlns"&&S.attribValue!==g)q(S,"xmlns: prefix must be bound to "+g+`
Actual: `+S.attribValue);else{var le=S.tag,me=S.tags[S.tags.length-1]||S;le.ns===me.ns&&(le.ns=Object.create(me.ns)),le.ns[N]=S.attribValue}S.attribList.push([S.attribName,S.attribValue])}else S.tag.attributes[S.attribName]=S.attribValue,x(S,"onattribute",{name:S.attribName,value:S.attribValue});S.attribName=S.attribValue=""}function ce(S,v){if(S.opt.xmlns){var H=S.tag,N=W(S.tagName);H.prefix=N.prefix,H.local=N.local,H.uri=H.ns[N.prefix]||"",H.prefix&&!H.uri&&(q(S,"Unbound namespace prefix: "+JSON.stringify(S.tagName)),H.uri=N.prefix);var le=S.tags[S.tags.length-1]||S;H.ns&&le.ns!==H.ns&&Object.keys(H.ns).forEach(function(B){x(S,"onopennamespace",{prefix:B,uri:H.ns[B]})});for(var me=0,pe=S.attribList.length;me<pe;me++){var _e=S.attribList[me],ye=_e[0],xe=_e[1],be=W(ye,!0),qe=be.prefix,mt=be.local,at=qe===""?"":H.ns[qe]||"",e={name:ye,value:xe,prefix:qe,local:mt,uri:at};qe&&qe!=="xmlns"&&!at&&(q(S,"Unbound namespace prefix: "+JSON.stringify(qe)),e.uri=qe),S.tag.attributes[ye]=e,x(S,"onattribute",e)}S.attribList.length=0}S.tag.isSelfClosing=!!v,S.sawRoot=!0,S.tags.push(S.tag),x(S,"onopentag",S.tag),v||(!S.noscript&&S.tagName.toLowerCase()==="script"?S.state=E.SCRIPT:S.state=E.TEXT,S.tag=null,S.tagName=""),S.attribName=S.attribValue="",S.attribList.length=0}function ue(S){if(!S.tagName){q(S,"Weird empty close tag."),S.textNode+="</>",S.state=E.TEXT;return}if(S.script){if(S.tagName!=="script"){S.script+="</"+S.tagName+">",S.tagName="",S.state=E.SCRIPT;return}x(S,"onscript",S.script),S.script=""}var v=S.tags.length,H=S.tagName;S.strict||(H=H[S.looseCase]());for(var N=H;v--;){var le=S.tags[v];if(le.name!==N)q(S,"Unexpected close tag");else break}if(v<0){q(S,"Unmatched closing tag: "+S.tagName),S.textNode+="</"+S.tagName+">",S.state=E.TEXT;return}S.tagName=H;for(var me=S.tags.length;me-- >v;){var pe=S.tag=S.tags.pop();S.tagName=S.tag.name,x(S,"onclosetag",S.tagName);var _e={};for(var ye in pe.ns)_e[ye]=pe.ns[ye];var xe=S.tags[S.tags.length-1]||S;S.opt.xmlns&&pe.ns!==xe.ns&&Object.keys(pe.ns).forEach(function(be){var qe=pe.ns[be];x(S,"onclosenamespace",{prefix:be,uri:qe})})}v===0&&(S.closedRoot=!0),S.tagName=S.attribValue=S.attribName="",S.attribList.length=0,S.state=E.TEXT}function ie(S){var v=S.entity,H=v.toLowerCase(),N,le="";return S.ENTITIES[v]?S.ENTITIES[v]:S.ENTITIES[H]?S.ENTITIES[H]:(v=H,v.charAt(0)==="#"&&(v.charAt(1)==="x"?(v=v.slice(2),N=parseInt(v,16),le=N.toString(16)):(v=v.slice(1),N=parseInt(v,10),le=N.toString(10))),v=v.replace(/^0+/,""),isNaN(N)||le.toLowerCase()!==v?(q(S,"Invalid character entity"),"&"+S.entity+";"):String.fromCodePoint(N))}function Ae(S,v){v==="<"?(S.state=E.OPEN_WAKA,S.startTagPosition=S.position):P(v)||(q(S,"Non-whitespace before first tag."),S.textNode=v,S.state=E.TEXT)}function K(S,v){var H="";return v<S.length&&(H=S.charAt(v)),H}function Ee(S){var v=this;if(this.error)throw this.error;if(v.closed)return O(v,"Cannot write after close. Assign an onready handler.");if(S===null)return F(v);typeof S=="object"&&(S=S.toString());for(var H=0,N="";N=K(S,H++),v.c=N,!!N;)switch(v.trackPosition&&(v.position++,N===`
`?(v.line++,v.column=0):v.column++),v.state){case E.BEGIN:if(v.state=E.BEGIN_WHITESPACE,N==="\uFEFF")continue;Ae(v,N);continue;case E.BEGIN_WHITESPACE:Ae(v,N);continue;case E.TEXT:if(v.sawRoot&&!v.closedRoot){for(var le=H-1;N&&N!=="<"&&N!=="&";)N=K(S,H++),N&&v.trackPosition&&(v.position++,N===`
`?(v.line++,v.column=0):v.column++);v.textNode+=S.substring(le,H-1)}N==="<"&&!(v.sawRoot&&v.closedRoot&&!v.strict)?(v.state=E.OPEN_WAKA,v.startTagPosition=v.position):(!P(N)&&(!v.sawRoot||v.closedRoot)&&q(v,"Text data outside of root node."),N==="&"?v.state=E.TEXT_ENTITY:v.textNode+=N);continue;case E.SCRIPT:N==="<"?v.state=E.SCRIPT_ENDING:v.script+=N;continue;case E.SCRIPT_ENDING:N==="/"?v.state=E.CLOSE_TAG:(v.script+="<"+N,v.state=E.SCRIPT);continue;case E.OPEN_WAKA:if(N==="!")v.state=E.SGML_DECL,v.sgmlDecl="";else if(!P(N))if(_(p,N))v.state=E.OPEN_TAG,v.tagName=N;else if(N==="/")v.state=E.CLOSE_TAG,v.tagName="";else if(N==="?")v.state=E.PROC_INST,v.procInstName=v.procInstBody="";else{if(q(v,"Unencoded <"),v.startTagPosition+1<v.position){var me=v.position-v.startTagPosition;N=new Array(me).join(" ")+N}v.textNode+="<"+N,v.state=E.TEXT}continue;case E.SGML_DECL:if(v.sgmlDecl+N==="--"){v.state=E.COMMENT,v.comment="",v.sgmlDecl="";continue}v.doctype&&v.doctype!==!0&&v.sgmlDecl?(v.state=E.DOCTYPE_DTD,v.doctype+="<!"+v.sgmlDecl+N,v.sgmlDecl=""):(v.sgmlDecl+N).toUpperCase()===o?(x(v,"onopencdata"),v.state=E.CDATA,v.sgmlDecl="",v.cdata=""):(v.sgmlDecl+N).toUpperCase()===a?(v.state=E.DOCTYPE,(v.doctype||v.sawRoot)&&q(v,"Inappropriately located doctype declaration"),v.doctype="",v.sgmlDecl=""):N===">"?(x(v,"onsgmldeclaration",v.sgmlDecl),v.sgmlDecl="",v.state=E.TEXT):($(N)&&(v.state=E.SGML_DECL_QUOTED),v.sgmlDecl+=N);continue;case E.SGML_DECL_QUOTED:N===v.q&&(v.state=E.SGML_DECL,v.q=""),v.sgmlDecl+=N;continue;case E.DOCTYPE:N===">"?(v.state=E.TEXT,x(v,"ondoctype",v.doctype),v.doctype=!0):(v.doctype+=N,N==="["?v.state=E.DOCTYPE_DTD:$(N)&&(v.state=E.DOCTYPE_QUOTED,v.q=N));continue;case E.DOCTYPE_QUOTED:v.doctype+=N,N===v.q&&(v.q="",v.state=E.DOCTYPE);continue;case E.DOCTYPE_DTD:N==="]"?(v.doctype+=N,v.state=E.DOCTYPE):N==="<"?(v.state=E.OPEN_WAKA,v.startTagPosition=v.position):$(N)?(v.doctype+=N,v.state=E.DOCTYPE_DTD_QUOTED,v.q=N):v.doctype+=N;continue;case E.DOCTYPE_DTD_QUOTED:v.doctype+=N,N===v.q&&(v.state=E.DOCTYPE_DTD,v.q="");continue;case E.COMMENT:N==="-"?v.state=E.COMMENT_ENDING:v.comment+=N;continue;case E.COMMENT_ENDING:N==="-"?(v.state=E.COMMENT_ENDED,v.comment=D(v.opt,v.comment),v.comment&&x(v,"oncomment",v.comment),v.comment=""):(v.comment+="-"+N,v.state=E.COMMENT);continue;case E.COMMENT_ENDED:N!==">"?(q(v,"Malformed comment"),v.comment+="--"+N,v.state=E.COMMENT):v.doctype&&v.doctype!==!0?v.state=E.DOCTYPE_DTD:v.state=E.TEXT;continue;case E.CDATA:N==="]"?v.state=E.CDATA_ENDING:v.cdata+=N;continue;case E.CDATA_ENDING:N==="]"?v.state=E.CDATA_ENDING_2:(v.cdata+="]"+N,v.state=E.CDATA);continue;case E.CDATA_ENDING_2:N===">"?(v.cdata&&x(v,"oncdata",v.cdata),x(v,"onclosecdata"),v.cdata="",v.state=E.TEXT):N==="]"?v.cdata+="]":(v.cdata+="]]"+N,v.state=E.CDATA);continue;case E.PROC_INST:N==="?"?v.state=E.PROC_INST_ENDING:P(N)?v.state=E.PROC_INST_BODY:v.procInstName+=N;continue;case E.PROC_INST_BODY:if(!v.procInstBody&&P(N))continue;N==="?"?v.state=E.PROC_INST_ENDING:v.procInstBody+=N;continue;case E.PROC_INST_ENDING:N===">"?(x(v,"onprocessinginstruction",{name:v.procInstName,body:v.procInstBody}),v.procInstName=v.procInstBody="",v.state=E.TEXT):(v.procInstBody+="?"+N,v.state=E.PROC_INST_BODY);continue;case E.OPEN_TAG:_(A,N)?v.tagName+=N:(J(v),N===">"?ce(v):N==="/"?v.state=E.OPEN_TAG_SLASH:(P(N)||q(v,"Invalid character in tag name"),v.state=E.ATTRIB));continue;case E.OPEN_TAG_SLASH:N===">"?(ce(v,!0),ue(v)):(q(v,"Forward-slash in opening tag not followed by >"),v.state=E.ATTRIB);continue;case E.ATTRIB:if(P(N))continue;N===">"?ce(v):N==="/"?v.state=E.OPEN_TAG_SLASH:_(p,N)?(v.attribName=N,v.attribValue="",v.state=E.ATTRIB_NAME):q(v,"Invalid attribute name");continue;case E.ATTRIB_NAME:N==="="?v.state=E.ATTRIB_VALUE:N===">"?(q(v,"Attribute without value"),v.attribValue=v.attribName,ne(v),ce(v)):P(N)?v.state=E.ATTRIB_NAME_SAW_WHITE:_(A,N)?v.attribName+=N:q(v,"Invalid attribute name");continue;case E.ATTRIB_NAME_SAW_WHITE:if(N==="=")v.state=E.ATTRIB_VALUE;else{if(P(N))continue;q(v,"Attribute without value"),v.tag.attributes[v.attribName]="",v.attribValue="",x(v,"onattribute",{name:v.attribName,value:""}),v.attribName="",N===">"?ce(v):_(p,N)?(v.attribName=N,v.state=E.ATTRIB_NAME):(q(v,"Invalid attribute name"),v.state=E.ATTRIB)}continue;case E.ATTRIB_VALUE:if(P(N))continue;$(N)?(v.q=N,v.state=E.ATTRIB_VALUE_QUOTED):(v.opt.unquotedAttributeValues||O(v,"Unquoted attribute value"),v.state=E.ATTRIB_VALUE_UNQUOTED,v.attribValue=N);continue;case E.ATTRIB_VALUE_QUOTED:if(N!==v.q){N==="&"?v.state=E.ATTRIB_VALUE_ENTITY_Q:v.attribValue+=N;continue}ne(v),v.q="",v.state=E.ATTRIB_VALUE_CLOSED;continue;case E.ATTRIB_VALUE_CLOSED:P(N)?v.state=E.ATTRIB:N===">"?ce(v):N==="/"?v.state=E.OPEN_TAG_SLASH:_(p,N)?(q(v,"No whitespace between attributes"),v.attribName=N,v.attribValue="",v.state=E.ATTRIB_NAME):q(v,"Invalid attribute name");continue;case E.ATTRIB_VALUE_UNQUOTED:if(!R(N)){N==="&"?v.state=E.ATTRIB_VALUE_ENTITY_U:v.attribValue+=N;continue}ne(v),N===">"?ce(v):v.state=E.ATTRIB;continue;case E.CLOSE_TAG:if(v.tagName)N===">"?ue(v):_(A,N)?v.tagName+=N:v.script?(v.script+="</"+v.tagName,v.tagName="",v.state=E.SCRIPT):(P(N)||q(v,"Invalid tagname in closing tag"),v.state=E.CLOSE_TAG_SAW_WHITE);else{if(P(N))continue;T(p,N)?v.script?(v.script+="</"+N,v.state=E.SCRIPT):q(v,"Invalid tagname in closing tag."):v.tagName=N}continue;case E.CLOSE_TAG_SAW_WHITE:if(P(N))continue;N===">"?ue(v):q(v,"Invalid characters in closing tag");continue;case E.TEXT_ENTITY:case E.ATTRIB_VALUE_ENTITY_Q:case E.ATTRIB_VALUE_ENTITY_U:var pe,_e;switch(v.state){case E.TEXT_ENTITY:pe=E.TEXT,_e="textNode";break;case E.ATTRIB_VALUE_ENTITY_Q:pe=E.ATTRIB_VALUE_QUOTED,_e="attribValue";break;case E.ATTRIB_VALUE_ENTITY_U:pe=E.ATTRIB_VALUE_UNQUOTED,_e="attribValue";break}if(N===";"){var ye=ie(v);v.opt.unparsedEntities&&!Object.values(d.XML_ENTITIES).includes(ye)?(v.entity="",v.state=pe,v.write(ye)):(v[_e]+=ye,v.entity="",v.state=pe)}else _(v.entity.length?I:C,N)?v.entity+=N:(q(v,"Invalid character in entity name"),v[_e]+="&"+v.entity+N,v.entity="",v.state=pe);continue;default:throw new Error(v,"Unknown state: "+v.state)}return v.position>=v.bufferCheckPosition&&c(v),v}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||(function(){var S=String.fromCharCode,v=Math.floor,H=function(){var N=16384,le=[],me,pe,_e=-1,ye=arguments.length;if(!ye)return"";for(var xe="";++_e<ye;){var be=Number(arguments[_e]);if(!isFinite(be)||be<0||be>1114111||v(be)!==be)throw RangeError("Invalid code point: "+be);be<=65535?le.push(be):(be-=65536,me=(be>>10)+55296,pe=be%1024+56320,le.push(me,pe)),(_e+1===ye||le.length>N)&&(xe+=S.apply(null,le),le.length=0)}return xe};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:H,configurable:!0,writable:!0}):String.fromCodePoint=H})()})(r)})(Fn)),Fn}var So;function Mc(){if(So)return Dt;So=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.XElement=void 0,Dt.parseXml=t;const r=qc(),d=Br();class h{constructor(i){if(this.name=i,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!i)throw(0,d.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!c(i))throw(0,d.newError)(`Invalid element name: ${i}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(i){const s=this.attributes===null?null:this.attributes[i];if(s==null)throw(0,d.newError)(`No attribute "${i}"`,"ERR_XML_MISSED_ATTRIBUTE");return s}removeAttribute(i){this.attributes!==null&&delete this.attributes[i]}element(i,s=!1,n=null){const o=this.elementOrNull(i,s);if(o===null)throw(0,d.newError)(n||`No element "${i}"`,"ERR_XML_MISSED_ELEMENT");return o}elementOrNull(i,s=!1){if(this.elements===null)return null;for(const n of this.elements)if(l(n,i,s))return n;return null}getElements(i,s=!1){return this.elements===null?[]:this.elements.filter(n=>l(n,i,s))}elementValueOrEmpty(i,s=!1){const n=this.elementOrNull(i,s);return n===null?"":n.value}}Dt.XElement=h;const u=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function c(f){return u.test(f)}function l(f,i,s){const n=f.name;return n===i||s===!0&&n.length===i.length&&n.toLowerCase()===i.toLowerCase()}function t(f){let i=null;const s=r.parser(!0,{}),n=[];return s.onopentag=o=>{const a=new h(o.name);if(a.attributes=o.attributes,i===null)i=a;else{const m=n[n.length-1];m.elements==null&&(m.elements=[]),m.elements.push(a)}n.push(a)},s.onclosetag=()=>{n.pop()},s.ontext=o=>{n.length>0&&(n[n.length-1].value=o)},s.oncdata=o=>{const a=n[n.length-1];a.value=o,a.isCData=!0},s.onerror=o=>{throw o},s.write(f),i}return Dt}var Ao;function ke(){return Ao||(Ao=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CURRENT_APP_PACKAGE_FILE_NAME=r.CURRENT_APP_INSTALLER_FILE_NAME=r.XElement=r.parseXml=r.UUID=r.parseDn=r.retry=r.githubUrl=r.getS3LikeProviderBaseUrl=r.ProgressCallbackTransform=r.MemoLazy=r.safeStringifyJson=r.safeGetHeader=r.parseJson=r.HttpExecutor=r.HttpError=r.DigestTransform=r.createHttpError=r.configureRequestUrl=r.configureRequestOptionsFromUrl=r.configureRequestOptions=r.newError=r.CancellationToken=r.CancellationError=void 0,r.asArray=o;var d=ta();Object.defineProperty(r,"CancellationError",{enumerable:!0,get:function(){return d.CancellationError}}),Object.defineProperty(r,"CancellationToken",{enumerable:!0,get:function(){return d.CancellationToken}});var h=Br();Object.defineProperty(r,"newError",{enumerable:!0,get:function(){return h.newError}});var u=Fc();Object.defineProperty(r,"configureRequestOptions",{enumerable:!0,get:function(){return u.configureRequestOptions}}),Object.defineProperty(r,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return u.configureRequestOptionsFromUrl}}),Object.defineProperty(r,"configureRequestUrl",{enumerable:!0,get:function(){return u.configureRequestUrl}}),Object.defineProperty(r,"createHttpError",{enumerable:!0,get:function(){return u.createHttpError}}),Object.defineProperty(r,"DigestTransform",{enumerable:!0,get:function(){return u.DigestTransform}}),Object.defineProperty(r,"HttpError",{enumerable:!0,get:function(){return u.HttpError}}),Object.defineProperty(r,"HttpExecutor",{enumerable:!0,get:function(){return u.HttpExecutor}}),Object.defineProperty(r,"parseJson",{enumerable:!0,get:function(){return u.parseJson}}),Object.defineProperty(r,"safeGetHeader",{enumerable:!0,get:function(){return u.safeGetHeader}}),Object.defineProperty(r,"safeStringifyJson",{enumerable:!0,get:function(){return u.safeStringifyJson}});var c=xc();Object.defineProperty(r,"MemoLazy",{enumerable:!0,get:function(){return c.MemoLazy}});var l=Dl();Object.defineProperty(r,"ProgressCallbackTransform",{enumerable:!0,get:function(){return l.ProgressCallbackTransform}});var t=Lc();Object.defineProperty(r,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return t.getS3LikeProviderBaseUrl}}),Object.defineProperty(r,"githubUrl",{enumerable:!0,get:function(){return t.githubUrl}});var f=Uc();Object.defineProperty(r,"retry",{enumerable:!0,get:function(){return f.retry}});var i=$c();Object.defineProperty(r,"parseDn",{enumerable:!0,get:function(){return i.parseDn}});var s=kc();Object.defineProperty(r,"UUID",{enumerable:!0,get:function(){return s.UUID}});var n=Mc();Object.defineProperty(r,"parseXml",{enumerable:!0,get:function(){return n.parseXml}}),Object.defineProperty(r,"XElement",{enumerable:!0,get:function(){return n.XElement}}),r.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",r.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function o(a){return a==null?[]:Array.isArray(a)?a:[a]}})(Pn)),Pn}var He={},Fr={},dt={},To;function mr(){if(To)return dt;To=1;function r(t){return typeof t>"u"||t===null}function d(t){return typeof t=="object"&&t!==null}function h(t){return Array.isArray(t)?t:r(t)?[]:[t]}function u(t,f){var i,s,n,o;if(f)for(o=Object.keys(f),i=0,s=o.length;i<s;i+=1)n=o[i],t[n]=f[n];return t}function c(t,f){var i="",s;for(s=0;s<f;s+=1)i+=t;return i}function l(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}return dt.isNothing=r,dt.isObject=d,dt.toArray=h,dt.repeat=c,dt.isNegativeZero=l,dt.extend=u,dt}var xn,Ro;function gr(){if(Ro)return xn;Ro=1;function r(h,u){var c="",l=h.reason||"(unknown reason)";return h.mark?(h.mark.name&&(c+='in "'+h.mark.name+'" '),c+="("+(h.mark.line+1)+":"+(h.mark.column+1)+")",!u&&h.mark.snippet&&(c+=`

`+h.mark.snippet),l+" "+c):l}function d(h,u){Error.call(this),this.name="YAMLException",this.reason=h,this.mark=u,this.message=r(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}return d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.toString=function(u){return this.name+": "+r(this,u)},xn=d,xn}var Ln,Co;function Bc(){if(Co)return Ln;Co=1;var r=mr();function d(c,l,t,f,i){var s="",n="",o=Math.floor(i/2)-1;return f-l>o&&(s=" ... ",l=f-o+s.length),t-f>o&&(n=" ...",t=f+o-n.length),{str:s+c.slice(l,t).replace(/\t/g,"→")+n,pos:f-l+s.length}}function h(c,l){return r.repeat(" ",l-c.length)+c}function u(c,l){if(l=Object.create(l||null),!c.buffer)return null;l.maxLength||(l.maxLength=79),typeof l.indent!="number"&&(l.indent=1),typeof l.linesBefore!="number"&&(l.linesBefore=3),typeof l.linesAfter!="number"&&(l.linesAfter=2);for(var t=/\r?\n|\r|\0/g,f=[0],i=[],s,n=-1;s=t.exec(c.buffer);)i.push(s.index),f.push(s.index+s[0].length),c.position<=s.index&&n<0&&(n=f.length-2);n<0&&(n=f.length-1);var o="",a,m,g=Math.min(c.line+l.linesAfter,i.length).toString().length,y=l.maxLength-(l.indent+g+3);for(a=1;a<=l.linesBefore&&!(n-a<0);a++)m=d(c.buffer,f[n-a],i[n-a],c.position-(f[n]-f[n-a]),y),o=r.repeat(" ",l.indent)+h((c.line-a+1).toString(),g)+" | "+m.str+`
`+o;for(m=d(c.buffer,f[n],i[n],c.position,y),o+=r.repeat(" ",l.indent)+h((c.line+1).toString(),g)+" | "+m.str+`
`,o+=r.repeat("-",l.indent+g+3+m.pos)+`^
`,a=1;a<=l.linesAfter&&!(n+a>=i.length);a++)m=d(c.buffer,f[n+a],i[n+a],c.position-(f[n]-f[n+a]),y),o+=r.repeat(" ",l.indent)+h((c.line+a+1).toString(),g)+" | "+m.str+`
`;return o.replace(/\n$/,"")}return Ln=u,Ln}var Un,bo;function je(){if(bo)return Un;bo=1;var r=gr(),d=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],h=["scalar","sequence","mapping"];function u(l){var t={};return l!==null&&Object.keys(l).forEach(function(f){l[f].forEach(function(i){t[String(i)]=f})}),t}function c(l,t){if(t=t||{},Object.keys(t).forEach(function(f){if(d.indexOf(f)===-1)throw new r('Unknown option "'+f+'" is met in definition of "'+l+'" YAML type.')}),this.options=t,this.tag=l,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(f){return f},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=u(t.styleAliases||null),h.indexOf(this.kind)===-1)throw new r('Unknown kind "'+this.kind+'" is specified for "'+l+'" YAML type.')}return Un=c,Un}var $n,Po;function Nl(){if(Po)return $n;Po=1;var r=gr(),d=je();function h(l,t){var f=[];return l[t].forEach(function(i){var s=f.length;f.forEach(function(n,o){n.tag===i.tag&&n.kind===i.kind&&n.multi===i.multi&&(s=o)}),f[s]=i}),f}function u(){var l={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,f;function i(s){s.multi?(l.multi[s.kind].push(s),l.multi.fallback.push(s)):l[s.kind][s.tag]=l.fallback[s.tag]=s}for(t=0,f=arguments.length;t<f;t+=1)arguments[t].forEach(i);return l}function c(l){return this.extend(l)}return c.prototype.extend=function(t){var f=[],i=[];if(t instanceof d)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(f=f.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new r("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");f.forEach(function(n){if(!(n instanceof d))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new r("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new r("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(n){if(!(n instanceof d))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(c.prototype);return s.implicit=(this.implicit||[]).concat(f),s.explicit=(this.explicit||[]).concat(i),s.compiledImplicit=h(s,"implicit"),s.compiledExplicit=h(s,"explicit"),s.compiledTypeMap=u(s.compiledImplicit,s.compiledExplicit),s},$n=c,$n}var kn,Io;function Fl(){if(Io)return kn;Io=1;var r=je();return kn=new r("tag:yaml.org,2002:str",{kind:"scalar",construct:function(d){return d!==null?d:""}}),kn}var qn,Oo;function xl(){if(Oo)return qn;Oo=1;var r=je();return qn=new r("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(d){return d!==null?d:[]}}),qn}var Mn,Do;function Ll(){if(Do)return Mn;Do=1;var r=je();return Mn=new r("tag:yaml.org,2002:map",{kind:"mapping",construct:function(d){return d!==null?d:{}}}),Mn}var Bn,No;function Ul(){if(No)return Bn;No=1;var r=Nl();return Bn=new r({explicit:[Fl(),xl(),Ll()]}),Bn}var Hn,Fo;function $l(){if(Fo)return Hn;Fo=1;var r=je();function d(c){if(c===null)return!0;var l=c.length;return l===1&&c==="~"||l===4&&(c==="null"||c==="Null"||c==="NULL")}function h(){return null}function u(c){return c===null}return Hn=new r("tag:yaml.org,2002:null",{kind:"scalar",resolve:d,construct:h,predicate:u,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Hn}var jn,xo;function kl(){if(xo)return jn;xo=1;var r=je();function d(c){if(c===null)return!1;var l=c.length;return l===4&&(c==="true"||c==="True"||c==="TRUE")||l===5&&(c==="false"||c==="False"||c==="FALSE")}function h(c){return c==="true"||c==="True"||c==="TRUE"}function u(c){return Object.prototype.toString.call(c)==="[object Boolean]"}return jn=new r("tag:yaml.org,2002:bool",{kind:"scalar",resolve:d,construct:h,predicate:u,represent:{lowercase:function(c){return c?"true":"false"},uppercase:function(c){return c?"TRUE":"FALSE"},camelcase:function(c){return c?"True":"False"}},defaultStyle:"lowercase"}),jn}var Gn,Lo;function ql(){if(Lo)return Gn;Lo=1;var r=mr(),d=je();function h(i){return 48<=i&&i<=57||65<=i&&i<=70||97<=i&&i<=102}function u(i){return 48<=i&&i<=55}function c(i){return 48<=i&&i<=57}function l(i){if(i===null)return!1;var s=i.length,n=0,o=!1,a;if(!s)return!1;if(a=i[n],(a==="-"||a==="+")&&(a=i[++n]),a==="0"){if(n+1===s)return!0;if(a=i[++n],a==="b"){for(n++;n<s;n++)if(a=i[n],a!=="_"){if(a!=="0"&&a!=="1")return!1;o=!0}return o&&a!=="_"}if(a==="x"){for(n++;n<s;n++)if(a=i[n],a!=="_"){if(!h(i.charCodeAt(n)))return!1;o=!0}return o&&a!=="_"}if(a==="o"){for(n++;n<s;n++)if(a=i[n],a!=="_"){if(!u(i.charCodeAt(n)))return!1;o=!0}return o&&a!=="_"}}if(a==="_")return!1;for(;n<s;n++)if(a=i[n],a!=="_"){if(!c(i.charCodeAt(n)))return!1;o=!0}return!(!o||a==="_")}function t(i){var s=i,n=1,o;if(s.indexOf("_")!==-1&&(s=s.replace(/_/g,"")),o=s[0],(o==="-"||o==="+")&&(o==="-"&&(n=-1),s=s.slice(1),o=s[0]),s==="0")return 0;if(o==="0"){if(s[1]==="b")return n*parseInt(s.slice(2),2);if(s[1]==="x")return n*parseInt(s.slice(2),16);if(s[1]==="o")return n*parseInt(s.slice(2),8)}return n*parseInt(s,10)}function f(i){return Object.prototype.toString.call(i)==="[object Number]"&&i%1===0&&!r.isNegativeZero(i)}return Gn=new d("tag:yaml.org,2002:int",{kind:"scalar",resolve:l,construct:t,predicate:f,represent:{binary:function(i){return i>=0?"0b"+i.toString(2):"-0b"+i.toString(2).slice(1)},octal:function(i){return i>=0?"0o"+i.toString(8):"-0o"+i.toString(8).slice(1)},decimal:function(i){return i.toString(10)},hexadecimal:function(i){return i>=0?"0x"+i.toString(16).toUpperCase():"-0x"+i.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Gn}var Wn,Uo;function Ml(){if(Uo)return Wn;Uo=1;var r=mr(),d=je(),h=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function u(i){return!(i===null||!h.test(i)||i[i.length-1]==="_")}function c(i){var s,n;return s=i.replace(/_/g,"").toLowerCase(),n=s[0]==="-"?-1:1,"+-".indexOf(s[0])>=0&&(s=s.slice(1)),s===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:s===".nan"?NaN:n*parseFloat(s,10)}var l=/^[-+]?[0-9]+e/;function t(i,s){var n;if(isNaN(i))switch(s){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===i)switch(s){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===i)switch(s){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(r.isNegativeZero(i))return"-0.0";return n=i.toString(10),l.test(n)?n.replace("e",".e"):n}function f(i){return Object.prototype.toString.call(i)==="[object Number]"&&(i%1!==0||r.isNegativeZero(i))}return Wn=new d("tag:yaml.org,2002:float",{kind:"scalar",resolve:u,construct:c,predicate:f,represent:t,defaultStyle:"lowercase"}),Wn}var Vn,$o;function Bl(){return $o||($o=1,Vn=Ul().extend({implicit:[$l(),kl(),ql(),Ml()]})),Vn}var Yn,ko;function Hl(){return ko||(ko=1,Yn=Bl()),Yn}var zn,qo;function jl(){if(qo)return zn;qo=1;var r=je(),d=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),h=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function u(t){return t===null?!1:d.exec(t)!==null||h.exec(t)!==null}function c(t){var f,i,s,n,o,a,m,g=0,y=null,p,A,C;if(f=d.exec(t),f===null&&(f=h.exec(t)),f===null)throw new Error("Date resolve error");if(i=+f[1],s=+f[2]-1,n=+f[3],!f[4])return new Date(Date.UTC(i,s,n));if(o=+f[4],a=+f[5],m=+f[6],f[7]){for(g=f[7].slice(0,3);g.length<3;)g+="0";g=+g}return f[9]&&(p=+f[10],A=+(f[11]||0),y=(p*60+A)*6e4,f[9]==="-"&&(y=-y)),C=new Date(Date.UTC(i,s,n,o,a,m,g)),y&&C.setTime(C.getTime()-y),C}function l(t){return t.toISOString()}return zn=new r("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:u,construct:c,instanceOf:Date,represent:l}),zn}var Xn,Mo;function Gl(){if(Mo)return Xn;Mo=1;var r=je();function d(h){return h==="<<"||h===null}return Xn=new r("tag:yaml.org,2002:merge",{kind:"scalar",resolve:d}),Xn}var Kn,Bo;function Wl(){if(Bo)return Kn;Bo=1;var r=je(),d=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function h(t){if(t===null)return!1;var f,i,s=0,n=t.length,o=d;for(i=0;i<n;i++)if(f=o.indexOf(t.charAt(i)),!(f>64)){if(f<0)return!1;s+=6}return s%8===0}function u(t){var f,i,s=t.replace(/[\r\n=]/g,""),n=s.length,o=d,a=0,m=[];for(f=0;f<n;f++)f%4===0&&f&&(m.push(a>>16&255),m.push(a>>8&255),m.push(a&255)),a=a<<6|o.indexOf(s.charAt(f));return i=n%4*6,i===0?(m.push(a>>16&255),m.push(a>>8&255),m.push(a&255)):i===18?(m.push(a>>10&255),m.push(a>>2&255)):i===12&&m.push(a>>4&255),new Uint8Array(m)}function c(t){var f="",i=0,s,n,o=t.length,a=d;for(s=0;s<o;s++)s%3===0&&s&&(f+=a[i>>18&63],f+=a[i>>12&63],f+=a[i>>6&63],f+=a[i&63]),i=(i<<8)+t[s];return n=o%3,n===0?(f+=a[i>>18&63],f+=a[i>>12&63],f+=a[i>>6&63],f+=a[i&63]):n===2?(f+=a[i>>10&63],f+=a[i>>4&63],f+=a[i<<2&63],f+=a[64]):n===1&&(f+=a[i>>2&63],f+=a[i<<4&63],f+=a[64],f+=a[64]),f}function l(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}return Kn=new r("tag:yaml.org,2002:binary",{kind:"scalar",resolve:h,construct:u,predicate:l,represent:c}),Kn}var Jn,Ho;function Vl(){if(Ho)return Jn;Ho=1;var r=je(),d=Object.prototype.hasOwnProperty,h=Object.prototype.toString;function u(l){if(l===null)return!0;var t=[],f,i,s,n,o,a=l;for(f=0,i=a.length;f<i;f+=1){if(s=a[f],o=!1,h.call(s)!=="[object Object]")return!1;for(n in s)if(d.call(s,n))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(n)===-1)t.push(n);else return!1}return!0}function c(l){return l!==null?l:[]}return Jn=new r("tag:yaml.org,2002:omap",{kind:"sequence",resolve:u,construct:c}),Jn}var Qn,jo;function Yl(){if(jo)return Qn;jo=1;var r=je(),d=Object.prototype.toString;function h(c){if(c===null)return!0;var l,t,f,i,s,n=c;for(s=new Array(n.length),l=0,t=n.length;l<t;l+=1){if(f=n[l],d.call(f)!=="[object Object]"||(i=Object.keys(f),i.length!==1))return!1;s[l]=[i[0],f[i[0]]]}return!0}function u(c){if(c===null)return[];var l,t,f,i,s,n=c;for(s=new Array(n.length),l=0,t=n.length;l<t;l+=1)f=n[l],i=Object.keys(f),s[l]=[i[0],f[i[0]]];return s}return Qn=new r("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:h,construct:u}),Qn}var Zn,Go;function zl(){if(Go)return Zn;Go=1;var r=je(),d=Object.prototype.hasOwnProperty;function h(c){if(c===null)return!0;var l,t=c;for(l in t)if(d.call(t,l)&&t[l]!==null)return!1;return!0}function u(c){return c!==null?c:{}}return Zn=new r("tag:yaml.org,2002:set",{kind:"mapping",resolve:h,construct:u}),Zn}var ei,Wo;function ra(){return Wo||(Wo=1,ei=Hl().extend({implicit:[jl(),Gl()],explicit:[Wl(),Vl(),Yl(),zl()]})),ei}var Vo;function Hc(){if(Vo)return Fr;Vo=1;var r=mr(),d=gr(),h=Bc(),u=ra(),c=Object.prototype.hasOwnProperty,l=1,t=2,f=3,i=4,s=1,n=2,o=3,a=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,m=/[\x85\u2028\u2029]/,g=/[,\[\]\{\}]/,y=/^(?:!|!!|![a-z\-]+!)$/i,p=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function A(e){return Object.prototype.toString.call(e)}function C(e){return e===10||e===13}function I(e){return e===9||e===32}function P(e){return e===9||e===32||e===10||e===13}function $(e){return e===44||e===91||e===93||e===123||e===125}function R(e){var B;return 48<=e&&e<=57?e-48:(B=e|32,97<=B&&B<=102?B-97+10:-1)}function _(e){return e===120?2:e===117?4:e===85?8:0}function T(e){return 48<=e&&e<=57?e-48:-1}function E(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function k(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}for(var U=new Array(256),x=new Array(256),M=0;M<256;M++)U[M]=E(M)?1:0,x[M]=E(M);function D(e,B){this.input=e,this.filename=B.filename||null,this.schema=B.schema||u,this.onWarning=B.onWarning||null,this.legacy=B.legacy||!1,this.json=B.json||!1,this.listener=B.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function O(e,B){var G={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return G.snippet=h(G),new d(B,G)}function F(e,B){throw O(e,B)}function q(e,B){e.onWarning&&e.onWarning.call(null,O(e,B))}var J={YAML:function(B,G,re){var V,te,Z;B.version!==null&&F(B,"duplication of %YAML directive"),re.length!==1&&F(B,"YAML directive accepts exactly one argument"),V=/^([0-9]+)\.([0-9]+)$/.exec(re[0]),V===null&&F(B,"ill-formed argument of the YAML directive"),te=parseInt(V[1],10),Z=parseInt(V[2],10),te!==1&&F(B,"unacceptable YAML version of the document"),B.version=re[0],B.checkLineBreaks=Z<2,Z!==1&&Z!==2&&q(B,"unsupported YAML version of the document")},TAG:function(B,G,re){var V,te;re.length!==2&&F(B,"TAG directive accepts exactly two arguments"),V=re[0],te=re[1],y.test(V)||F(B,"ill-formed tag handle (first argument) of the TAG directive"),c.call(B.tagMap,V)&&F(B,'there is a previously declared suffix for "'+V+'" tag handle'),p.test(te)||F(B,"ill-formed tag prefix (second argument) of the TAG directive");try{te=decodeURIComponent(te)}catch{F(B,"tag prefix is malformed: "+te)}B.tagMap[V]=te}};function W(e,B,G,re){var V,te,Z,ae;if(B<G){if(ae=e.input.slice(B,G),re)for(V=0,te=ae.length;V<te;V+=1)Z=ae.charCodeAt(V),Z===9||32<=Z&&Z<=1114111||F(e,"expected valid JSON character");else a.test(ae)&&F(e,"the stream contains non-printable characters");e.result+=ae}}function ne(e,B,G,re){var V,te,Z,ae;for(r.isObject(G)||F(e,"cannot merge mappings; the provided source object is unacceptable"),V=Object.keys(G),Z=0,ae=V.length;Z<ae;Z+=1)te=V[Z],c.call(B,te)||(B[te]=G[te],re[te]=!0)}function ce(e,B,G,re,V,te,Z,ae,ge){var ve,Te;if(Array.isArray(V))for(V=Array.prototype.slice.call(V),ve=0,Te=V.length;ve<Te;ve+=1)Array.isArray(V[ve])&&F(e,"nested arrays are not supported inside keys"),typeof V=="object"&&A(V[ve])==="[object Object]"&&(V[ve]="[object Object]");if(typeof V=="object"&&A(V)==="[object Object]"&&(V="[object Object]"),V=String(V),B===null&&(B={}),re==="tag:yaml.org,2002:merge")if(Array.isArray(te))for(ve=0,Te=te.length;ve<Te;ve+=1)ne(e,B,te[ve],G);else ne(e,B,te,G);else!e.json&&!c.call(G,V)&&c.call(B,V)&&(e.line=Z||e.line,e.lineStart=ae||e.lineStart,e.position=ge||e.position,F(e,"duplicated mapping key")),V==="__proto__"?Object.defineProperty(B,V,{configurable:!0,enumerable:!0,writable:!0,value:te}):B[V]=te,delete G[V];return B}function ue(e){var B;B=e.input.charCodeAt(e.position),B===10?e.position++:B===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):F(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function ie(e,B,G){for(var re=0,V=e.input.charCodeAt(e.position);V!==0;){for(;I(V);)V===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),V=e.input.charCodeAt(++e.position);if(B&&V===35)do V=e.input.charCodeAt(++e.position);while(V!==10&&V!==13&&V!==0);if(C(V))for(ue(e),V=e.input.charCodeAt(e.position),re++,e.lineIndent=0;V===32;)e.lineIndent++,V=e.input.charCodeAt(++e.position);else break}return G!==-1&&re!==0&&e.lineIndent<G&&q(e,"deficient indentation"),re}function Ae(e){var B=e.position,G;return G=e.input.charCodeAt(B),!!((G===45||G===46)&&G===e.input.charCodeAt(B+1)&&G===e.input.charCodeAt(B+2)&&(B+=3,G=e.input.charCodeAt(B),G===0||P(G)))}function K(e,B){B===1?e.result+=" ":B>1&&(e.result+=r.repeat(`
`,B-1))}function Ee(e,B,G){var re,V,te,Z,ae,ge,ve,Te,de=e.kind,Le=e.result,w;if(w=e.input.charCodeAt(e.position),P(w)||$(w)||w===35||w===38||w===42||w===33||w===124||w===62||w===39||w===34||w===37||w===64||w===96||(w===63||w===45)&&(V=e.input.charCodeAt(e.position+1),P(V)||G&&$(V)))return!1;for(e.kind="scalar",e.result="",te=Z=e.position,ae=!1;w!==0;){if(w===58){if(V=e.input.charCodeAt(e.position+1),P(V)||G&&$(V))break}else if(w===35){if(re=e.input.charCodeAt(e.position-1),P(re))break}else{if(e.position===e.lineStart&&Ae(e)||G&&$(w))break;if(C(w))if(ge=e.line,ve=e.lineStart,Te=e.lineIndent,ie(e,!1,-1),e.lineIndent>=B){ae=!0,w=e.input.charCodeAt(e.position);continue}else{e.position=Z,e.line=ge,e.lineStart=ve,e.lineIndent=Te;break}}ae&&(W(e,te,Z,!1),K(e,e.line-ge),te=Z=e.position,ae=!1),I(w)||(Z=e.position+1),w=e.input.charCodeAt(++e.position)}return W(e,te,Z,!1),e.result?!0:(e.kind=de,e.result=Le,!1)}function S(e,B){var G,re,V;if(G=e.input.charCodeAt(e.position),G!==39)return!1;for(e.kind="scalar",e.result="",e.position++,re=V=e.position;(G=e.input.charCodeAt(e.position))!==0;)if(G===39)if(W(e,re,e.position,!0),G=e.input.charCodeAt(++e.position),G===39)re=e.position,e.position++,V=e.position;else return!0;else C(G)?(W(e,re,V,!0),K(e,ie(e,!1,B)),re=V=e.position):e.position===e.lineStart&&Ae(e)?F(e,"unexpected end of the document within a single quoted scalar"):(e.position++,V=e.position);F(e,"unexpected end of the stream within a single quoted scalar")}function v(e,B){var G,re,V,te,Z,ae;if(ae=e.input.charCodeAt(e.position),ae!==34)return!1;for(e.kind="scalar",e.result="",e.position++,G=re=e.position;(ae=e.input.charCodeAt(e.position))!==0;){if(ae===34)return W(e,G,e.position,!0),e.position++,!0;if(ae===92){if(W(e,G,e.position,!0),ae=e.input.charCodeAt(++e.position),C(ae))ie(e,!1,B);else if(ae<256&&U[ae])e.result+=x[ae],e.position++;else if((Z=_(ae))>0){for(V=Z,te=0;V>0;V--)ae=e.input.charCodeAt(++e.position),(Z=R(ae))>=0?te=(te<<4)+Z:F(e,"expected hexadecimal character");e.result+=k(te),e.position++}else F(e,"unknown escape sequence");G=re=e.position}else C(ae)?(W(e,G,re,!0),K(e,ie(e,!1,B)),G=re=e.position):e.position===e.lineStart&&Ae(e)?F(e,"unexpected end of the document within a double quoted scalar"):(e.position++,re=e.position)}F(e,"unexpected end of the stream within a double quoted scalar")}function H(e,B){var G=!0,re,V,te,Z=e.tag,ae,ge=e.anchor,ve,Te,de,Le,w,j=Object.create(null),X,Y,Q,ee;if(ee=e.input.charCodeAt(e.position),ee===91)Te=93,w=!1,ae=[];else if(ee===123)Te=125,w=!0,ae={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=ae),ee=e.input.charCodeAt(++e.position);ee!==0;){if(ie(e,!0,B),ee=e.input.charCodeAt(e.position),ee===Te)return e.position++,e.tag=Z,e.anchor=ge,e.kind=w?"mapping":"sequence",e.result=ae,!0;G?ee===44&&F(e,"expected the node content, but found ','"):F(e,"missed comma between flow collection entries"),Y=X=Q=null,de=Le=!1,ee===63&&(ve=e.input.charCodeAt(e.position+1),P(ve)&&(de=Le=!0,e.position++,ie(e,!0,B))),re=e.line,V=e.lineStart,te=e.position,xe(e,B,l,!1,!0),Y=e.tag,X=e.result,ie(e,!0,B),ee=e.input.charCodeAt(e.position),(Le||e.line===re)&&ee===58&&(de=!0,ee=e.input.charCodeAt(++e.position),ie(e,!0,B),xe(e,B,l,!1,!0),Q=e.result),w?ce(e,ae,j,Y,X,Q,re,V,te):de?ae.push(ce(e,null,j,Y,X,Q,re,V,te)):ae.push(X),ie(e,!0,B),ee=e.input.charCodeAt(e.position),ee===44?(G=!0,ee=e.input.charCodeAt(++e.position)):G=!1}F(e,"unexpected end of the stream within a flow collection")}function N(e,B){var G,re,V=s,te=!1,Z=!1,ae=B,ge=0,ve=!1,Te,de;if(de=e.input.charCodeAt(e.position),de===124)re=!1;else if(de===62)re=!0;else return!1;for(e.kind="scalar",e.result="";de!==0;)if(de=e.input.charCodeAt(++e.position),de===43||de===45)s===V?V=de===43?o:n:F(e,"repeat of a chomping mode identifier");else if((Te=T(de))>=0)Te===0?F(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):Z?F(e,"repeat of an indentation width identifier"):(ae=B+Te-1,Z=!0);else break;if(I(de)){do de=e.input.charCodeAt(++e.position);while(I(de));if(de===35)do de=e.input.charCodeAt(++e.position);while(!C(de)&&de!==0)}for(;de!==0;){for(ue(e),e.lineIndent=0,de=e.input.charCodeAt(e.position);(!Z||e.lineIndent<ae)&&de===32;)e.lineIndent++,de=e.input.charCodeAt(++e.position);if(!Z&&e.lineIndent>ae&&(ae=e.lineIndent),C(de)){ge++;continue}if(e.lineIndent<ae){V===o?e.result+=r.repeat(`
`,te?1+ge:ge):V===s&&te&&(e.result+=`
`);break}for(re?I(de)?(ve=!0,e.result+=r.repeat(`
`,te?1+ge:ge)):ve?(ve=!1,e.result+=r.repeat(`
`,ge+1)):ge===0?te&&(e.result+=" "):e.result+=r.repeat(`
`,ge):e.result+=r.repeat(`
`,te?1+ge:ge),te=!0,Z=!0,ge=0,G=e.position;!C(de)&&de!==0;)de=e.input.charCodeAt(++e.position);W(e,G,e.position,!1)}return!0}function le(e,B){var G,re=e.tag,V=e.anchor,te=[],Z,ae=!1,ge;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=te),ge=e.input.charCodeAt(e.position);ge!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,F(e,"tab characters must not be used in indentation")),!(ge!==45||(Z=e.input.charCodeAt(e.position+1),!P(Z))));){if(ae=!0,e.position++,ie(e,!0,-1)&&e.lineIndent<=B){te.push(null),ge=e.input.charCodeAt(e.position);continue}if(G=e.line,xe(e,B,f,!1,!0),te.push(e.result),ie(e,!0,-1),ge=e.input.charCodeAt(e.position),(e.line===G||e.lineIndent>B)&&ge!==0)F(e,"bad indentation of a sequence entry");else if(e.lineIndent<B)break}return ae?(e.tag=re,e.anchor=V,e.kind="sequence",e.result=te,!0):!1}function me(e,B,G){var re,V,te,Z,ae,ge,ve=e.tag,Te=e.anchor,de={},Le=Object.create(null),w=null,j=null,X=null,Y=!1,Q=!1,ee;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=de),ee=e.input.charCodeAt(e.position);ee!==0;){if(!Y&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,F(e,"tab characters must not be used in indentation")),re=e.input.charCodeAt(e.position+1),te=e.line,(ee===63||ee===58)&&P(re))ee===63?(Y&&(ce(e,de,Le,w,j,null,Z,ae,ge),w=j=X=null),Q=!0,Y=!0,V=!0):Y?(Y=!1,V=!0):F(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,ee=re;else{if(Z=e.line,ae=e.lineStart,ge=e.position,!xe(e,G,t,!1,!0))break;if(e.line===te){for(ee=e.input.charCodeAt(e.position);I(ee);)ee=e.input.charCodeAt(++e.position);if(ee===58)ee=e.input.charCodeAt(++e.position),P(ee)||F(e,"a whitespace character is expected after the key-value separator within a block mapping"),Y&&(ce(e,de,Le,w,j,null,Z,ae,ge),w=j=X=null),Q=!0,Y=!1,V=!1,w=e.tag,j=e.result;else if(Q)F(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=ve,e.anchor=Te,!0}else if(Q)F(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=ve,e.anchor=Te,!0}if((e.line===te||e.lineIndent>B)&&(Y&&(Z=e.line,ae=e.lineStart,ge=e.position),xe(e,B,i,!0,V)&&(Y?j=e.result:X=e.result),Y||(ce(e,de,Le,w,j,X,Z,ae,ge),w=j=X=null),ie(e,!0,-1),ee=e.input.charCodeAt(e.position)),(e.line===te||e.lineIndent>B)&&ee!==0)F(e,"bad indentation of a mapping entry");else if(e.lineIndent<B)break}return Y&&ce(e,de,Le,w,j,null,Z,ae,ge),Q&&(e.tag=ve,e.anchor=Te,e.kind="mapping",e.result=de),Q}function pe(e){var B,G=!1,re=!1,V,te,Z;if(Z=e.input.charCodeAt(e.position),Z!==33)return!1;if(e.tag!==null&&F(e,"duplication of a tag property"),Z=e.input.charCodeAt(++e.position),Z===60?(G=!0,Z=e.input.charCodeAt(++e.position)):Z===33?(re=!0,V="!!",Z=e.input.charCodeAt(++e.position)):V="!",B=e.position,G){do Z=e.input.charCodeAt(++e.position);while(Z!==0&&Z!==62);e.position<e.length?(te=e.input.slice(B,e.position),Z=e.input.charCodeAt(++e.position)):F(e,"unexpected end of the stream within a verbatim tag")}else{for(;Z!==0&&!P(Z);)Z===33&&(re?F(e,"tag suffix cannot contain exclamation marks"):(V=e.input.slice(B-1,e.position+1),y.test(V)||F(e,"named tag handle cannot contain such characters"),re=!0,B=e.position+1)),Z=e.input.charCodeAt(++e.position);te=e.input.slice(B,e.position),g.test(te)&&F(e,"tag suffix cannot contain flow indicator characters")}te&&!p.test(te)&&F(e,"tag name cannot contain such characters: "+te);try{te=decodeURIComponent(te)}catch{F(e,"tag name is malformed: "+te)}return G?e.tag=te:c.call(e.tagMap,V)?e.tag=e.tagMap[V]+te:V==="!"?e.tag="!"+te:V==="!!"?e.tag="tag:yaml.org,2002:"+te:F(e,'undeclared tag handle "'+V+'"'),!0}function _e(e){var B,G;if(G=e.input.charCodeAt(e.position),G!==38)return!1;for(e.anchor!==null&&F(e,"duplication of an anchor property"),G=e.input.charCodeAt(++e.position),B=e.position;G!==0&&!P(G)&&!$(G);)G=e.input.charCodeAt(++e.position);return e.position===B&&F(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(B,e.position),!0}function ye(e){var B,G,re;if(re=e.input.charCodeAt(e.position),re!==42)return!1;for(re=e.input.charCodeAt(++e.position),B=e.position;re!==0&&!P(re)&&!$(re);)re=e.input.charCodeAt(++e.position);return e.position===B&&F(e,"name of an alias node must contain at least one character"),G=e.input.slice(B,e.position),c.call(e.anchorMap,G)||F(e,'unidentified alias "'+G+'"'),e.result=e.anchorMap[G],ie(e,!0,-1),!0}function xe(e,B,G,re,V){var te,Z,ae,ge=1,ve=!1,Te=!1,de,Le,w,j,X,Y;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,te=Z=ae=i===G||f===G,re&&ie(e,!0,-1)&&(ve=!0,e.lineIndent>B?ge=1:e.lineIndent===B?ge=0:e.lineIndent<B&&(ge=-1)),ge===1)for(;pe(e)||_e(e);)ie(e,!0,-1)?(ve=!0,ae=te,e.lineIndent>B?ge=1:e.lineIndent===B?ge=0:e.lineIndent<B&&(ge=-1)):ae=!1;if(ae&&(ae=ve||V),(ge===1||i===G)&&(l===G||t===G?X=B:X=B+1,Y=e.position-e.lineStart,ge===1?ae&&(le(e,Y)||me(e,Y,X))||H(e,X)?Te=!0:(Z&&N(e,X)||S(e,X)||v(e,X)?Te=!0:ye(e)?(Te=!0,(e.tag!==null||e.anchor!==null)&&F(e,"alias node should not have any properties")):Ee(e,X,l===G)&&(Te=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):ge===0&&(Te=ae&&le(e,Y))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&F(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),de=0,Le=e.implicitTypes.length;de<Le;de+=1)if(j=e.implicitTypes[de],j.resolve(e.result)){e.result=j.construct(e.result),e.tag=j.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(c.call(e.typeMap[e.kind||"fallback"],e.tag))j=e.typeMap[e.kind||"fallback"][e.tag];else for(j=null,w=e.typeMap.multi[e.kind||"fallback"],de=0,Le=w.length;de<Le;de+=1)if(e.tag.slice(0,w[de].tag.length)===w[de].tag){j=w[de];break}j||F(e,"unknown tag !<"+e.tag+">"),e.result!==null&&j.kind!==e.kind&&F(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+j.kind+'", not "'+e.kind+'"'),j.resolve(e.result,e.tag)?(e.result=j.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):F(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||Te}function be(e){var B=e.position,G,re,V,te=!1,Z;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(Z=e.input.charCodeAt(e.position))!==0&&(ie(e,!0,-1),Z=e.input.charCodeAt(e.position),!(e.lineIndent>0||Z!==37));){for(te=!0,Z=e.input.charCodeAt(++e.position),G=e.position;Z!==0&&!P(Z);)Z=e.input.charCodeAt(++e.position);for(re=e.input.slice(G,e.position),V=[],re.length<1&&F(e,"directive name must not be less than one character in length");Z!==0;){for(;I(Z);)Z=e.input.charCodeAt(++e.position);if(Z===35){do Z=e.input.charCodeAt(++e.position);while(Z!==0&&!C(Z));break}if(C(Z))break;for(G=e.position;Z!==0&&!P(Z);)Z=e.input.charCodeAt(++e.position);V.push(e.input.slice(G,e.position))}Z!==0&&ue(e),c.call(J,re)?J[re](e,re,V):q(e,'unknown document directive "'+re+'"')}if(ie(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ie(e,!0,-1)):te&&F(e,"directives end mark is expected"),xe(e,e.lineIndent-1,i,!1,!0),ie(e,!0,-1),e.checkLineBreaks&&m.test(e.input.slice(B,e.position))&&q(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Ae(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ie(e,!0,-1));return}if(e.position<e.length-1)F(e,"end of the stream or a document separator is expected");else return}function qe(e,B){e=String(e),B=B||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var G=new D(e,B),re=e.indexOf("\0");for(re!==-1&&(G.position=re,F(G,"null byte is not allowed in input")),G.input+="\0";G.input.charCodeAt(G.position)===32;)G.lineIndent+=1,G.position+=1;for(;G.position<G.length-1;)be(G);return G.documents}function mt(e,B,G){B!==null&&typeof B=="object"&&typeof G>"u"&&(G=B,B=null);var re=qe(e,G);if(typeof B!="function")return re;for(var V=0,te=re.length;V<te;V+=1)B(re[V])}function at(e,B){var G=qe(e,B);if(G.length!==0){if(G.length===1)return G[0];throw new d("expected a single document in the stream, but found more")}}return Fr.loadAll=mt,Fr.load=at,Fr}var ti={},Yo;function jc(){if(Yo)return ti;Yo=1;var r=mr(),d=gr(),h=ra(),u=Object.prototype.toString,c=Object.prototype.hasOwnProperty,l=65279,t=9,f=10,i=13,s=32,n=33,o=34,a=35,m=37,g=38,y=39,p=42,A=44,C=45,I=58,P=61,$=62,R=63,_=64,T=91,E=93,k=96,U=123,x=124,M=125,D={};D[0]="\\0",D[7]="\\a",D[8]="\\b",D[9]="\\t",D[10]="\\n",D[11]="\\v",D[12]="\\f",D[13]="\\r",D[27]="\\e",D[34]='\\"',D[92]="\\\\",D[133]="\\N",D[160]="\\_",D[8232]="\\L",D[8233]="\\P";var O=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],F=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function q(w,j){var X,Y,Q,ee,fe,oe,he;if(j===null)return{};for(X={},Y=Object.keys(j),Q=0,ee=Y.length;Q<ee;Q+=1)fe=Y[Q],oe=String(j[fe]),fe.slice(0,2)==="!!"&&(fe="tag:yaml.org,2002:"+fe.slice(2)),he=w.compiledTypeMap.fallback[fe],he&&c.call(he.styleAliases,oe)&&(oe=he.styleAliases[oe]),X[fe]=oe;return X}function J(w){var j,X,Y;if(j=w.toString(16).toUpperCase(),w<=255)X="x",Y=2;else if(w<=65535)X="u",Y=4;else if(w<=4294967295)X="U",Y=8;else throw new d("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+X+r.repeat("0",Y-j.length)+j}var W=1,ne=2;function ce(w){this.schema=w.schema||h,this.indent=Math.max(1,w.indent||2),this.noArrayIndent=w.noArrayIndent||!1,this.skipInvalid=w.skipInvalid||!1,this.flowLevel=r.isNothing(w.flowLevel)?-1:w.flowLevel,this.styleMap=q(this.schema,w.styles||null),this.sortKeys=w.sortKeys||!1,this.lineWidth=w.lineWidth||80,this.noRefs=w.noRefs||!1,this.noCompatMode=w.noCompatMode||!1,this.condenseFlow=w.condenseFlow||!1,this.quotingType=w.quotingType==='"'?ne:W,this.forceQuotes=w.forceQuotes||!1,this.replacer=typeof w.replacer=="function"?w.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ue(w,j){for(var X=r.repeat(" ",j),Y=0,Q=-1,ee="",fe,oe=w.length;Y<oe;)Q=w.indexOf(`
`,Y),Q===-1?(fe=w.slice(Y),Y=oe):(fe=w.slice(Y,Q+1),Y=Q+1),fe.length&&fe!==`
`&&(ee+=X),ee+=fe;return ee}function ie(w,j){return`
`+r.repeat(" ",w.indent*j)}function Ae(w,j){var X,Y,Q;for(X=0,Y=w.implicitTypes.length;X<Y;X+=1)if(Q=w.implicitTypes[X],Q.resolve(j))return!0;return!1}function K(w){return w===s||w===t}function Ee(w){return 32<=w&&w<=126||161<=w&&w<=55295&&w!==8232&&w!==8233||57344<=w&&w<=65533&&w!==l||65536<=w&&w<=1114111}function S(w){return Ee(w)&&w!==l&&w!==i&&w!==f}function v(w,j,X){var Y=S(w),Q=Y&&!K(w);return(X?Y:Y&&w!==A&&w!==T&&w!==E&&w!==U&&w!==M)&&w!==a&&!(j===I&&!Q)||S(j)&&!K(j)&&w===a||j===I&&Q}function H(w){return Ee(w)&&w!==l&&!K(w)&&w!==C&&w!==R&&w!==I&&w!==A&&w!==T&&w!==E&&w!==U&&w!==M&&w!==a&&w!==g&&w!==p&&w!==n&&w!==x&&w!==P&&w!==$&&w!==y&&w!==o&&w!==m&&w!==_&&w!==k}function N(w){return!K(w)&&w!==I}function le(w,j){var X=w.charCodeAt(j),Y;return X>=55296&&X<=56319&&j+1<w.length&&(Y=w.charCodeAt(j+1),Y>=56320&&Y<=57343)?(X-55296)*1024+Y-56320+65536:X}function me(w){var j=/^\n* /;return j.test(w)}var pe=1,_e=2,ye=3,xe=4,be=5;function qe(w,j,X,Y,Q,ee,fe,oe){var he,we=0,Pe=null,Ne=!1,Re=!1,It=Y!==-1,Qe=-1,gt=H(le(w,0))&&N(le(w,w.length-1));if(j||fe)for(he=0;he<w.length;we>=65536?he+=2:he++){if(we=le(w,he),!Ee(we))return be;gt=gt&&v(we,Pe,oe),Pe=we}else{for(he=0;he<w.length;we>=65536?he+=2:he++){if(we=le(w,he),we===f)Ne=!0,It&&(Re=Re||he-Qe-1>Y&&w[Qe+1]!==" ",Qe=he);else if(!Ee(we))return be;gt=gt&&v(we,Pe,oe),Pe=we}Re=Re||It&&he-Qe-1>Y&&w[Qe+1]!==" "}return!Ne&&!Re?gt&&!fe&&!Q(w)?pe:ee===ne?be:_e:X>9&&me(w)?be:fe?ee===ne?be:_e:Re?xe:ye}function mt(w,j,X,Y,Q){w.dump=(function(){if(j.length===0)return w.quotingType===ne?'""':"''";if(!w.noCompatMode&&(O.indexOf(j)!==-1||F.test(j)))return w.quotingType===ne?'"'+j+'"':"'"+j+"'";var ee=w.indent*Math.max(1,X),fe=w.lineWidth===-1?-1:Math.max(Math.min(w.lineWidth,40),w.lineWidth-ee),oe=Y||w.flowLevel>-1&&X>=w.flowLevel;function he(we){return Ae(w,we)}switch(qe(j,oe,w.indent,fe,he,w.quotingType,w.forceQuotes&&!Y,Q)){case pe:return j;case _e:return"'"+j.replace(/'/g,"''")+"'";case ye:return"|"+at(j,w.indent)+e(ue(j,ee));case xe:return">"+at(j,w.indent)+e(ue(B(j,fe),ee));case be:return'"'+re(j)+'"';default:throw new d("impossible error: invalid scalar style")}})()}function at(w,j){var X=me(w)?String(j):"",Y=w[w.length-1]===`
`,Q=Y&&(w[w.length-2]===`
`||w===`
`),ee=Q?"+":Y?"":"-";return X+ee+`
`}function e(w){return w[w.length-1]===`
`?w.slice(0,-1):w}function B(w,j){for(var X=/(\n+)([^\n]*)/g,Y=(function(){var we=w.indexOf(`
`);return we=we!==-1?we:w.length,X.lastIndex=we,G(w.slice(0,we),j)})(),Q=w[0]===`
`||w[0]===" ",ee,fe;fe=X.exec(w);){var oe=fe[1],he=fe[2];ee=he[0]===" ",Y+=oe+(!Q&&!ee&&he!==""?`
`:"")+G(he,j),Q=ee}return Y}function G(w,j){if(w===""||w[0]===" ")return w;for(var X=/ [^ ]/g,Y,Q=0,ee,fe=0,oe=0,he="";Y=X.exec(w);)oe=Y.index,oe-Q>j&&(ee=fe>Q?fe:oe,he+=`
`+w.slice(Q,ee),Q=ee+1),fe=oe;return he+=`
`,w.length-Q>j&&fe>Q?he+=w.slice(Q,fe)+`
`+w.slice(fe+1):he+=w.slice(Q),he.slice(1)}function re(w){for(var j="",X=0,Y,Q=0;Q<w.length;X>=65536?Q+=2:Q++)X=le(w,Q),Y=D[X],!Y&&Ee(X)?(j+=w[Q],X>=65536&&(j+=w[Q+1])):j+=Y||J(X);return j}function V(w,j,X){var Y="",Q=w.tag,ee,fe,oe;for(ee=0,fe=X.length;ee<fe;ee+=1)oe=X[ee],w.replacer&&(oe=w.replacer.call(X,String(ee),oe)),(ve(w,j,oe,!1,!1)||typeof oe>"u"&&ve(w,j,null,!1,!1))&&(Y!==""&&(Y+=","+(w.condenseFlow?"":" ")),Y+=w.dump);w.tag=Q,w.dump="["+Y+"]"}function te(w,j,X,Y){var Q="",ee=w.tag,fe,oe,he;for(fe=0,oe=X.length;fe<oe;fe+=1)he=X[fe],w.replacer&&(he=w.replacer.call(X,String(fe),he)),(ve(w,j+1,he,!0,!0,!1,!0)||typeof he>"u"&&ve(w,j+1,null,!0,!0,!1,!0))&&((!Y||Q!=="")&&(Q+=ie(w,j)),w.dump&&f===w.dump.charCodeAt(0)?Q+="-":Q+="- ",Q+=w.dump);w.tag=ee,w.dump=Q||"[]"}function Z(w,j,X){var Y="",Q=w.tag,ee=Object.keys(X),fe,oe,he,we,Pe;for(fe=0,oe=ee.length;fe<oe;fe+=1)Pe="",Y!==""&&(Pe+=", "),w.condenseFlow&&(Pe+='"'),he=ee[fe],we=X[he],w.replacer&&(we=w.replacer.call(X,he,we)),ve(w,j,he,!1,!1)&&(w.dump.length>1024&&(Pe+="? "),Pe+=w.dump+(w.condenseFlow?'"':"")+":"+(w.condenseFlow?"":" "),ve(w,j,we,!1,!1)&&(Pe+=w.dump,Y+=Pe));w.tag=Q,w.dump="{"+Y+"}"}function ae(w,j,X,Y){var Q="",ee=w.tag,fe=Object.keys(X),oe,he,we,Pe,Ne,Re;if(w.sortKeys===!0)fe.sort();else if(typeof w.sortKeys=="function")fe.sort(w.sortKeys);else if(w.sortKeys)throw new d("sortKeys must be a boolean or a function");for(oe=0,he=fe.length;oe<he;oe+=1)Re="",(!Y||Q!=="")&&(Re+=ie(w,j)),we=fe[oe],Pe=X[we],w.replacer&&(Pe=w.replacer.call(X,we,Pe)),ve(w,j+1,we,!0,!0,!0)&&(Ne=w.tag!==null&&w.tag!=="?"||w.dump&&w.dump.length>1024,Ne&&(w.dump&&f===w.dump.charCodeAt(0)?Re+="?":Re+="? "),Re+=w.dump,Ne&&(Re+=ie(w,j)),ve(w,j+1,Pe,!0,Ne)&&(w.dump&&f===w.dump.charCodeAt(0)?Re+=":":Re+=": ",Re+=w.dump,Q+=Re));w.tag=ee,w.dump=Q||"{}"}function ge(w,j,X){var Y,Q,ee,fe,oe,he;for(Q=X?w.explicitTypes:w.implicitTypes,ee=0,fe=Q.length;ee<fe;ee+=1)if(oe=Q[ee],(oe.instanceOf||oe.predicate)&&(!oe.instanceOf||typeof j=="object"&&j instanceof oe.instanceOf)&&(!oe.predicate||oe.predicate(j))){if(X?oe.multi&&oe.representName?w.tag=oe.representName(j):w.tag=oe.tag:w.tag="?",oe.represent){if(he=w.styleMap[oe.tag]||oe.defaultStyle,u.call(oe.represent)==="[object Function]")Y=oe.represent(j,he);else if(c.call(oe.represent,he))Y=oe.represent[he](j,he);else throw new d("!<"+oe.tag+'> tag resolver accepts not "'+he+'" style');w.dump=Y}return!0}return!1}function ve(w,j,X,Y,Q,ee,fe){w.tag=null,w.dump=X,ge(w,X,!1)||ge(w,X,!0);var oe=u.call(w.dump),he=Y,we;Y&&(Y=w.flowLevel<0||w.flowLevel>j);var Pe=oe==="[object Object]"||oe==="[object Array]",Ne,Re;if(Pe&&(Ne=w.duplicates.indexOf(X),Re=Ne!==-1),(w.tag!==null&&w.tag!=="?"||Re||w.indent!==2&&j>0)&&(Q=!1),Re&&w.usedDuplicates[Ne])w.dump="*ref_"+Ne;else{if(Pe&&Re&&!w.usedDuplicates[Ne]&&(w.usedDuplicates[Ne]=!0),oe==="[object Object]")Y&&Object.keys(w.dump).length!==0?(ae(w,j,w.dump,Q),Re&&(w.dump="&ref_"+Ne+w.dump)):(Z(w,j,w.dump),Re&&(w.dump="&ref_"+Ne+" "+w.dump));else if(oe==="[object Array]")Y&&w.dump.length!==0?(w.noArrayIndent&&!fe&&j>0?te(w,j-1,w.dump,Q):te(w,j,w.dump,Q),Re&&(w.dump="&ref_"+Ne+w.dump)):(V(w,j,w.dump),Re&&(w.dump="&ref_"+Ne+" "+w.dump));else if(oe==="[object String]")w.tag!=="?"&&mt(w,w.dump,j,ee,he);else{if(oe==="[object Undefined]")return!1;if(w.skipInvalid)return!1;throw new d("unacceptable kind of an object to dump "+oe)}w.tag!==null&&w.tag!=="?"&&(we=encodeURI(w.tag[0]==="!"?w.tag.slice(1):w.tag).replace(/!/g,"%21"),w.tag[0]==="!"?we="!"+we:we.slice(0,18)==="tag:yaml.org,2002:"?we="!!"+we.slice(18):we="!<"+we+">",w.dump=we+" "+w.dump)}return!0}function Te(w,j){var X=[],Y=[],Q,ee;for(de(w,X,Y),Q=0,ee=Y.length;Q<ee;Q+=1)j.duplicates.push(X[Y[Q]]);j.usedDuplicates=new Array(ee)}function de(w,j,X){var Y,Q,ee;if(w!==null&&typeof w=="object")if(Q=j.indexOf(w),Q!==-1)X.indexOf(Q)===-1&&X.push(Q);else if(j.push(w),Array.isArray(w))for(Q=0,ee=w.length;Q<ee;Q+=1)de(w[Q],j,X);else for(Y=Object.keys(w),Q=0,ee=Y.length;Q<ee;Q+=1)de(w[Y[Q]],j,X)}function Le(w,j){j=j||{};var X=new ce(j);X.noRefs||Te(w,X);var Y=w;return X.replacer&&(Y=X.replacer.call({"":Y},"",Y)),ve(X,0,Y,!0,!0)?X.dump+`
`:""}return ti.dump=Le,ti}var zo;function na(){if(zo)return He;zo=1;var r=Hc(),d=jc();function h(u,c){return function(){throw new Error("Function yaml."+u+" is removed in js-yaml 4. Use yaml."+c+" instead, which is now safe by default.")}}return He.Type=je(),He.Schema=Nl(),He.FAILSAFE_SCHEMA=Ul(),He.JSON_SCHEMA=Bl(),He.CORE_SCHEMA=Hl(),He.DEFAULT_SCHEMA=ra(),He.load=r.load,He.loadAll=r.loadAll,He.dump=d.dump,He.YAMLException=gr(),He.types={binary:Wl(),float:Ml(),map:Ll(),null:$l(),pairs:Yl(),set:zl(),timestamp:jl(),bool:kl(),int:ql(),merge:Gl(),omap:Vl(),seq:xl(),str:Fl()},He.safeLoad=h("safeLoad","load"),He.safeLoadAll=h("safeLoadAll","loadAll"),He.safeDump=h("safeDump","dump"),He}var Vt={},Xo;function Gc(){if(Xo)return Vt;Xo=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.Lazy=void 0;class r{constructor(h){this._value=null,this.creator=h}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const h=this.creator();return this.value=h,h}set value(h){this._value=h,this.creator=null}}return Vt.Lazy=r,Vt}var xr={exports:{}},ri,Ko;function Hr(){if(Ko)return ri;Ko=1;const r="2.0.0",d=256,h=Number.MAX_SAFE_INTEGER||9007199254740991,u=16,c=d-6;return ri={MAX_LENGTH:d,MAX_SAFE_COMPONENT_LENGTH:u,MAX_SAFE_BUILD_LENGTH:c,MAX_SAFE_INTEGER:h,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:r,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ri}var ni,Jo;function jr(){return Jo||(Jo=1,ni=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...d)=>console.error("SEMVER",...d):()=>{}),ni}var Qo;function vr(){return Qo||(Qo=1,(function(r,d){const{MAX_SAFE_COMPONENT_LENGTH:h,MAX_SAFE_BUILD_LENGTH:u,MAX_LENGTH:c}=Hr(),l=jr();d=r.exports={};const t=d.re=[],f=d.safeRe=[],i=d.src=[],s=d.safeSrc=[],n=d.t={};let o=0;const a="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",c],[a,u]],g=p=>{for(const[A,C]of m)p=p.split(`${A}*`).join(`${A}{0,${C}}`).split(`${A}+`).join(`${A}{1,${C}}`);return p},y=(p,A,C)=>{const I=g(A),P=o++;l(p,P,A),n[p]=P,i[P]=A,s[P]=I,t[P]=new RegExp(A,C?"g":void 0),f[P]=new RegExp(I,C?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${a}*`),y("MAINVERSION",`(${i[n.NUMERICIDENTIFIER]})\\.(${i[n.NUMERICIDENTIFIER]})\\.(${i[n.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${i[n.NUMERICIDENTIFIERLOOSE]})\\.(${i[n.NUMERICIDENTIFIERLOOSE]})\\.(${i[n.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${i[n.NONNUMERICIDENTIFIER]}|${i[n.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${i[n.NONNUMERICIDENTIFIER]}|${i[n.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${i[n.PRERELEASEIDENTIFIER]}(?:\\.${i[n.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${i[n.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[n.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${a}+`),y("BUILD",`(?:\\+(${i[n.BUILDIDENTIFIER]}(?:\\.${i[n.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${i[n.MAINVERSION]}${i[n.PRERELEASE]}?${i[n.BUILD]}?`),y("FULL",`^${i[n.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${i[n.MAINVERSIONLOOSE]}${i[n.PRERELEASELOOSE]}?${i[n.BUILD]}?`),y("LOOSE",`^${i[n.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${i[n.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${i[n.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${i[n.XRANGEIDENTIFIER]})(?:\\.(${i[n.XRANGEIDENTIFIER]})(?:\\.(${i[n.XRANGEIDENTIFIER]})(?:${i[n.PRERELEASE]})?${i[n.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${i[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[n.XRANGEIDENTIFIERLOOSE]})(?:${i[n.PRERELEASELOOSE]})?${i[n.BUILD]}?)?)?`),y("XRANGE",`^${i[n.GTLT]}\\s*${i[n.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${i[n.GTLT]}\\s*${i[n.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${h}})(?:\\.(\\d{1,${h}}))?(?:\\.(\\d{1,${h}}))?`),y("COERCE",`${i[n.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",i[n.COERCEPLAIN]+`(?:${i[n.PRERELEASE]})?(?:${i[n.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",i[n.COERCE],!0),y("COERCERTLFULL",i[n.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${i[n.LONETILDE]}\\s+`,!0),d.tildeTrimReplace="$1~",y("TILDE",`^${i[n.LONETILDE]}${i[n.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${i[n.LONETILDE]}${i[n.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${i[n.LONECARET]}\\s+`,!0),d.caretTrimReplace="$1^",y("CARET",`^${i[n.LONECARET]}${i[n.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${i[n.LONECARET]}${i[n.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${i[n.GTLT]}\\s*(${i[n.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${i[n.GTLT]}\\s*(${i[n.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${i[n.GTLT]}\\s*(${i[n.LOOSEPLAIN]}|${i[n.XRANGEPLAIN]})`,!0),d.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${i[n.XRANGEPLAIN]})\\s+-\\s+(${i[n.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${i[n.XRANGEPLAINLOOSE]})\\s+-\\s+(${i[n.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(xr,xr.exports)),xr.exports}var ii,Zo;function ia(){if(Zo)return ii;Zo=1;const r=Object.freeze({loose:!0}),d=Object.freeze({});return ii=u=>u?typeof u!="object"?r:u:d,ii}var ai,es;function Xl(){if(es)return ai;es=1;const r=/^[0-9]+$/,d=(u,c)=>{const l=r.test(u),t=r.test(c);return l&&t&&(u=+u,c=+c),u===c?0:l&&!t?-1:t&&!l?1:u<c?-1:1};return ai={compareIdentifiers:d,rcompareIdentifiers:(u,c)=>d(c,u)},ai}var oi,ts;function Ge(){if(ts)return oi;ts=1;const r=jr(),{MAX_LENGTH:d,MAX_SAFE_INTEGER:h}=Hr(),{safeRe:u,t:c}=vr(),l=ia(),{compareIdentifiers:t}=Xl();class f{constructor(s,n){if(n=l(n),s instanceof f){if(s.loose===!!n.loose&&s.includePrerelease===!!n.includePrerelease)return s;s=s.version}else if(typeof s!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof s}".`);if(s.length>d)throw new TypeError(`version is longer than ${d} characters`);r("SemVer",s,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const o=s.trim().match(n.loose?u[c.LOOSE]:u[c.FULL]);if(!o)throw new TypeError(`Invalid Version: ${s}`);if(this.raw=s,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>h||this.major<0)throw new TypeError("Invalid major version");if(this.minor>h||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>h||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const m=+a;if(m>=0&&m<h)return m}return a}):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(s){if(r("SemVer.compare",this.version,this.options,s),!(s instanceof f)){if(typeof s=="string"&&s===this.version)return 0;s=new f(s,this.options)}return s.version===this.version?0:this.compareMain(s)||this.comparePre(s)}compareMain(s){return s instanceof f||(s=new f(s,this.options)),t(this.major,s.major)||t(this.minor,s.minor)||t(this.patch,s.patch)}comparePre(s){if(s instanceof f||(s=new f(s,this.options)),this.prerelease.length&&!s.prerelease.length)return-1;if(!this.prerelease.length&&s.prerelease.length)return 1;if(!this.prerelease.length&&!s.prerelease.length)return 0;let n=0;do{const o=this.prerelease[n],a=s.prerelease[n];if(r("prerelease compare",n,o,a),o===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(o===void 0)return-1;if(o===a)continue;return t(o,a)}while(++n)}compareBuild(s){s instanceof f||(s=new f(s,this.options));let n=0;do{const o=this.build[n],a=s.build[n];if(r("build compare",n,o,a),o===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(o===void 0)return-1;if(o===a)continue;return t(o,a)}while(++n)}inc(s,n,o){if(s.startsWith("pre")){if(!n&&o===!1)throw new Error("invalid increment argument: identifier is empty");if(n){const a=`-${n}`.match(this.options.loose?u[c.PRERELEASELOOSE]:u[c.PRERELEASE]);if(!a||a[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(s){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,o);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,o);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,o),this.inc("pre",n,o);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,o),this.inc("pre",n,o);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(o)?1:0;if(this.prerelease.length===0)this.prerelease=[a];else{let m=this.prerelease.length;for(;--m>=0;)typeof this.prerelease[m]=="number"&&(this.prerelease[m]++,m=-2);if(m===-1){if(n===this.prerelease.join(".")&&o===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(n){let m=[n,a];o===!1&&(m=[n]),t(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=m):this.prerelease=m}break}default:throw new Error(`invalid increment argument: ${s}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return oi=f,oi}var si,rs;function kt(){if(rs)return si;rs=1;const r=Ge();return si=(h,u,c=!1)=>{if(h instanceof r)return h;try{return new r(h,u)}catch(l){if(!c)return null;throw l}},si}var li,ns;function Wc(){if(ns)return li;ns=1;const r=kt();return li=(h,u)=>{const c=r(h,u);return c?c.version:null},li}var ui,is;function Vc(){if(is)return ui;is=1;const r=kt();return ui=(h,u)=>{const c=r(h.trim().replace(/^[=v]+/,""),u);return c?c.version:null},ui}var ci,as;function Yc(){if(as)return ci;as=1;const r=Ge();return ci=(h,u,c,l,t)=>{typeof c=="string"&&(t=l,l=c,c=void 0);try{return new r(h instanceof r?h.version:h,c).inc(u,l,t).version}catch{return null}},ci}var fi,os;function zc(){if(os)return fi;os=1;const r=kt();return fi=(h,u)=>{const c=r(h,null,!0),l=r(u,null,!0),t=c.compare(l);if(t===0)return null;const f=t>0,i=f?c:l,s=f?l:c,n=!!i.prerelease.length;if(!!s.prerelease.length&&!n){if(!s.patch&&!s.minor)return"major";if(s.compareMain(i)===0)return s.minor&&!s.patch?"minor":"patch"}const a=n?"pre":"";return c.major!==l.major?a+"major":c.minor!==l.minor?a+"minor":c.patch!==l.patch?a+"patch":"prerelease"},fi}var di,ss;function Xc(){if(ss)return di;ss=1;const r=Ge();return di=(h,u)=>new r(h,u).major,di}var hi,ls;function Kc(){if(ls)return hi;ls=1;const r=Ge();return hi=(h,u)=>new r(h,u).minor,hi}var pi,us;function Jc(){if(us)return pi;us=1;const r=Ge();return pi=(h,u)=>new r(h,u).patch,pi}var mi,cs;function Qc(){if(cs)return mi;cs=1;const r=kt();return mi=(h,u)=>{const c=r(h,u);return c&&c.prerelease.length?c.prerelease:null},mi}var gi,fs;function tt(){if(fs)return gi;fs=1;const r=Ge();return gi=(h,u,c)=>new r(h,c).compare(new r(u,c)),gi}var vi,ds;function Zc(){if(ds)return vi;ds=1;const r=tt();return vi=(h,u,c)=>r(u,h,c),vi}var Ei,hs;function ef(){if(hs)return Ei;hs=1;const r=tt();return Ei=(h,u)=>r(h,u,!0),Ei}var yi,ps;function aa(){if(ps)return yi;ps=1;const r=Ge();return yi=(h,u,c)=>{const l=new r(h,c),t=new r(u,c);return l.compare(t)||l.compareBuild(t)},yi}var wi,ms;function tf(){if(ms)return wi;ms=1;const r=aa();return wi=(h,u)=>h.sort((c,l)=>r(c,l,u)),wi}var _i,gs;function rf(){if(gs)return _i;gs=1;const r=aa();return _i=(h,u)=>h.sort((c,l)=>r(l,c,u)),_i}var Si,vs;function Gr(){if(vs)return Si;vs=1;const r=tt();return Si=(h,u,c)=>r(h,u,c)>0,Si}var Ai,Es;function oa(){if(Es)return Ai;Es=1;const r=tt();return Ai=(h,u,c)=>r(h,u,c)<0,Ai}var Ti,ys;function Kl(){if(ys)return Ti;ys=1;const r=tt();return Ti=(h,u,c)=>r(h,u,c)===0,Ti}var Ri,ws;function Jl(){if(ws)return Ri;ws=1;const r=tt();return Ri=(h,u,c)=>r(h,u,c)!==0,Ri}var Ci,_s;function sa(){if(_s)return Ci;_s=1;const r=tt();return Ci=(h,u,c)=>r(h,u,c)>=0,Ci}var bi,Ss;function la(){if(Ss)return bi;Ss=1;const r=tt();return bi=(h,u,c)=>r(h,u,c)<=0,bi}var Pi,As;function Ql(){if(As)return Pi;As=1;const r=Kl(),d=Jl(),h=Gr(),u=sa(),c=oa(),l=la();return Pi=(f,i,s,n)=>{switch(i){case"===":return typeof f=="object"&&(f=f.version),typeof s=="object"&&(s=s.version),f===s;case"!==":return typeof f=="object"&&(f=f.version),typeof s=="object"&&(s=s.version),f!==s;case"":case"=":case"==":return r(f,s,n);case"!=":return d(f,s,n);case">":return h(f,s,n);case">=":return u(f,s,n);case"<":return c(f,s,n);case"<=":return l(f,s,n);default:throw new TypeError(`Invalid operator: ${i}`)}},Pi}var Ii,Ts;function nf(){if(Ts)return Ii;Ts=1;const r=Ge(),d=kt(),{safeRe:h,t:u}=vr();return Ii=(l,t)=>{if(l instanceof r)return l;if(typeof l=="number"&&(l=String(l)),typeof l!="string")return null;t=t||{};let f=null;if(!t.rtl)f=l.match(t.includePrerelease?h[u.COERCEFULL]:h[u.COERCE]);else{const m=t.includePrerelease?h[u.COERCERTLFULL]:h[u.COERCERTL];let g;for(;(g=m.exec(l))&&(!f||f.index+f[0].length!==l.length);)(!f||g.index+g[0].length!==f.index+f[0].length)&&(f=g),m.lastIndex=g.index+g[1].length+g[2].length;m.lastIndex=-1}if(f===null)return null;const i=f[2],s=f[3]||"0",n=f[4]||"0",o=t.includePrerelease&&f[5]?`-${f[5]}`:"",a=t.includePrerelease&&f[6]?`+${f[6]}`:"";return d(`${i}.${s}.${n}${o}${a}`,t)},Ii}var Oi,Rs;function af(){if(Rs)return Oi;Rs=1;class r{constructor(){this.max=1e3,this.map=new Map}get(h){const u=this.map.get(h);if(u!==void 0)return this.map.delete(h),this.map.set(h,u),u}delete(h){return this.map.delete(h)}set(h,u){if(!this.delete(h)&&u!==void 0){if(this.map.size>=this.max){const l=this.map.keys().next().value;this.delete(l)}this.map.set(h,u)}return this}}return Oi=r,Oi}var Di,Cs;function rt(){if(Cs)return Di;Cs=1;const r=/\s+/g;class d{constructor(O,F){if(F=c(F),O instanceof d)return O.loose===!!F.loose&&O.includePrerelease===!!F.includePrerelease?O:new d(O.raw,F);if(O instanceof l)return this.raw=O.value,this.set=[[O]],this.formatted=void 0,this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=O.trim().replace(r," "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(J=>!y(J[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const J of this.set)if(J.length===1&&p(J[0])){this.set=[J];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let O=0;O<this.set.length;O++){O>0&&(this.formatted+="||");const F=this.set[O];for(let q=0;q<F.length;q++)q>0&&(this.formatted+=" "),this.formatted+=F[q].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(O){const q=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+O,J=u.get(q);if(J)return J;const W=this.options.loose,ne=W?i[s.HYPHENRANGELOOSE]:i[s.HYPHENRANGE];O=O.replace(ne,x(this.options.includePrerelease)),t("hyphen replace",O),O=O.replace(i[s.COMPARATORTRIM],n),t("comparator trim",O),O=O.replace(i[s.TILDETRIM],o),t("tilde trim",O),O=O.replace(i[s.CARETTRIM],a),t("caret trim",O);let ce=O.split(" ").map(K=>C(K,this.options)).join(" ").split(/\s+/).map(K=>U(K,this.options));W&&(ce=ce.filter(K=>(t("loose invalid filter",K,this.options),!!K.match(i[s.COMPARATORLOOSE])))),t("range list",ce);const ue=new Map,ie=ce.map(K=>new l(K,this.options));for(const K of ie){if(y(K))return[K];ue.set(K.value,K)}ue.size>1&&ue.has("")&&ue.delete("");const Ae=[...ue.values()];return u.set(q,Ae),Ae}intersects(O,F){if(!(O instanceof d))throw new TypeError("a Range is required");return this.set.some(q=>A(q,F)&&O.set.some(J=>A(J,F)&&q.every(W=>J.every(ne=>W.intersects(ne,F)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new f(O,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(M(this.set[F],O,this.options))return!0;return!1}}Di=d;const h=af(),u=new h,c=ia(),l=Wr(),t=jr(),f=Ge(),{safeRe:i,t:s,comparatorTrimReplace:n,tildeTrimReplace:o,caretTrimReplace:a}=vr(),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=Hr(),y=D=>D.value==="<0.0.0-0",p=D=>D.value==="",A=(D,O)=>{let F=!0;const q=D.slice();let J=q.pop();for(;F&&q.length;)F=q.every(W=>J.intersects(W,O)),J=q.pop();return F},C=(D,O)=>(t("comp",D,O),D=R(D,O),t("caret",D),D=P(D,O),t("tildes",D),D=T(D,O),t("xrange",D),D=k(D,O),t("stars",D),D),I=D=>!D||D.toLowerCase()==="x"||D==="*",P=(D,O)=>D.trim().split(/\s+/).map(F=>$(F,O)).join(" "),$=(D,O)=>{const F=O.loose?i[s.TILDELOOSE]:i[s.TILDE];return D.replace(F,(q,J,W,ne,ce)=>{t("tilde",D,q,J,W,ne,ce);let ue;return I(J)?ue="":I(W)?ue=`>=${J}.0.0 <${+J+1}.0.0-0`:I(ne)?ue=`>=${J}.${W}.0 <${J}.${+W+1}.0-0`:ce?(t("replaceTilde pr",ce),ue=`>=${J}.${W}.${ne}-${ce} <${J}.${+W+1}.0-0`):ue=`>=${J}.${W}.${ne} <${J}.${+W+1}.0-0`,t("tilde return",ue),ue})},R=(D,O)=>D.trim().split(/\s+/).map(F=>_(F,O)).join(" "),_=(D,O)=>{t("caret",D,O);const F=O.loose?i[s.CARETLOOSE]:i[s.CARET],q=O.includePrerelease?"-0":"";return D.replace(F,(J,W,ne,ce,ue)=>{t("caret",D,J,W,ne,ce,ue);let ie;return I(W)?ie="":I(ne)?ie=`>=${W}.0.0${q} <${+W+1}.0.0-0`:I(ce)?W==="0"?ie=`>=${W}.${ne}.0${q} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.0${q} <${+W+1}.0.0-0`:ue?(t("replaceCaret pr",ue),W==="0"?ne==="0"?ie=`>=${W}.${ne}.${ce}-${ue} <${W}.${ne}.${+ce+1}-0`:ie=`>=${W}.${ne}.${ce}-${ue} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.${ce}-${ue} <${+W+1}.0.0-0`):(t("no pr"),W==="0"?ne==="0"?ie=`>=${W}.${ne}.${ce}${q} <${W}.${ne}.${+ce+1}-0`:ie=`>=${W}.${ne}.${ce}${q} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.${ce} <${+W+1}.0.0-0`),t("caret return",ie),ie})},T=(D,O)=>(t("replaceXRanges",D,O),D.split(/\s+/).map(F=>E(F,O)).join(" ")),E=(D,O)=>{D=D.trim();const F=O.loose?i[s.XRANGELOOSE]:i[s.XRANGE];return D.replace(F,(q,J,W,ne,ce,ue)=>{t("xRange",D,q,J,W,ne,ce,ue);const ie=I(W),Ae=ie||I(ne),K=Ae||I(ce),Ee=K;return J==="="&&Ee&&(J=""),ue=O.includePrerelease?"-0":"",ie?J===">"||J==="<"?q="<0.0.0-0":q="*":J&&Ee?(Ae&&(ne=0),ce=0,J===">"?(J=">=",Ae?(W=+W+1,ne=0,ce=0):(ne=+ne+1,ce=0)):J==="<="&&(J="<",Ae?W=+W+1:ne=+ne+1),J==="<"&&(ue="-0"),q=`${J+W}.${ne}.${ce}${ue}`):Ae?q=`>=${W}.0.0${ue} <${+W+1}.0.0-0`:K&&(q=`>=${W}.${ne}.0${ue} <${W}.${+ne+1}.0-0`),t("xRange return",q),q})},k=(D,O)=>(t("replaceStars",D,O),D.trim().replace(i[s.STAR],"")),U=(D,O)=>(t("replaceGTE0",D,O),D.trim().replace(i[O.includePrerelease?s.GTE0PRE:s.GTE0],"")),x=D=>(O,F,q,J,W,ne,ce,ue,ie,Ae,K,Ee)=>(I(q)?F="":I(J)?F=`>=${q}.0.0${D?"-0":""}`:I(W)?F=`>=${q}.${J}.0${D?"-0":""}`:ne?F=`>=${F}`:F=`>=${F}${D?"-0":""}`,I(ie)?ue="":I(Ae)?ue=`<${+ie+1}.0.0-0`:I(K)?ue=`<${ie}.${+Ae+1}.0-0`:Ee?ue=`<=${ie}.${Ae}.${K}-${Ee}`:D?ue=`<${ie}.${Ae}.${+K+1}-0`:ue=`<=${ue}`,`${F} ${ue}`.trim()),M=(D,O,F)=>{for(let q=0;q<D.length;q++)if(!D[q].test(O))return!1;if(O.prerelease.length&&!F.includePrerelease){for(let q=0;q<D.length;q++)if(t(D[q].semver),D[q].semver!==l.ANY&&D[q].semver.prerelease.length>0){const J=D[q].semver;if(J.major===O.major&&J.minor===O.minor&&J.patch===O.patch)return!0}return!1}return!0};return Di}var Ni,bs;function Wr(){if(bs)return Ni;bs=1;const r=Symbol("SemVer ANY");class d{static get ANY(){return r}constructor(n,o){if(o=h(o),n instanceof d){if(n.loose===!!o.loose)return n;n=n.value}n=n.trim().split(/\s+/).join(" "),t("comparator",n,o),this.options=o,this.loose=!!o.loose,this.parse(n),this.semver===r?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}parse(n){const o=this.options.loose?u[c.COMPARATORLOOSE]:u[c.COMPARATOR],a=n.match(o);if(!a)throw new TypeError(`Invalid comparator: ${n}`);this.operator=a[1]!==void 0?a[1]:"",this.operator==="="&&(this.operator=""),a[2]?this.semver=new f(a[2],this.options.loose):this.semver=r}toString(){return this.value}test(n){if(t("Comparator.test",n,this.options.loose),this.semver===r||n===r)return!0;if(typeof n=="string")try{n=new f(n,this.options)}catch{return!1}return l(n,this.operator,this.semver,this.options)}intersects(n,o){if(!(n instanceof d))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new i(n.value,o).test(this.value):n.operator===""?n.value===""?!0:new i(this.value,o).test(n.semver):(o=h(o),o.includePrerelease&&(this.value==="<0.0.0-0"||n.value==="<0.0.0-0")||!o.includePrerelease&&(this.value.startsWith("<0.0.0")||n.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&n.operator.startsWith(">")||this.operator.startsWith("<")&&n.operator.startsWith("<")||this.semver.version===n.semver.version&&this.operator.includes("=")&&n.operator.includes("=")||l(this.semver,"<",n.semver,o)&&this.operator.startsWith(">")&&n.operator.startsWith("<")||l(this.semver,">",n.semver,o)&&this.operator.startsWith("<")&&n.operator.startsWith(">")))}}Ni=d;const h=ia(),{safeRe:u,t:c}=vr(),l=Ql(),t=jr(),f=Ge(),i=rt();return Ni}var Fi,Ps;function Vr(){if(Ps)return Fi;Ps=1;const r=rt();return Fi=(h,u,c)=>{try{u=new r(u,c)}catch{return!1}return u.test(h)},Fi}var xi,Is;function of(){if(Is)return xi;Is=1;const r=rt();return xi=(h,u)=>new r(h,u).set.map(c=>c.map(l=>l.value).join(" ").trim().split(" ")),xi}var Li,Os;function sf(){if(Os)return Li;Os=1;const r=Ge(),d=rt();return Li=(u,c,l)=>{let t=null,f=null,i=null;try{i=new d(c,l)}catch{return null}return u.forEach(s=>{i.test(s)&&(!t||f.compare(s)===-1)&&(t=s,f=new r(t,l))}),t},Li}var Ui,Ds;function lf(){if(Ds)return Ui;Ds=1;const r=Ge(),d=rt();return Ui=(u,c,l)=>{let t=null,f=null,i=null;try{i=new d(c,l)}catch{return null}return u.forEach(s=>{i.test(s)&&(!t||f.compare(s)===1)&&(t=s,f=new r(t,l))}),t},Ui}var $i,Ns;function uf(){if(Ns)return $i;Ns=1;const r=Ge(),d=rt(),h=Gr();return $i=(c,l)=>{c=new d(c,l);let t=new r("0.0.0");if(c.test(t)||(t=new r("0.0.0-0"),c.test(t)))return t;t=null;for(let f=0;f<c.set.length;++f){const i=c.set[f];let s=null;i.forEach(n=>{const o=new r(n.semver.version);switch(n.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!s||h(o,s))&&(s=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${n.operator}`)}}),s&&(!t||h(t,s))&&(t=s)}return t&&c.test(t)?t:null},$i}var ki,Fs;function cf(){if(Fs)return ki;Fs=1;const r=rt();return ki=(h,u)=>{try{return new r(h,u).range||"*"}catch{return null}},ki}var qi,xs;function ua(){if(xs)return qi;xs=1;const r=Ge(),d=Wr(),{ANY:h}=d,u=rt(),c=Vr(),l=Gr(),t=oa(),f=la(),i=sa();return qi=(n,o,a,m)=>{n=new r(n,m),o=new u(o,m);let g,y,p,A,C;switch(a){case">":g=l,y=f,p=t,A=">",C=">=";break;case"<":g=t,y=i,p=l,A="<",C="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(c(n,o,m))return!1;for(let I=0;I<o.set.length;++I){const P=o.set[I];let $=null,R=null;if(P.forEach(_=>{_.semver===h&&(_=new d(">=0.0.0")),$=$||_,R=R||_,g(_.semver,$.semver,m)?$=_:p(_.semver,R.semver,m)&&(R=_)}),$.operator===A||$.operator===C||(!R.operator||R.operator===A)&&y(n,R.semver))return!1;if(R.operator===C&&p(n,R.semver))return!1}return!0},qi}var Mi,Ls;function ff(){if(Ls)return Mi;Ls=1;const r=ua();return Mi=(h,u,c)=>r(h,u,">",c),Mi}var Bi,Us;function df(){if(Us)return Bi;Us=1;const r=ua();return Bi=(h,u,c)=>r(h,u,"<",c),Bi}var Hi,$s;function hf(){if($s)return Hi;$s=1;const r=rt();return Hi=(h,u,c)=>(h=new r(h,c),u=new r(u,c),h.intersects(u,c)),Hi}var ji,ks;function pf(){if(ks)return ji;ks=1;const r=Vr(),d=tt();return ji=(h,u,c)=>{const l=[];let t=null,f=null;const i=h.sort((a,m)=>d(a,m,c));for(const a of i)r(a,u,c)?(f=a,t||(t=a)):(f&&l.push([t,f]),f=null,t=null);t&&l.push([t,null]);const s=[];for(const[a,m]of l)a===m?s.push(a):!m&&a===i[0]?s.push("*"):m?a===i[0]?s.push(`<=${m}`):s.push(`${a} - ${m}`):s.push(`>=${a}`);const n=s.join(" || "),o=typeof u.raw=="string"?u.raw:String(u);return n.length<o.length?n:u},ji}var Gi,qs;function mf(){if(qs)return Gi;qs=1;const r=rt(),d=Wr(),{ANY:h}=d,u=Vr(),c=tt(),l=(o,a,m={})=>{if(o===a)return!0;o=new r(o,m),a=new r(a,m);let g=!1;e:for(const y of o.set){for(const p of a.set){const A=i(y,p,m);if(g=g||A!==null,A)continue e}if(g)return!1}return!0},t=[new d(">=0.0.0-0")],f=[new d(">=0.0.0")],i=(o,a,m)=>{if(o===a)return!0;if(o.length===1&&o[0].semver===h){if(a.length===1&&a[0].semver===h)return!0;m.includePrerelease?o=t:o=f}if(a.length===1&&a[0].semver===h){if(m.includePrerelease)return!0;a=f}const g=new Set;let y,p;for(const T of o)T.operator===">"||T.operator===">="?y=s(y,T,m):T.operator==="<"||T.operator==="<="?p=n(p,T,m):g.add(T.semver);if(g.size>1)return null;let A;if(y&&p){if(A=c(y.semver,p.semver,m),A>0)return null;if(A===0&&(y.operator!==">="||p.operator!=="<="))return null}for(const T of g){if(y&&!u(T,String(y),m)||p&&!u(T,String(p),m))return null;for(const E of a)if(!u(T,String(E),m))return!1;return!0}let C,I,P,$,R=p&&!m.includePrerelease&&p.semver.prerelease.length?p.semver:!1,_=y&&!m.includePrerelease&&y.semver.prerelease.length?y.semver:!1;R&&R.prerelease.length===1&&p.operator==="<"&&R.prerelease[0]===0&&(R=!1);for(const T of a){if($=$||T.operator===">"||T.operator===">=",P=P||T.operator==="<"||T.operator==="<=",y){if(_&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===_.major&&T.semver.minor===_.minor&&T.semver.patch===_.patch&&(_=!1),T.operator===">"||T.operator===">="){if(C=s(y,T,m),C===T&&C!==y)return!1}else if(y.operator===">="&&!u(y.semver,String(T),m))return!1}if(p){if(R&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===R.major&&T.semver.minor===R.minor&&T.semver.patch===R.patch&&(R=!1),T.operator==="<"||T.operator==="<="){if(I=n(p,T,m),I===T&&I!==p)return!1}else if(p.operator==="<="&&!u(p.semver,String(T),m))return!1}if(!T.operator&&(p||y)&&A!==0)return!1}return!(y&&P&&!p&&A!==0||p&&$&&!y&&A!==0||_||R)},s=(o,a,m)=>{if(!o)return a;const g=c(o.semver,a.semver,m);return g>0?o:g<0||a.operator===">"&&o.operator===">="?a:o},n=(o,a,m)=>{if(!o)return a;const g=c(o.semver,a.semver,m);return g<0?o:g>0||a.operator==="<"&&o.operator==="<="?a:o};return Gi=l,Gi}var Wi,Ms;function Zl(){if(Ms)return Wi;Ms=1;const r=vr(),d=Hr(),h=Ge(),u=Xl(),c=kt(),l=Wc(),t=Vc(),f=Yc(),i=zc(),s=Xc(),n=Kc(),o=Jc(),a=Qc(),m=tt(),g=Zc(),y=ef(),p=aa(),A=tf(),C=rf(),I=Gr(),P=oa(),$=Kl(),R=Jl(),_=sa(),T=la(),E=Ql(),k=nf(),U=Wr(),x=rt(),M=Vr(),D=of(),O=sf(),F=lf(),q=uf(),J=cf(),W=ua(),ne=ff(),ce=df(),ue=hf(),ie=pf(),Ae=mf();return Wi={parse:c,valid:l,clean:t,inc:f,diff:i,major:s,minor:n,patch:o,prerelease:a,compare:m,rcompare:g,compareLoose:y,compareBuild:p,sort:A,rsort:C,gt:I,lt:P,eq:$,neq:R,gte:_,lte:T,cmp:E,coerce:k,Comparator:U,Range:x,satisfies:M,toComparators:D,maxSatisfying:O,minSatisfying:F,minVersion:q,validRange:J,outside:W,gtr:ne,ltr:ce,intersects:ue,simplifyRange:ie,subset:Ae,SemVer:h,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:d.SEMVER_SPEC_VERSION,RELEASE_TYPES:d.RELEASE_TYPES,compareIdentifiers:u.compareIdentifiers,rcompareIdentifiers:u.rcompareIdentifiers},Wi}var Nt={},fr={exports:{}};fr.exports;var Bs;function gf(){return Bs||(Bs=1,(function(r,d){var h=200,u="__lodash_hash_undefined__",c=1,l=2,t=9007199254740991,f="[object Arguments]",i="[object Array]",s="[object AsyncFunction]",n="[object Boolean]",o="[object Date]",a="[object Error]",m="[object Function]",g="[object GeneratorFunction]",y="[object Map]",p="[object Number]",A="[object Null]",C="[object Object]",I="[object Promise]",P="[object Proxy]",$="[object RegExp]",R="[object Set]",_="[object String]",T="[object Symbol]",E="[object Undefined]",k="[object WeakMap]",U="[object ArrayBuffer]",x="[object DataView]",M="[object Float32Array]",D="[object Float64Array]",O="[object Int8Array]",F="[object Int16Array]",q="[object Int32Array]",J="[object Uint8Array]",W="[object Uint8ClampedArray]",ne="[object Uint16Array]",ce="[object Uint32Array]",ue=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,Ae=/^(?:0|[1-9]\d*)$/,K={};K[M]=K[D]=K[O]=K[F]=K[q]=K[J]=K[W]=K[ne]=K[ce]=!0,K[f]=K[i]=K[U]=K[n]=K[x]=K[o]=K[a]=K[m]=K[y]=K[p]=K[C]=K[$]=K[R]=K[_]=K[k]=!1;var Ee=typeof et=="object"&&et&&et.Object===Object&&et,S=typeof self=="object"&&self&&self.Object===Object&&self,v=Ee||S||Function("return this")(),H=d&&!d.nodeType&&d,N=H&&!0&&r&&!r.nodeType&&r,le=N&&N.exports===H,me=le&&Ee.process,pe=(function(){try{return me&&me.binding&&me.binding("util")}catch{}})(),_e=pe&&pe.isTypedArray;function ye(b,L){for(var z=-1,se=b==null?0:b.length,Oe=0,Se=[];++z<se;){var Fe=b[z];L(Fe,z,b)&&(Se[Oe++]=Fe)}return Se}function xe(b,L){for(var z=-1,se=L.length,Oe=b.length;++z<se;)b[Oe+z]=L[z];return b}function be(b,L){for(var z=-1,se=b==null?0:b.length;++z<se;)if(L(b[z],z,b))return!0;return!1}function qe(b,L){for(var z=-1,se=Array(b);++z<b;)se[z]=L(z);return se}function mt(b){return function(L){return b(L)}}function at(b,L){return b.has(L)}function e(b,L){return b?.[L]}function B(b){var L=-1,z=Array(b.size);return b.forEach(function(se,Oe){z[++L]=[Oe,se]}),z}function G(b,L){return function(z){return b(L(z))}}function re(b){var L=-1,z=Array(b.size);return b.forEach(function(se){z[++L]=se}),z}var V=Array.prototype,te=Function.prototype,Z=Object.prototype,ae=v["__core-js_shared__"],ge=te.toString,ve=Z.hasOwnProperty,Te=(function(){var b=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""})(),de=Z.toString,Le=RegExp("^"+ge.call(ve).replace(ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=le?v.Buffer:void 0,j=v.Symbol,X=v.Uint8Array,Y=Z.propertyIsEnumerable,Q=V.splice,ee=j?j.toStringTag:void 0,fe=Object.getOwnPropertySymbols,oe=w?w.isBuffer:void 0,he=G(Object.keys,Object),we=Ot(v,"DataView"),Pe=Ot(v,"Map"),Ne=Ot(v,"Promise"),Re=Ot(v,"Set"),It=Ot(v,"WeakMap"),Qe=Ot(Object,"create"),gt=yt(we),lu=yt(Pe),uu=yt(Ne),cu=yt(Re),fu=yt(It),da=j?j.prototype:void 0,Yr=da?da.valueOf:void 0;function vt(b){var L=-1,z=b==null?0:b.length;for(this.clear();++L<z;){var se=b[L];this.set(se[0],se[1])}}function du(){this.__data__=Qe?Qe(null):{},this.size=0}function hu(b){var L=this.has(b)&&delete this.__data__[b];return this.size-=L?1:0,L}function pu(b){var L=this.__data__;if(Qe){var z=L[b];return z===u?void 0:z}return ve.call(L,b)?L[b]:void 0}function mu(b){var L=this.__data__;return Qe?L[b]!==void 0:ve.call(L,b)}function gu(b,L){var z=this.__data__;return this.size+=this.has(b)?0:1,z[b]=Qe&&L===void 0?u:L,this}vt.prototype.clear=du,vt.prototype.delete=hu,vt.prototype.get=pu,vt.prototype.has=mu,vt.prototype.set=gu;function ot(b){var L=-1,z=b==null?0:b.length;for(this.clear();++L<z;){var se=b[L];this.set(se[0],se[1])}}function vu(){this.__data__=[],this.size=0}function Eu(b){var L=this.__data__,z=yr(L,b);if(z<0)return!1;var se=L.length-1;return z==se?L.pop():Q.call(L,z,1),--this.size,!0}function yu(b){var L=this.__data__,z=yr(L,b);return z<0?void 0:L[z][1]}function wu(b){return yr(this.__data__,b)>-1}function _u(b,L){var z=this.__data__,se=yr(z,b);return se<0?(++this.size,z.push([b,L])):z[se][1]=L,this}ot.prototype.clear=vu,ot.prototype.delete=Eu,ot.prototype.get=yu,ot.prototype.has=wu,ot.prototype.set=_u;function Et(b){var L=-1,z=b==null?0:b.length;for(this.clear();++L<z;){var se=b[L];this.set(se[0],se[1])}}function Su(){this.size=0,this.__data__={hash:new vt,map:new(Pe||ot),string:new vt}}function Au(b){var L=wr(this,b).delete(b);return this.size-=L?1:0,L}function Tu(b){return wr(this,b).get(b)}function Ru(b){return wr(this,b).has(b)}function Cu(b,L){var z=wr(this,b),se=z.size;return z.set(b,L),this.size+=z.size==se?0:1,this}Et.prototype.clear=Su,Et.prototype.delete=Au,Et.prototype.get=Tu,Et.prototype.has=Ru,Et.prototype.set=Cu;function Er(b){var L=-1,z=b==null?0:b.length;for(this.__data__=new Et;++L<z;)this.add(b[L])}function bu(b){return this.__data__.set(b,u),this}function Pu(b){return this.__data__.has(b)}Er.prototype.add=Er.prototype.push=bu,Er.prototype.has=Pu;function ut(b){var L=this.__data__=new ot(b);this.size=L.size}function Iu(){this.__data__=new ot,this.size=0}function Ou(b){var L=this.__data__,z=L.delete(b);return this.size=L.size,z}function Du(b){return this.__data__.get(b)}function Nu(b){return this.__data__.has(b)}function Fu(b,L){var z=this.__data__;if(z instanceof ot){var se=z.__data__;if(!Pe||se.length<h-1)return se.push([b,L]),this.size=++z.size,this;z=this.__data__=new Et(se)}return z.set(b,L),this.size=z.size,this}ut.prototype.clear=Iu,ut.prototype.delete=Ou,ut.prototype.get=Du,ut.prototype.has=Nu,ut.prototype.set=Fu;function xu(b,L){var z=_r(b),se=!z&&Xu(b),Oe=!z&&!se&&zr(b),Se=!z&&!se&&!Oe&&_a(b),Fe=z||se||Oe||Se,Ue=Fe?qe(b.length,String):[],$e=Ue.length;for(var De in b)ve.call(b,De)&&!(Fe&&(De=="length"||Oe&&(De=="offset"||De=="parent")||Se&&(De=="buffer"||De=="byteLength"||De=="byteOffset")||Gu(De,$e)))&&Ue.push(De);return Ue}function yr(b,L){for(var z=b.length;z--;)if(va(b[z][0],L))return z;return-1}function Lu(b,L,z){var se=L(b);return _r(b)?se:xe(se,z(b))}function Mt(b){return b==null?b===void 0?E:A:ee&&ee in Object(b)?Hu(b):zu(b)}function ha(b){return Bt(b)&&Mt(b)==f}function pa(b,L,z,se,Oe){return b===L?!0:b==null||L==null||!Bt(b)&&!Bt(L)?b!==b&&L!==L:Uu(b,L,z,se,pa,Oe)}function Uu(b,L,z,se,Oe,Se){var Fe=_r(b),Ue=_r(L),$e=Fe?i:ct(b),De=Ue?i:ct(L);$e=$e==f?C:$e,De=De==f?C:De;var Ve=$e==C,Ze=De==C,Me=$e==De;if(Me&&zr(b)){if(!zr(L))return!1;Fe=!0,Ve=!1}if(Me&&!Ve)return Se||(Se=new ut),Fe||_a(b)?ma(b,L,z,se,Oe,Se):Mu(b,L,$e,z,se,Oe,Se);if(!(z&c)){var Xe=Ve&&ve.call(b,"__wrapped__"),Ke=Ze&&ve.call(L,"__wrapped__");if(Xe||Ke){var ft=Xe?b.value():b,st=Ke?L.value():L;return Se||(Se=new ut),Oe(ft,st,z,se,Se)}}return Me?(Se||(Se=new ut),Bu(b,L,z,se,Oe,Se)):!1}function $u(b){if(!wa(b)||Vu(b))return!1;var L=Ea(b)?Le:ie;return L.test(yt(b))}function ku(b){return Bt(b)&&ya(b.length)&&!!K[Mt(b)]}function qu(b){if(!Yu(b))return he(b);var L=[];for(var z in Object(b))ve.call(b,z)&&z!="constructor"&&L.push(z);return L}function ma(b,L,z,se,Oe,Se){var Fe=z&c,Ue=b.length,$e=L.length;if(Ue!=$e&&!(Fe&&$e>Ue))return!1;var De=Se.get(b);if(De&&Se.get(L))return De==L;var Ve=-1,Ze=!0,Me=z&l?new Er:void 0;for(Se.set(b,L),Se.set(L,b);++Ve<Ue;){var Xe=b[Ve],Ke=L[Ve];if(se)var ft=Fe?se(Ke,Xe,Ve,L,b,Se):se(Xe,Ke,Ve,b,L,Se);if(ft!==void 0){if(ft)continue;Ze=!1;break}if(Me){if(!be(L,function(st,wt){if(!at(Me,wt)&&(Xe===st||Oe(Xe,st,z,se,Se)))return Me.push(wt)})){Ze=!1;break}}else if(!(Xe===Ke||Oe(Xe,Ke,z,se,Se))){Ze=!1;break}}return Se.delete(b),Se.delete(L),Ze}function Mu(b,L,z,se,Oe,Se,Fe){switch(z){case x:if(b.byteLength!=L.byteLength||b.byteOffset!=L.byteOffset)return!1;b=b.buffer,L=L.buffer;case U:return!(b.byteLength!=L.byteLength||!Se(new X(b),new X(L)));case n:case o:case p:return va(+b,+L);case a:return b.name==L.name&&b.message==L.message;case $:case _:return b==L+"";case y:var Ue=B;case R:var $e=se&c;if(Ue||(Ue=re),b.size!=L.size&&!$e)return!1;var De=Fe.get(b);if(De)return De==L;se|=l,Fe.set(b,L);var Ve=ma(Ue(b),Ue(L),se,Oe,Se,Fe);return Fe.delete(b),Ve;case T:if(Yr)return Yr.call(b)==Yr.call(L)}return!1}function Bu(b,L,z,se,Oe,Se){var Fe=z&c,Ue=ga(b),$e=Ue.length,De=ga(L),Ve=De.length;if($e!=Ve&&!Fe)return!1;for(var Ze=$e;Ze--;){var Me=Ue[Ze];if(!(Fe?Me in L:ve.call(L,Me)))return!1}var Xe=Se.get(b);if(Xe&&Se.get(L))return Xe==L;var Ke=!0;Se.set(b,L),Se.set(L,b);for(var ft=Fe;++Ze<$e;){Me=Ue[Ze];var st=b[Me],wt=L[Me];if(se)var Sa=Fe?se(wt,st,Me,L,b,Se):se(st,wt,Me,b,L,Se);if(!(Sa===void 0?st===wt||Oe(st,wt,z,se,Se):Sa)){Ke=!1;break}ft||(ft=Me=="constructor")}if(Ke&&!ft){var Sr=b.constructor,Ar=L.constructor;Sr!=Ar&&"constructor"in b&&"constructor"in L&&!(typeof Sr=="function"&&Sr instanceof Sr&&typeof Ar=="function"&&Ar instanceof Ar)&&(Ke=!1)}return Se.delete(b),Se.delete(L),Ke}function ga(b){return Lu(b,Qu,ju)}function wr(b,L){var z=b.__data__;return Wu(L)?z[typeof L=="string"?"string":"hash"]:z.map}function Ot(b,L){var z=e(b,L);return $u(z)?z:void 0}function Hu(b){var L=ve.call(b,ee),z=b[ee];try{b[ee]=void 0;var se=!0}catch{}var Oe=de.call(b);return se&&(L?b[ee]=z:delete b[ee]),Oe}var ju=fe?function(b){return b==null?[]:(b=Object(b),ye(fe(b),function(L){return Y.call(b,L)}))}:Zu,ct=Mt;(we&&ct(new we(new ArrayBuffer(1)))!=x||Pe&&ct(new Pe)!=y||Ne&&ct(Ne.resolve())!=I||Re&&ct(new Re)!=R||It&&ct(new It)!=k)&&(ct=function(b){var L=Mt(b),z=L==C?b.constructor:void 0,se=z?yt(z):"";if(se)switch(se){case gt:return x;case lu:return y;case uu:return I;case cu:return R;case fu:return k}return L});function Gu(b,L){return L=L??t,!!L&&(typeof b=="number"||Ae.test(b))&&b>-1&&b%1==0&&b<L}function Wu(b){var L=typeof b;return L=="string"||L=="number"||L=="symbol"||L=="boolean"?b!=="__proto__":b===null}function Vu(b){return!!Te&&Te in b}function Yu(b){var L=b&&b.constructor,z=typeof L=="function"&&L.prototype||Z;return b===z}function zu(b){return de.call(b)}function yt(b){if(b!=null){try{return ge.call(b)}catch{}try{return b+""}catch{}}return""}function va(b,L){return b===L||b!==b&&L!==L}var Xu=ha((function(){return arguments})())?ha:function(b){return Bt(b)&&ve.call(b,"callee")&&!Y.call(b,"callee")},_r=Array.isArray;function Ku(b){return b!=null&&ya(b.length)&&!Ea(b)}var zr=oe||ec;function Ju(b,L){return pa(b,L)}function Ea(b){if(!wa(b))return!1;var L=Mt(b);return L==m||L==g||L==s||L==P}function ya(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=t}function wa(b){var L=typeof b;return b!=null&&(L=="object"||L=="function")}function Bt(b){return b!=null&&typeof b=="object"}var _a=_e?mt(_e):ku;function Qu(b){return Ku(b)?xu(b):qu(b)}function Zu(){return[]}function ec(){return!1}r.exports=Ju})(fr,fr.exports)),fr.exports}var Hs;function vf(){if(Hs)return Nt;Hs=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.DownloadedUpdateHelper=void 0,Nt.createTempUpdateFile=f;const r=pr,d=Ye,h=gf(),u=pt(),c=Ie;let l=class{constructor(s){this.cacheDir=s,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return c.join(this.cacheDir,"pending")}async validateDownloadedPath(s,n,o,a){if(this.versionInfo!=null&&this.file===s&&this.fileInfo!=null)return h(this.versionInfo,n)&&h(this.fileInfo.info,o.info)&&await(0,u.pathExists)(s)?s:null;const m=await this.getValidCachedUpdateFile(o,a);return m===null?null:(a.info(`Update has already been downloaded to ${s}).`),this._file=m,m)}async setDownloadedFile(s,n,o,a,m,g){this._file=s,this._packageFile=n,this.versionInfo=o,this.fileInfo=a,this._downloadedFileInfo={fileName:m,sha512:a.info.sha512,isAdminRightsRequired:a.info.isAdminRightsRequired===!0},g&&await(0,u.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,u.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(s,n){const o=this.getUpdateInfoFile();if(!await(0,u.pathExists)(o))return null;let m;try{m=await(0,u.readJson)(o)}catch(A){let C="No cached update info available";return A.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),C+=` (error on read: ${A.message})`),n.info(C),null}if(!(m?.fileName!==null))return n.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(s.info.sha512!==m.sha512)return n.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${m.sha512}, expected: ${s.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const y=c.join(this.cacheDirForPendingUpdate,m.fileName);if(!await(0,u.pathExists)(y))return n.info("Cached update file doesn't exist"),null;const p=await t(y);return s.info.sha512!==p?(n.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${p}, expected: ${s.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=m,y)}getUpdateInfoFile(){return c.join(this.cacheDirForPendingUpdate,"update-info.json")}};Nt.DownloadedUpdateHelper=l;function t(i,s="sha512",n="base64",o){return new Promise((a,m)=>{const g=(0,r.createHash)(s);g.on("error",m).setEncoding(n),(0,d.createReadStream)(i,{...o,highWaterMark:1024*1024}).on("error",m).on("end",()=>{g.end(),a(g.read())}).pipe(g,{end:!1})})}async function f(i,s,n){let o=0,a=c.join(s,i);for(let m=0;m<3;m++)try{return await(0,u.unlink)(a),a}catch(g){if(g.code==="ENOENT")return a;n.warn(`Error on remove temp update file: ${g}`),a=c.join(s,`${o++}-${i}`)}return a}return Nt}var Yt={},Lr={},js;function Ef(){if(js)return Lr;js=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.getAppCacheDir=h;const r=Ie,d=qr;function h(){const u=(0,d.homedir)();let c;return process.platform==="win32"?c=process.env.LOCALAPPDATA||r.join(u,"AppData","Local"):process.platform==="darwin"?c=r.join(u,"Library","Caches"):c=process.env.XDG_CACHE_HOME||r.join(u,".cache"),c}return Lr}var Gs;function yf(){if(Gs)return Yt;Gs=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.ElectronAppAdapter=void 0;const r=Ie,d=Ef();let h=class{constructor(c=Ce.app){this.app=c}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?r.join(process.resourcesPath,"app-update.yml"):r.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,d.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(c){this.app.once("quit",(l,t)=>c(t))}};return Yt.ElectronAppAdapter=h,Yt}var Vi={},Ws;function wf(){return Ws||(Ws=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ElectronHttpExecutor=r.NET_SESSION_NAME=void 0,r.getNetSession=h;const d=ke();r.NET_SESSION_NAME="electron-updater";function h(){return Ce.session.fromPartition(r.NET_SESSION_NAME,{cache:!1})}class u extends d.HttpExecutor{constructor(l){super(),this.proxyLoginCallback=l,this.cachedSession=null}async download(l,t,f){return await f.cancellationToken.createPromise((i,s,n)=>{const o={headers:f.headers||void 0,redirect:"manual"};(0,d.configureRequestUrl)(l,o),(0,d.configureRequestOptions)(o),this.doDownload(o,{destination:t,options:f,onCancel:n,callback:a=>{a==null?i(t):s(a)},responseHandler:null},0)})}createRequest(l,t){l.headers&&l.headers.Host&&(l.host=l.headers.Host,delete l.headers.Host),this.cachedSession==null&&(this.cachedSession=h());const f=Ce.net.request({...l,session:this.cachedSession});return f.on("response",t),this.proxyLoginCallback!=null&&f.on("login",this.proxyLoginCallback),f}addRedirectHandlers(l,t,f,i,s){l.on("redirect",(n,o,a)=>{l.abort(),i>this.maxRedirects?f(this.createMaxRedirectError()):s(d.HttpExecutor.prepareRedirectUrlOptions(a,t))})}}r.ElectronHttpExecutor=u})(Vi)),Vi}var zt={},Rt={},Yi,Vs;function _f(){if(Vs)return Yi;Vs=1;var r="[object Symbol]",d=/[\\^$.*+?()[\]{}|]/g,h=RegExp(d.source),u=typeof et=="object"&&et&&et.Object===Object&&et,c=typeof self=="object"&&self&&self.Object===Object&&self,l=u||c||Function("return this")(),t=Object.prototype,f=t.toString,i=l.Symbol,s=i?i.prototype:void 0,n=s?s.toString:void 0;function o(p){if(typeof p=="string")return p;if(m(p))return n?n.call(p):"";var A=p+"";return A=="0"&&1/p==-1/0?"-0":A}function a(p){return!!p&&typeof p=="object"}function m(p){return typeof p=="symbol"||a(p)&&f.call(p)==r}function g(p){return p==null?"":o(p)}function y(p){return p=g(p),p&&h.test(p)?p.replace(d,"\\$&"):p}return Yi=y,Yi}var Ys;function bt(){if(Ys)return Rt;Ys=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.newBaseUrl=h,Rt.newUrlFromBase=u,Rt.getChannelFilename=c,Rt.blockmapFiles=l;const r=Lt,d=_f();function h(t){const f=new r.URL(t);return f.pathname.endsWith("/")||(f.pathname+="/"),f}function u(t,f,i=!1){const s=new r.URL(t,f),n=f.search;return n!=null&&n.length!==0?s.search=n:i&&(s.search=`noCache=${Date.now().toString(32)}`),s}function c(t){return`${t}.yml`}function l(t,f,i){const s=u(`${t.pathname}.blockmap`,t);return[u(`${t.pathname.replace(new RegExp(d(i),"g"),f)}.blockmap`,t),s]}return Rt}var lt={},zs;function Je(){if(zs)return lt;zs=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.Provider=void 0,lt.findFile=c,lt.parseUpdateInfo=l,lt.getFileList=t,lt.resolveFiles=f;const r=ke(),d=na(),h=bt();let u=class{constructor(s){this.runtimeOptions=s,this.requestHeaders=null,this.executor=s.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const s=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(s==="x64"?"":`-${s}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(s){return`${s}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(s){this.requestHeaders=s}httpRequest(s,n,o){return this.executor.request(this.createRequestOptions(s,n),o)}createRequestOptions(s,n){const o={};return this.requestHeaders==null?n!=null&&(o.headers=n):o.headers=n==null?this.requestHeaders:{...this.requestHeaders,...n},(0,r.configureRequestUrl)(s,o),o}};lt.Provider=u;function c(i,s,n){if(i.length===0)throw(0,r.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const o=i.find(a=>a.url.pathname.toLowerCase().endsWith(`.${s}`));return o??(n==null?i[0]:i.find(a=>!n.some(m=>a.url.pathname.toLowerCase().endsWith(`.${m}`))))}function l(i,s,n){if(i==null)throw(0,r.newError)(`Cannot parse update info from ${s} in the latest release artifacts (${n}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let o;try{o=(0,d.load)(i)}catch(a){throw(0,r.newError)(`Cannot parse update info from ${s} in the latest release artifacts (${n}): ${a.stack||a.message}, rawData: ${i}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return o}function t(i){const s=i.files;if(s!=null&&s.length>0)return s;if(i.path!=null)return[{url:i.path,sha2:i.sha2,sha512:i.sha512}];throw(0,r.newError)(`No files provided: ${(0,r.safeStringifyJson)(i)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function f(i,s,n=o=>o){const a=t(i).map(y=>{if(y.sha2==null&&y.sha512==null)throw(0,r.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,r.safeStringifyJson)(y)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,h.newUrlFromBase)(n(y.url),s),info:y}}),m=i.packages,g=m==null?null:m[process.arch]||m.ia32;return g!=null&&(a[0].packageInfo={...g,path:(0,h.newUrlFromBase)(n(g.path),s).href}),a}return lt}var Xs;function eu(){if(Xs)return zt;Xs=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.GenericProvider=void 0;const r=ke(),d=bt(),h=Je();let u=class extends h.Provider{constructor(l,t,f){super(f),this.configuration=l,this.updater=t,this.baseUrl=(0,d.newBaseUrl)(this.configuration.url)}get channel(){const l=this.updater.channel||this.configuration.channel;return l==null?this.getDefaultChannelName():this.getCustomChannelName(l)}async getLatestVersion(){const l=(0,d.getChannelFilename)(this.channel),t=(0,d.newUrlFromBase)(l,this.baseUrl,this.updater.isAddNoCacheQuery);for(let f=0;;f++)try{return(0,h.parseUpdateInfo)(await this.httpRequest(t),l,t)}catch(i){if(i instanceof r.HttpError&&i.statusCode===404)throw(0,r.newError)(`Cannot find channel "${l}" update info: ${i.stack||i.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(i.code==="ECONNREFUSED"&&f<3){await new Promise((s,n)=>{try{setTimeout(s,1e3*f)}catch(o){n(o)}});continue}throw i}}resolveFiles(l){return(0,h.resolveFiles)(l,this.baseUrl)}};return zt.GenericProvider=u,zt}var Xt={},Kt={},Ks;function Sf(){if(Ks)return Kt;Ks=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.BitbucketProvider=void 0;const r=ke(),d=bt(),h=Je();let u=class extends h.Provider{constructor(l,t,f){super({...f,isUseMultipleRangeRequest:!1}),this.configuration=l,this.updater=t;const{owner:i,slug:s}=l;this.baseUrl=(0,d.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${i}/${s}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const l=new r.CancellationToken,t=(0,d.getChannelFilename)(this.getCustomChannelName(this.channel)),f=(0,d.newUrlFromBase)(t,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(f,void 0,l);return(0,h.parseUpdateInfo)(i,t,f)}catch(i){throw(0,r.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(l){return(0,h.resolveFiles)(l,this.baseUrl)}toString(){const{owner:l,slug:t}=this.configuration;return`Bitbucket (owner: ${l}, slug: ${t}, channel: ${this.channel})`}};return Kt.BitbucketProvider=u,Kt}var ht={},Js;function tu(){if(Js)return ht;Js=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.GitHubProvider=ht.BaseGitHubProvider=void 0,ht.computeReleaseNotes=s;const r=ke(),d=Zl(),h=Lt,u=bt(),c=Je(),l=/\/tag\/([^/]+)$/;class t extends c.Provider{constructor(o,a,m){super({...m,isUseMultipleRangeRequest:!1}),this.options=o,this.baseUrl=(0,u.newBaseUrl)((0,r.githubUrl)(o,a));const g=a==="github.com"?"api.github.com":a;this.baseApiUrl=(0,u.newBaseUrl)((0,r.githubUrl)(o,g))}computeGithubBasePath(o){const a=this.options.host;return a&&!["github.com","api.github.com"].includes(a)?`/api/v3${o}`:o}}ht.BaseGitHubProvider=t;let f=class extends t{constructor(o,a,m){super(o,"github.com",m),this.options=o,this.updater=a}get channel(){const o=this.updater.channel||this.options.channel;return o==null?this.getDefaultChannelName():this.getCustomChannelName(o)}async getLatestVersion(){var o,a,m,g,y;const p=new r.CancellationToken,A=await this.httpRequest((0,u.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},p),C=(0,r.parseXml)(A);let I=C.element("entry",!1,"No published versions on GitHub"),P=null;try{if(this.updater.allowPrerelease){const k=((o=this.updater)===null||o===void 0?void 0:o.channel)||((a=d.prerelease(this.updater.currentVersion))===null||a===void 0?void 0:a[0])||null;if(k===null)P=l.exec(I.element("link").attribute("href"))[1];else for(const U of C.getElements("entry")){const x=l.exec(U.element("link").attribute("href"));if(x===null)continue;const M=x[1],D=((m=d.prerelease(M))===null||m===void 0?void 0:m[0])||null,O=!k||["alpha","beta"].includes(k),F=D!==null&&!["alpha","beta"].includes(String(D));if(O&&!F&&!(k==="beta"&&D==="alpha")){P=M;break}if(D&&D===k){P=M;break}}}else{P=await this.getLatestTagName(p);for(const k of C.getElements("entry"))if(l.exec(k.element("link").attribute("href"))[1]===P){I=k;break}}}catch(k){throw(0,r.newError)(`Cannot parse releases feed: ${k.stack||k.message},
XML:
${A}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(P==null)throw(0,r.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let $,R="",_="";const T=async k=>{R=(0,u.getChannelFilename)(k),_=(0,u.newUrlFromBase)(this.getBaseDownloadPath(String(P),R),this.baseUrl);const U=this.createRequestOptions(_);try{return await this.executor.request(U,p)}catch(x){throw x instanceof r.HttpError&&x.statusCode===404?(0,r.newError)(`Cannot find ${R} in the latest release artifacts (${_}): ${x.stack||x.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):x}};try{let k=this.channel;this.updater.allowPrerelease&&(!((g=d.prerelease(P))===null||g===void 0)&&g[0])&&(k=this.getCustomChannelName(String((y=d.prerelease(P))===null||y===void 0?void 0:y[0]))),$=await T(k)}catch(k){if(this.updater.allowPrerelease)$=await T(this.getDefaultChannelName());else throw k}const E=(0,c.parseUpdateInfo)($,R,_);return E.releaseName==null&&(E.releaseName=I.elementValueOrEmpty("title")),E.releaseNotes==null&&(E.releaseNotes=s(this.updater.currentVersion,this.updater.fullChangelog,C,I)),{tag:P,...E}}async getLatestTagName(o){const a=this.options,m=a.host==null||a.host==="github.com"?(0,u.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new h.URL(`${this.computeGithubBasePath(`/repos/${a.owner}/${a.repo}/releases`)}/latest`,this.baseApiUrl);try{const g=await this.httpRequest(m,{Accept:"application/json"},o);return g==null?null:JSON.parse(g).tag_name}catch(g){throw(0,r.newError)(`Unable to find latest version on GitHub (${m}), please ensure a production release exists: ${g.stack||g.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(o){return(0,c.resolveFiles)(o,this.baseUrl,a=>this.getBaseDownloadPath(o.tag,a.replace(/ /g,"-")))}getBaseDownloadPath(o,a){return`${this.basePath}/download/${o}/${a}`}};ht.GitHubProvider=f;function i(n){const o=n.elementValueOrEmpty("content");return o==="No content."?"":o}function s(n,o,a,m){if(!o)return i(m);const g=[];for(const y of a.getElements("entry")){const p=/\/tag\/v?([^/]+)$/.exec(y.element("link").attribute("href"))[1];d.lt(n,p)&&g.push({version:p,note:i(y)})}return g.sort((y,p)=>d.rcompare(y.version,p.version))}return ht}var Jt={},Qs;function Af(){if(Qs)return Jt;Qs=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.KeygenProvider=void 0;const r=ke(),d=bt(),h=Je();let u=class extends h.Provider{constructor(l,t,f){super({...f,isUseMultipleRangeRequest:!1}),this.configuration=l,this.updater=t,this.defaultHostname="api.keygen.sh";const i=this.configuration.host||this.defaultHostname;this.baseUrl=(0,d.newBaseUrl)(`https://${i}/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const l=new r.CancellationToken,t=(0,d.getChannelFilename)(this.getCustomChannelName(this.channel)),f=(0,d.newUrlFromBase)(t,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(f,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},l);return(0,h.parseUpdateInfo)(i,t,f)}catch(i){throw(0,r.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(l){return(0,h.resolveFiles)(l,this.baseUrl)}toString(){const{account:l,product:t,platform:f}=this.configuration;return`Keygen (account: ${l}, product: ${t}, platform: ${f}, channel: ${this.channel})`}};return Jt.KeygenProvider=u,Jt}var Qt={},Zs;function Tf(){if(Zs)return Qt;Zs=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.PrivateGitHubProvider=void 0;const r=ke(),d=na(),h=Ie,u=Lt,c=bt(),l=tu(),t=Je();let f=class extends l.BaseGitHubProvider{constructor(s,n,o,a){super(s,"api.github.com",a),this.updater=n,this.token=o}createRequestOptions(s,n){const o=super.createRequestOptions(s,n);return o.redirect="manual",o}async getLatestVersion(){const s=new r.CancellationToken,n=(0,c.getChannelFilename)(this.getDefaultChannelName()),o=await this.getLatestVersionInfo(s),a=o.assets.find(y=>y.name===n);if(a==null)throw(0,r.newError)(`Cannot find ${n} in the release ${o.html_url||o.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const m=new u.URL(a.url);let g;try{g=(0,d.load)(await this.httpRequest(m,this.configureHeaders("application/octet-stream"),s))}catch(y){throw y instanceof r.HttpError&&y.statusCode===404?(0,r.newError)(`Cannot find ${n} in the latest release artifacts (${m}): ${y.stack||y.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):y}return g.assets=o.assets,g}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(s){return{accept:s,authorization:`token ${this.token}`}}async getLatestVersionInfo(s){const n=this.updater.allowPrerelease;let o=this.basePath;n||(o=`${o}/latest`);const a=(0,c.newUrlFromBase)(o,this.baseUrl);try{const m=JSON.parse(await this.httpRequest(a,this.configureHeaders("application/vnd.github.v3+json"),s));return n?m.find(g=>g.prerelease)||m[0]:m}catch(m){throw(0,r.newError)(`Unable to find latest version on GitHub (${a}), please ensure a production release exists: ${m.stack||m.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(s){return(0,t.getFileList)(s).map(n=>{const o=h.posix.basename(n.url).replace(/ /g,"-"),a=s.assets.find(m=>m!=null&&m.name===o);if(a==null)throw(0,r.newError)(`Cannot find asset "${o}" in: ${JSON.stringify(s.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new u.URL(a.url),info:n}})}};return Qt.PrivateGitHubProvider=f,Qt}var el;function Rf(){if(el)return Xt;el=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.isUrlProbablySupportMultiRangeRequests=t,Xt.createClient=f;const r=ke(),d=Sf(),h=eu(),u=tu(),c=Af(),l=Tf();function t(i){return!i.includes("s3.amazonaws.com")}function f(i,s,n){if(typeof i=="string")throw(0,r.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const o=i.provider;switch(o){case"github":{const a=i,m=(a.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||a.token;return m==null?new u.GitHubProvider(a,s,n):new l.PrivateGitHubProvider(a,s,m,n)}case"bitbucket":return new d.BitbucketProvider(i,s,n);case"keygen":return new c.KeygenProvider(i,s,n);case"s3":case"spaces":return new h.GenericProvider({provider:"generic",url:(0,r.getS3LikeProviderBaseUrl)(i),channel:i.channel||null},s,{...n,isUseMultipleRangeRequest:!1});case"generic":{const a=i;return new h.GenericProvider(a,s,{...n,isUseMultipleRangeRequest:a.useMultipleRangeRequest!==!1&&t(a.url)})}case"custom":{const a=i,m=a.updateProvider;if(!m)throw(0,r.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new m(a,s,n)}default:throw(0,r.newError)(`Unsupported provider: ${o}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}return Xt}var Zt={},er={},Ft={},xt={},tl;function ca(){if(tl)return xt;tl=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.OperationKind=void 0,xt.computeOperations=d;var r;(function(t){t[t.COPY=0]="COPY",t[t.DOWNLOAD=1]="DOWNLOAD"})(r||(xt.OperationKind=r={}));function d(t,f,i){const s=l(t.files),n=l(f.files);let o=null;const a=f.files[0],m=[],g=a.name,y=s.get(g);if(y==null)throw new Error(`no file ${g} in old blockmap`);const p=n.get(g);let A=0;const{checksumToOffset:C,checksumToOldSize:I}=c(s.get(g),y.offset,i);let P=a.offset;for(let $=0;$<p.checksums.length;P+=p.sizes[$],$++){const R=p.sizes[$],_=p.checksums[$];let T=C.get(_);T!=null&&I.get(_)!==R&&(i.warn(`Checksum ("${_}") matches, but size differs (old: ${I.get(_)}, new: ${R})`),T=void 0),T===void 0?(A++,o!=null&&o.kind===r.DOWNLOAD&&o.end===P?o.end+=R:(o={kind:r.DOWNLOAD,start:P,end:P+R},u(o,m,_,$))):o!=null&&o.kind===r.COPY&&o.end===T?o.end+=R:(o={kind:r.COPY,start:T,end:T+R},u(o,m,_,$))}return A>0&&i.info(`File${a.name==="file"?"":" "+a.name} has ${A} changed blocks`),m}const h=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function u(t,f,i,s){if(h&&f.length!==0){const n=f[f.length-1];if(n.kind===t.kind&&t.start<n.end&&t.start>n.start){const o=[n.start,n.end,t.start,t.end].reduce((a,m)=>a<m?a:m);throw new Error(`operation (block index: ${s}, checksum: ${i}, kind: ${r[t.kind]}) overlaps previous operation (checksum: ${i}):
abs: ${n.start} until ${n.end} and ${t.start} until ${t.end}
rel: ${n.start-o} until ${n.end-o} and ${t.start-o} until ${t.end-o}`)}}f.push(t)}function c(t,f,i){const s=new Map,n=new Map;let o=f;for(let a=0;a<t.checksums.length;a++){const m=t.checksums[a],g=t.sizes[a],y=n.get(m);if(y===void 0)s.set(m,o),n.set(m,g);else if(i.debug!=null){const p=y===g?"(same size)":`(size: ${y}, this size: ${g})`;i.debug(`${m} duplicated in blockmap ${p}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}o+=g}return{checksumToOffset:s,checksumToOldSize:n}}function l(t){const f=new Map;for(const i of t)f.set(i.name,i);return f}return xt}var rl;function ru(){if(rl)return Ft;rl=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.DataSplitter=void 0,Ft.copyData=t;const r=ke(),d=Ye,h=hr,u=ca(),c=Buffer.from(`\r
\r
`);var l;(function(i){i[i.INIT=0]="INIT",i[i.HEADER=1]="HEADER",i[i.BODY=2]="BODY"})(l||(l={}));function t(i,s,n,o,a){const m=(0,d.createReadStream)("",{fd:n,autoClose:!1,start:i.start,end:i.end-1});m.on("error",o),m.once("end",a),m.pipe(s,{end:!1})}let f=class extends h.Writable{constructor(s,n,o,a,m,g){super(),this.out=s,this.options=n,this.partIndexToTaskIndex=o,this.partIndexToLength=m,this.finishHandler=g,this.partIndex=-1,this.headerListBuffer=null,this.readState=l.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=a.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(s,n,o){if(this.isFinished){console.error(`Trailing ignored data: ${s.length} bytes`);return}this.handleData(s).then(o).catch(o)}async handleData(s){let n=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,r.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const o=Math.min(this.ignoreByteCount,s.length);this.ignoreByteCount-=o,n=o}else if(this.remainingPartDataCount>0){const o=Math.min(this.remainingPartDataCount,s.length);this.remainingPartDataCount-=o,await this.processPartData(s,0,o),n=o}if(n!==s.length){if(this.readState===l.HEADER){const o=this.searchHeaderListEnd(s,n);if(o===-1)return;n=o,this.readState=l.BODY,this.headerListBuffer=null}for(;;){if(this.readState===l.BODY)this.readState=l.INIT;else{this.partIndex++;let g=this.partIndexToTaskIndex.get(this.partIndex);if(g==null)if(this.isFinished)g=this.options.end;else throw(0,r.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const y=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(y<g)await this.copyExistingData(y,g);else if(y>g)throw(0,r.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(n=this.searchHeaderListEnd(s,n),n===-1){this.readState=l.HEADER;return}}const o=this.partIndexToLength[this.partIndex],a=n+o,m=Math.min(a,s.length);if(await this.processPartStarted(s,n,m),this.remainingPartDataCount=o-(m-n),this.remainingPartDataCount>0)return;if(n=a+this.boundaryLength,n>=s.length){this.ignoreByteCount=this.boundaryLength-(s.length-a);return}}}}copyExistingData(s,n){return new Promise((o,a)=>{const m=()=>{if(s===n){o();return}const g=this.options.tasks[s];if(g.kind!==u.OperationKind.COPY){a(new Error("Task kind must be COPY"));return}t(g,this.out,this.options.oldFileFd,a,()=>{s++,m()})};m()})}searchHeaderListEnd(s,n){const o=s.indexOf(c,n);if(o!==-1)return o+c.length;const a=n===0?s:s.slice(n);return this.headerListBuffer==null?this.headerListBuffer=a:this.headerListBuffer=Buffer.concat([this.headerListBuffer,a]),-1}onPartEnd(){const s=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==s)throw(0,r.newError)(`Expected length: ${s} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(s,n,o){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(s,n,o)}processPartData(s,n,o){this.actualPartLength+=o-n;const a=this.out;return a.write(n===0&&s.length===o?s:s.slice(n,o))?Promise.resolve():new Promise((m,g)=>{a.on("error",g),a.once("drain",()=>{a.removeListener("error",g),m()})})}};return Ft.DataSplitter=f,Ft}var tr={},nl;function Cf(){if(nl)return tr;nl=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.executeTasksUsingMultipleRangeRequests=u,tr.checkIsRangesSupported=l;const r=ke(),d=ru(),h=ca();function u(t,f,i,s,n){const o=a=>{if(a>=f.length){t.fileMetadataBuffer!=null&&i.write(t.fileMetadataBuffer),i.end();return}const m=a+1e3;c(t,{tasks:f,start:a,end:Math.min(f.length,m),oldFileFd:s},i,()=>o(m),n)};return o}function c(t,f,i,s,n){let o="bytes=",a=0;const m=new Map,g=[];for(let A=f.start;A<f.end;A++){const C=f.tasks[A];C.kind===h.OperationKind.DOWNLOAD&&(o+=`${C.start}-${C.end-1}, `,m.set(a,A),a++,g.push(C.end-C.start))}if(a<=1){const A=C=>{if(C>=f.end){s();return}const I=f.tasks[C++];if(I.kind===h.OperationKind.COPY)(0,d.copyData)(I,i,f.oldFileFd,n,()=>A(C));else{const P=t.createRequestOptions();P.headers.Range=`bytes=${I.start}-${I.end-1}`;const $=t.httpExecutor.createRequest(P,R=>{l(R,n)&&(R.pipe(i,{end:!1}),R.once("end",()=>A(C)))});t.httpExecutor.addErrorAndTimeoutHandlers($,n),$.end()}};A(f.start);return}const y=t.createRequestOptions();y.headers.Range=o.substring(0,o.length-2);const p=t.httpExecutor.createRequest(y,A=>{if(!l(A,n))return;const C=(0,r.safeGetHeader)(A,"content-type"),I=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(C);if(I==null){n(new Error(`Content-Type "multipart/byteranges" is expected, but got "${C}"`));return}const P=new d.DataSplitter(i,f,m,I[1]||I[2],g,s);P.on("error",n),A.pipe(P),A.on("end",()=>{setTimeout(()=>{p.abort(),n(new Error("Response ends without calling any handlers"))},1e4)})});t.httpExecutor.addErrorAndTimeoutHandlers(p,n),p.end()}function l(t,f){if(t.statusCode>=400)return f((0,r.createHttpError)(t)),!1;if(t.statusCode!==206){const i=(0,r.safeGetHeader)(t,"accept-ranges");if(i==null||i==="none")return f(new Error(`Server doesn't support Accept-Ranges (response code ${t.statusCode})`)),!1}return!0}return tr}var rr={},il;function bf(){if(il)return rr;il=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.ProgressDifferentialDownloadCallbackTransform=void 0;const r=hr;var d;(function(u){u[u.COPY=0]="COPY",u[u.DOWNLOAD=1]="DOWNLOAD"})(d||(d={}));let h=class extends r.Transform{constructor(c,l,t){super(),this.progressDifferentialDownloadInfo=c,this.cancellationToken=l,this.onProgress=t,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=d.COPY,this.nextUpdate=this.start+1e3}_transform(c,l,t){if(this.cancellationToken.cancelled){t(new Error("cancelled"),null);return}if(this.operationType==d.COPY){t(null,c);return}this.transferred+=c.length,this.delta+=c.length;const f=Date.now();f>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=f+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((f-this.start)/1e3))}),this.delta=0),t(null,c)}beginFileCopy(){this.operationType=d.COPY}beginRangeDownload(){this.operationType=d.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(c){if(this.cancellationToken.cancelled){c(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,c(null)}};return rr.ProgressDifferentialDownloadCallbackTransform=h,rr}var al;function nu(){if(al)return er;al=1,Object.defineProperty(er,"__esModule",{value:!0}),er.DifferentialDownloader=void 0;const r=ke(),d=pt(),h=Ye,u=ru(),c=Lt,l=ca(),t=Cf(),f=bf();let i=class{constructor(a,m,g){this.blockAwareFileInfo=a,this.httpExecutor=m,this.options=g,this.fileMetadataBuffer=null,this.logger=g.logger}createRequestOptions(){const a={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,r.configureRequestUrl)(this.options.newUrl,a),(0,r.configureRequestOptions)(a),a}doDownload(a,m){if(a.version!==m.version)throw new Error(`version is different (${a.version} - ${m.version}), full download is required`);const g=this.logger,y=(0,l.computeOperations)(a,m,g);g.debug!=null&&g.debug(JSON.stringify(y,null,2));let p=0,A=0;for(const I of y){const P=I.end-I.start;I.kind===l.OperationKind.DOWNLOAD?p+=P:A+=P}const C=this.blockAwareFileInfo.size;if(p+A+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==C)throw new Error(`Internal error, size mismatch: downloadSize: ${p}, copySize: ${A}, newSize: ${C}`);return g.info(`Full: ${s(C)}, To download: ${s(p)} (${Math.round(p/(C/100))}%)`),this.downloadFile(y)}downloadFile(a){const m=[],g=()=>Promise.all(m.map(y=>(0,d.close)(y.descriptor).catch(p=>{this.logger.error(`cannot close file "${y.path}": ${p}`)})));return this.doDownloadFile(a,m).then(g).catch(y=>g().catch(p=>{try{this.logger.error(`cannot close files: ${p}`)}catch(A){try{console.error(A)}catch{}}throw y}).then(()=>{throw y}))}async doDownloadFile(a,m){const g=await(0,d.open)(this.options.oldFile,"r");m.push({descriptor:g,path:this.options.oldFile});const y=await(0,d.open)(this.options.newFile,"w");m.push({descriptor:y,path:this.options.newFile});const p=(0,h.createWriteStream)(this.options.newFile,{fd:y});await new Promise((A,C)=>{const I=[];let P;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const x=[];let M=0;for(const O of a)O.kind===l.OperationKind.DOWNLOAD&&(x.push(O.end-O.start),M+=O.end-O.start);const D={expectedByteCounts:x,grandTotal:M};P=new f.ProgressDifferentialDownloadCallbackTransform(D,this.options.cancellationToken,this.options.onProgress),I.push(P)}const $=new r.DigestTransform(this.blockAwareFileInfo.sha512);$.isValidateOnEnd=!1,I.push($),p.on("finish",()=>{p.close(()=>{m.splice(1,1);try{$.validate()}catch(x){C(x);return}A(void 0)})}),I.push(p);let R=null;for(const x of I)x.on("error",C),R==null?R=x:R=R.pipe(x);const _=I[0];let T;if(this.options.isUseMultipleRangeRequest){T=(0,t.executeTasksUsingMultipleRangeRequests)(this,a,_,g,C),T(0);return}let E=0,k=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const U=this.createRequestOptions();U.redirect="manual",T=x=>{var M,D;if(x>=a.length){this.fileMetadataBuffer!=null&&_.write(this.fileMetadataBuffer),_.end();return}const O=a[x++];if(O.kind===l.OperationKind.COPY){P&&P.beginFileCopy(),(0,u.copyData)(O,_,g,C,()=>T(x));return}const F=`bytes=${O.start}-${O.end-1}`;U.headers.range=F,(D=(M=this.logger)===null||M===void 0?void 0:M.debug)===null||D===void 0||D.call(M,`download range: ${F}`),P&&P.beginRangeDownload();const q=this.httpExecutor.createRequest(U,J=>{J.on("error",C),J.on("aborted",()=>{C(new Error("response has been aborted by the server"))}),J.statusCode>=400&&C((0,r.createHttpError)(J)),J.pipe(_,{end:!1}),J.once("end",()=>{P&&P.endRangeDownload(),++E===100?(E=0,setTimeout(()=>T(x),1e3)):T(x)})});q.on("redirect",(J,W,ne)=>{this.logger.info(`Redirect to ${n(ne)}`),k=ne,(0,r.configureRequestUrl)(new c.URL(k),U),q.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(q,C),q.end()},T(0)})}async readRemoteBytes(a,m){const g=Buffer.allocUnsafe(m+1-a),y=this.createRequestOptions();y.headers.range=`bytes=${a}-${m}`;let p=0;if(await this.request(y,A=>{A.copy(g,p),p+=A.length}),p!==g.length)throw new Error(`Received data length ${p} is not equal to expected ${g.length}`);return g}request(a,m){return new Promise((g,y)=>{const p=this.httpExecutor.createRequest(a,A=>{(0,t.checkIsRangesSupported)(A,y)&&(A.on("error",y),A.on("aborted",()=>{y(new Error("response has been aborted by the server"))}),A.on("data",m),A.on("end",()=>g()))});this.httpExecutor.addErrorAndTimeoutHandlers(p,y),p.end()})}};er.DifferentialDownloader=i;function s(o,a=" KB"){return new Intl.NumberFormat("en").format((o/1024).toFixed(2))+a}function n(o){const a=o.indexOf("?");return a<0?o:o.substring(0,a)}return er}var ol;function Pf(){if(ol)return Zt;ol=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.GenericDifferentialDownloader=void 0;const r=nu();let d=class extends r.DifferentialDownloader{download(u,c){return this.doDownload(u,c)}};return Zt.GenericDifferentialDownloader=d,Zt}var zi={},sl;function Pt(){return sl||(sl=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.UpdaterSignal=r.UPDATE_DOWNLOADED=r.DOWNLOAD_PROGRESS=r.CancellationToken=void 0,r.addHandler=u;const d=ke();Object.defineProperty(r,"CancellationToken",{enumerable:!0,get:function(){return d.CancellationToken}}),r.DOWNLOAD_PROGRESS="download-progress",r.UPDATE_DOWNLOADED="update-downloaded";class h{constructor(l){this.emitter=l}login(l){u(this.emitter,"login",l)}progress(l){u(this.emitter,r.DOWNLOAD_PROGRESS,l)}updateDownloaded(l){u(this.emitter,r.UPDATE_DOWNLOADED,l)}updateCancelled(l){u(this.emitter,"update-cancelled",l)}}r.UpdaterSignal=h;function u(c,l,t){c.on(l,t)}})(zi)),zi}var ll;function fa(){if(ll)return St;ll=1,Object.defineProperty(St,"__esModule",{value:!0}),St.NoOpLogger=St.AppUpdater=void 0;const r=ke(),d=pr,h=qr,u=Cl,c=pt(),l=na(),t=Gc(),f=Ie,i=Zl(),s=vf(),n=yf(),o=wf(),a=eu(),m=Rf(),g=Pl,y=bt(),p=Pf(),A=Pt();let C=class iu extends u.EventEmitter{get channel(){return this._channel}set channel(R){if(this._channel!=null){if(typeof R!="string")throw(0,r.newError)(`Channel must be a string, but got: ${R}`,"ERR_UPDATER_INVALID_CHANNEL");if(R.length===0)throw(0,r.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=R,this.allowDowngrade=!0}addAuthHeader(R){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:R})}get netSession(){return(0,o.getNetSession)()}get logger(){return this._logger}set logger(R){this._logger=R??new P}set updateConfigPath(R){this.clientPromise=null,this._appUpdateConfigPath=R,this.configOnDisk=new t.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(R){R&&(this._isUpdateSupported=R)}constructor(R,_){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new A.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=k=>this.checkIfUpdateSupported(k),this.clientPromise=null,this.stagingUserIdPromise=new t.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new t.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",k=>{this._logger.error(`Error: ${k.stack||k.message}`)}),_==null?(this.app=new n.ElectronAppAdapter,this.httpExecutor=new o.ElectronHttpExecutor((k,U)=>this.emit("login",k,U))):(this.app=_,this.httpExecutor=null);const T=this.app.version,E=(0,i.parse)(T);if(E==null)throw(0,r.newError)(`App version is not a valid semver version: "${T}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=E,this.allowPrerelease=I(E),R!=null&&(this.setFeedURL(R),typeof R!="string"&&R.requestHeaders&&(this.requestHeaders=R.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(R){const _=this.createProviderRuntimeOptions();let T;typeof R=="string"?T=new a.GenericProvider({provider:"generic",url:R},this,{..._,isUseMultipleRangeRequest:(0,m.isUrlProbablySupportMultiRangeRequests)(R)}):T=(0,m.createClient)(R,this,_),this.clientPromise=Promise.resolve(T)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let R=this.checkForUpdatesPromise;if(R!=null)return this._logger.info("Checking for update (already in progress)"),R;const _=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),R=this.doCheckForUpdates().then(T=>(_(),T)).catch(T=>{throw _(),this.emit("error",T,`Cannot check for updates: ${(T.stack||T).toString()}`),T}),this.checkForUpdatesPromise=R,R}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(R){return this.checkForUpdates().then(_=>_?.downloadPromise?(_.downloadPromise.then(()=>{const T=iu.formatDownloadNotification(_.updateInfo.version,this.app.name,R);new Ce.Notification(T).show()}),_):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),_))}static formatDownloadNotification(R,_,T){return T==null&&(T={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),T={title:T.title.replace("{appName}",_).replace("{version}",R),body:T.body.replace("{appName}",_).replace("{version}",R)},T}async isStagingMatch(R){const _=R.stagingPercentage;let T=_;if(T==null)return!0;if(T=parseInt(T,10),isNaN(T))return this._logger.warn(`Staging percentage is NaN: ${_}`),!0;T=T/100;const E=await this.stagingUserIdPromise.value,U=r.UUID.parse(E).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${T}, percentage: ${U}, user id: ${E}`),U<T}computeFinalHeaders(R){return this.requestHeaders!=null&&Object.assign(R,this.requestHeaders),R}async isUpdateAvailable(R){const _=(0,i.parse)(R.version);if(_==null)throw(0,r.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${R.version}"`,"ERR_UPDATER_INVALID_VERSION");const T=this.currentVersion;if((0,i.eq)(_,T)||!await Promise.resolve(this.isUpdateSupported(R))||!await this.isStagingMatch(R))return!1;const k=(0,i.gt)(_,T),U=(0,i.lt)(_,T);return k?!0:this.allowDowngrade&&U}checkIfUpdateSupported(R){const _=R?.minimumSystemVersion,T=(0,h.release)();if(_)try{if((0,i.lt)(T,_))return this._logger.info(`Current OS version ${T} is less than the minimum OS version required ${_} for version ${T}`),!1}catch(E){this._logger.warn(`Failed to compare current OS version(${T}) with minimum OS version(${_}): ${(E.message||E).toString()}`)}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(T=>(0,m.createClient)(T,this,this.createProviderRuntimeOptions())));const R=await this.clientPromise,_=await this.stagingUserIdPromise.value;return R.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":_})),{info:await R.getLatestVersion(),provider:R}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const R=await this.getUpdateInfoAndProvider(),_=R.info;if(!await this.isUpdateAvailable(_))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${_.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",_),{isUpdateAvailable:!1,versionInfo:_,updateInfo:_};this.updateInfoAndProvider=R,this.onUpdateAvailable(_);const T=new r.CancellationToken;return{isUpdateAvailable:!0,versionInfo:_,updateInfo:_,cancellationToken:T,downloadPromise:this.autoDownload?this.downloadUpdate(T):null}}onUpdateAvailable(R){this._logger.info(`Found version ${R.version} (url: ${(0,r.asArray)(R.files).map(_=>_.url).join(", ")})`),this.emit("update-available",R)}downloadUpdate(R=new r.CancellationToken){const _=this.updateInfoAndProvider;if(_==null){const E=new Error("Please check update first");return this.dispatchError(E),Promise.reject(E)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,r.asArray)(_.info.files).map(E=>E.url).join(", ")}`);const T=E=>{if(!(E instanceof r.CancellationError))try{this.dispatchError(E)}catch(k){this._logger.warn(`Cannot dispatch error event: ${k.stack||k}`)}return E};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:_,requestHeaders:this.computeRequestHeaders(_.provider),cancellationToken:R,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(E=>{throw T(E)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(R){this.emit("error",R,(R.stack||R).toString())}dispatchUpdateDownloaded(R){this.emit(A.UPDATE_DOWNLOADED,R)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,l.load)(await(0,c.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(R){const _=R.fileExtraDownloadHeaders;if(_!=null){const T=this.requestHeaders;return T==null?_:{..._,...T}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const R=f.join(this.app.userDataPath,".updaterId");try{const T=await(0,c.readFile)(R,"utf-8");if(r.UUID.check(T))return T;this._logger.warn(`Staging user id file exists, but content was invalid: ${T}`)}catch(T){T.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${T}`)}const _=r.UUID.v5((0,d.randomBytes)(4096),r.UUID.OID);this._logger.info(`Generated new staging user ID: ${_}`);try{await(0,c.outputFile)(R,_)}catch(T){this._logger.warn(`Couldn't write out staging user ID: ${T}`)}return _}get isAddNoCacheQuery(){const R=this.requestHeaders;if(R==null)return!0;for(const _ of Object.keys(R)){const T=_.toLowerCase();if(T==="authorization"||T==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let R=this.downloadedUpdateHelper;if(R==null){const _=(await this.configOnDisk.value).updaterCacheDirName,T=this._logger;_==null&&T.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const E=f.join(this.app.baseCachePath,_||this.app.name);T.debug!=null&&T.debug(`updater cache dir: ${E}`),R=new s.DownloadedUpdateHelper(E),this.downloadedUpdateHelper=R}return R}async executeDownload(R){const _=R.fileInfo,T={headers:R.downloadUpdateOptions.requestHeaders,cancellationToken:R.downloadUpdateOptions.cancellationToken,sha2:_.info.sha2,sha512:_.info.sha512};this.listenerCount(A.DOWNLOAD_PROGRESS)>0&&(T.onProgress=ie=>this.emit(A.DOWNLOAD_PROGRESS,ie));const E=R.downloadUpdateOptions.updateInfoAndProvider.info,k=E.version,U=_.packageInfo;function x(){const ie=decodeURIComponent(R.fileInfo.url.pathname);return ie.endsWith(`.${R.fileExtension}`)?f.basename(ie):R.fileInfo.info.url}const M=await this.getOrCreateDownloadHelper(),D=M.cacheDirForPendingUpdate;await(0,c.mkdir)(D,{recursive:!0});const O=x();let F=f.join(D,O);const q=U==null?null:f.join(D,`package-${k}${f.extname(U.path)||".7z"}`),J=async ie=>(await M.setDownloadedFile(F,q,E,_,O,ie),await R.done({...E,downloadedFile:F}),q==null?[F]:[F,q]),W=this._logger,ne=await M.validateDownloadedPath(F,E,_,W);if(ne!=null)return F=ne,await J(!1);const ce=async()=>(await M.clear().catch(()=>{}),await(0,c.unlink)(F).catch(()=>{})),ue=await(0,s.createTempUpdateFile)(`temp-${O}`,D,W);try{await R.task(ue,T,q,ce),await(0,r.retry)(()=>(0,c.rename)(ue,F),60,500,0,0,ie=>ie instanceof Error&&/^EBUSY:/.test(ie.message))}catch(ie){throw await ce(),ie instanceof r.CancellationError&&(W.info("cancelled"),this.emit("update-cancelled",E)),ie}return W.info(`New version ${k} has been downloaded to ${F}`),await J(!0)}async differentialDownloadInstaller(R,_,T,E,k){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const U=(0,y.blockmapFiles)(R.url,this.app.version,_.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${U[0]}", new: ${U[1]})`);const x=async O=>{const F=await this.httpExecutor.downloadToBuffer(O,{headers:_.requestHeaders,cancellationToken:_.cancellationToken});if(F==null||F.length===0)throw new Error(`Blockmap "${O.href}" is empty`);try{return JSON.parse((0,g.gunzipSync)(F).toString())}catch(q){throw new Error(`Cannot parse blockmap "${O.href}", error: ${q}`)}},M={newUrl:R.url,oldFile:f.join(this.downloadedUpdateHelper.cacheDir,k),logger:this._logger,newFile:T,isUseMultipleRangeRequest:E.isUseMultipleRangeRequest,requestHeaders:_.requestHeaders,cancellationToken:_.cancellationToken};this.listenerCount(A.DOWNLOAD_PROGRESS)>0&&(M.onProgress=O=>this.emit(A.DOWNLOAD_PROGRESS,O));const D=await Promise.all(U.map(O=>x(O)));return await new p.GenericDifferentialDownloader(R.info,this.httpExecutor,M).download(D[0],D[1]),!1}catch(U){if(this._logger.error(`Cannot download differentially, fallback to full download: ${U.stack||U}`),this._testOnlyOptions!=null)throw U;return!0}}};St.AppUpdater=C;function I($){const R=(0,i.prerelease)($);return R!=null&&R.length>0}class P{info(R){}warn(R){}error(R){}}return St.NoOpLogger=P,St}var ul;function qt(){if(ul)return Ht;ul=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.BaseUpdater=void 0;const r=kr,d=fa();let h=class extends d.AppUpdater{constructor(c,l){super(c,l),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(c=!1,l=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(c,c?l:this.autoRunAppAfterInstall)?setImmediate(()=>{Ce.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(c){return super.executeDownload({...c,done:l=>(this.dispatchUpdateDownloaded(l),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(c=!1,l=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const t=this.downloadedUpdateHelper,f=this.installerPath,i=t==null?null:t.downloadedFileInfo;if(f==null||i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${c}, isForceRunAfter: ${l}`),this.doInstall({isSilent:c,isForceRunAfter:l,isAdminRightsRequired:i.isAdminRightsRequired})}catch(s){return this.dispatchError(s),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(c=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(c!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${c}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){const{name:c}=this.app,l=`"${c} would like to update"`,t=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),f=[t];return/kdesudo/i.test(t)?(f.push("--comment",l),f.push("-c")):/gksudo/i.test(t)?f.push("--message",l):/pkexec/i.test(t)&&f.push("--disable-internal-agent"),f.join(" ")}spawnSyncLog(c,l=[],t={}){this._logger.info(`Executing: ${c} with args: ${l}`);const f=(0,r.spawnSync)(c,l,{env:{...process.env,...t},encoding:"utf-8",shell:!0}),{error:i,status:s,stdout:n,stderr:o}=f;if(i!=null)throw this._logger.error(o),i;if(s!=null&&s!==0)throw this._logger.error(o),new Error(`Command ${c} exited with code ${s}`);return n.trim()}async spawnLog(c,l=[],t=void 0,f="ignore"){return this._logger.info(`Executing: ${c} with args: ${l}`),new Promise((i,s)=>{try{const n={stdio:f,env:t,detached:!0},o=(0,r.spawn)(c,l,n);o.on("error",a=>{s(a)}),o.unref(),o.pid!==void 0&&i(!0)}catch(n){s(n)}})}};return Ht.BaseUpdater=h,Ht}var nr={},ir={},cl;function au(){if(cl)return ir;cl=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const r=pt(),d=nu(),h=Pl;let u=class extends d.DifferentialDownloader{async download(){const f=this.blockAwareFileInfo,i=f.size,s=i-(f.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(s,i-1);const n=c(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await l(this.options.oldFile),n)}};ir.FileWithEmbeddedBlockMapDifferentialDownloader=u;function c(t){return JSON.parse((0,h.inflateRawSync)(t).toString())}async function l(t){const f=await(0,r.open)(t,"r");try{const i=(await(0,r.fstat)(f)).size,s=Buffer.allocUnsafe(4);await(0,r.read)(f,s,0,s.length,i-s.length);const n=Buffer.allocUnsafe(s.readUInt32BE(0));return await(0,r.read)(f,n,0,n.length,i-s.length-n.length),await(0,r.close)(f),c(n)}catch(i){throw await(0,r.close)(f),i}}return ir}var fl;function dl(){if(fl)return nr;fl=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.AppImageUpdater=void 0;const r=ke(),d=kr,h=pt(),u=Ye,c=Ie,l=qt(),t=au(),f=Je(),i=Pt();let s=class extends l.BaseUpdater{constructor(o,a){super(o,a)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(o){const a=o.updateInfoAndProvider.provider,m=(0,f.findFile)(a.resolveFiles(o.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:m,downloadUpdateOptions:o,task:async(g,y)=>{const p=process.env.APPIMAGE;if(p==null)throw(0,r.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(o.disableDifferentialDownload||await this.downloadDifferential(m,p,g,a,o))&&await this.httpExecutor.download(m.url,g,y),await(0,h.chmod)(g,493)}})}async downloadDifferential(o,a,m,g,y){try{const p={newUrl:o.url,oldFile:a,logger:this._logger,newFile:m,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,requestHeaders:y.requestHeaders,cancellationToken:y.cancellationToken};return this.listenerCount(i.DOWNLOAD_PROGRESS)>0&&(p.onProgress=A=>this.emit(i.DOWNLOAD_PROGRESS,A)),await new t.FileWithEmbeddedBlockMapDifferentialDownloader(o.info,this.httpExecutor,p).download(),!1}catch(p){return this._logger.error(`Cannot download differentially, fallback to full download: ${p.stack||p}`),process.platform==="linux"}}doInstall(o){const a=process.env.APPIMAGE;if(a==null)throw(0,r.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,u.unlinkSync)(a);let m;const g=c.basename(a),y=this.installerPath;if(y==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;c.basename(y)===g||!/\d+\.\d+\.\d+/.test(g)?m=a:m=c.join(c.dirname(a),c.basename(y)),(0,d.execFileSync)("mv",["-f",y,m]),m!==a&&this.emit("appimage-filename-updated",m);const p={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return o.isForceRunAfter?this.spawnLog(m,[],p):(p.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,d.execFileSync)(m,[],{env:p})),!0}};return nr.AppImageUpdater=s,nr}var ar={},hl;function pl(){if(hl)return ar;hl=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.DebUpdater=void 0;const r=qt(),d=Je(),h=Pt();let u=class extends r.BaseUpdater{constructor(l,t){super(l,t)}doDownloadUpdate(l){const t=l.updateInfoAndProvider.provider,f=(0,d.findFile)(t.resolveFiles(l.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:f,downloadUpdateOptions:l,task:async(i,s)=>{this.listenerCount(h.DOWNLOAD_PROGRESS)>0&&(s.onProgress=n=>this.emit(h.DOWNLOAD_PROGRESS,n)),await this.httpExecutor.download(f.url,i,s)}})}get installerPath(){var l,t;return(t=(l=super.installerPath)===null||l===void 0?void 0:l.replace(/ /g,"\\ "))!==null&&t!==void 0?t:null}doInstall(l){const t=this.wrapSudo(),f=/pkexec/i.test(t)?"":'"',i=this.installerPath;if(i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const s=["dpkg","-i",i,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(t,[`${f}/bin/bash`,"-c",`'${s.join(" ")}'${f}`]),l.isForceRunAfter&&this.app.relaunch(),!0}};return ar.DebUpdater=u,ar}var or={},ml;function gl(){if(ml)return or;ml=1,Object.defineProperty(or,"__esModule",{value:!0}),or.PacmanUpdater=void 0;const r=qt(),d=Pt(),h=Je();let u=class extends r.BaseUpdater{constructor(l,t){super(l,t)}doDownloadUpdate(l){const t=l.updateInfoAndProvider.provider,f=(0,h.findFile)(t.resolveFiles(l.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:f,downloadUpdateOptions:l,task:async(i,s)=>{this.listenerCount(d.DOWNLOAD_PROGRESS)>0&&(s.onProgress=n=>this.emit(d.DOWNLOAD_PROGRESS,n)),await this.httpExecutor.download(f.url,i,s)}})}get installerPath(){var l,t;return(t=(l=super.installerPath)===null||l===void 0?void 0:l.replace(/ /g,"\\ "))!==null&&t!==void 0?t:null}doInstall(l){const t=this.wrapSudo(),f=/pkexec/i.test(t)?"":'"',i=this.installerPath;if(i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const s=["pacman","-U","--noconfirm",i];return this.spawnSyncLog(t,[`${f}/bin/bash`,"-c",`'${s.join(" ")}'${f}`]),l.isForceRunAfter&&this.app.relaunch(),!0}};return or.PacmanUpdater=u,or}var sr={},vl;function El(){if(vl)return sr;vl=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.RpmUpdater=void 0;const r=qt(),d=Pt(),h=Je();let u=class extends r.BaseUpdater{constructor(l,t){super(l,t)}doDownloadUpdate(l){const t=l.updateInfoAndProvider.provider,f=(0,h.findFile)(t.resolveFiles(l.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:f,downloadUpdateOptions:l,task:async(i,s)=>{this.listenerCount(d.DOWNLOAD_PROGRESS)>0&&(s.onProgress=n=>this.emit(d.DOWNLOAD_PROGRESS,n)),await this.httpExecutor.download(f.url,i,s)}})}get installerPath(){var l,t;return(t=(l=super.installerPath)===null||l===void 0?void 0:l.replace(/ /g,"\\ "))!==null&&t!==void 0?t:null}doInstall(l){const t=this.wrapSudo(),f=/pkexec/i.test(t)?"":'"',i=this.spawnSyncLog("which zypper"),s=this.installerPath;if(s==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let n;return i?n=[i,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",s]:n=[this.spawnSyncLog("which dnf || which yum"),"-y","install",s],this.spawnSyncLog(t,[`${f}/bin/bash`,"-c",`'${n.join(" ")}'${f}`]),l.isForceRunAfter&&this.app.relaunch(),!0}};return sr.RpmUpdater=u,sr}var lr={},yl;function wl(){if(yl)return lr;yl=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.MacUpdater=void 0;const r=ke(),d=pt(),h=Ye,u=Ie,c=nc,l=fa(),t=Je(),f=kr,i=pr;let s=class extends l.AppUpdater{constructor(o,a){super(o,a),this.nativeUpdater=Ce.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",m=>{this._logger.warn(m),this.emit("error",m)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(o){this._logger.debug!=null&&this._logger.debug(o)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(o=>{o&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(o){let a=o.updateInfoAndProvider.provider.resolveFiles(o.updateInfoAndProvider.info);const m=this._logger,g="sysctl.proc_translated";let y=!1;try{this.debug("Checking for macOS Rosetta environment"),y=(0,f.execFileSync)("sysctl",[g],{encoding:"utf8"}).includes(`${g}: 1`),m.info(`Checked for macOS Rosetta environment (isRosetta=${y})`)}catch($){m.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${$}`)}let p=!1;try{this.debug("Checking for arm64 in uname");const R=(0,f.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");m.info(`Checked 'uname -a': arm64=${R}`),p=p||R}catch($){m.warn(`uname shell command to check for arm64 failed: ${$}`)}p=p||process.arch==="arm64"||y;const A=$=>{var R;return $.url.pathname.includes("arm64")||((R=$.info.url)===null||R===void 0?void 0:R.includes("arm64"))};p&&a.some(A)?a=a.filter($=>p===A($)):a=a.filter($=>!A($));const C=(0,t.findFile)(a,"zip",["pkg","dmg"]);if(C==null)throw(0,r.newError)(`ZIP file not provided: ${(0,r.safeStringifyJson)(a)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const I=o.updateInfoAndProvider.provider,P="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:C,downloadUpdateOptions:o,task:async($,R)=>{const _=u.join(this.downloadedUpdateHelper.cacheDir,P),T=()=>(0,d.pathExistsSync)(_)?!o.disableDifferentialDownload:(m.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let E=!0;T()&&(E=await this.differentialDownloadInstaller(C,o,$,I,P)),E&&await this.httpExecutor.download(C.url,$,R)},done:async $=>{if(!o.disableDifferentialDownload)try{const R=u.join(this.downloadedUpdateHelper.cacheDir,P);await(0,d.copyFile)($.downloadedFile,R)}catch(R){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${R.message}`)}return this.updateDownloaded(C,$)}})}async updateDownloaded(o,a){var m;const g=a.downloadedFile,y=(m=o.info.size)!==null&&m!==void 0?m:(await(0,d.stat)(g)).size,p=this._logger,A=`fileToProxy=${o.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${A})`),this.server=(0,c.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${A})`),this.server.on("close",()=>{p.info(`Proxy server for native Squirrel.Mac is closed (${A})`)});const C=I=>{const P=I.address();return typeof P=="string"?P:`http://127.0.0.1:${P?.port}`};return await new Promise((I,P)=>{const $=(0,i.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),R=Buffer.from(`autoupdater:${$}`,"ascii"),_=`/${(0,i.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(T,E)=>{const k=T.url;if(p.info(`${k} requested`),k==="/"){if(!T.headers.authorization||T.headers.authorization.indexOf("Basic ")===-1){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),p.warn("No authenthication info");return}const M=T.headers.authorization.split(" ")[1],D=Buffer.from(M,"base64").toString("ascii"),[O,F]=D.split(":");if(O!=="autoupdater"||F!==$){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),p.warn("Invalid authenthication credentials");return}const q=Buffer.from(`{ "url": "${C(this.server)}${_}" }`);E.writeHead(200,{"Content-Type":"application/json","Content-Length":q.length}),E.end(q);return}if(!k.startsWith(_)){p.warn(`${k} requested, but not supported`),E.writeHead(404),E.end();return}p.info(`${_} requested by Squirrel.Mac, pipe ${g}`);let U=!1;E.on("finish",()=>{U||(this.nativeUpdater.removeListener("error",P),I([]))});const x=(0,h.createReadStream)(g);x.on("error",M=>{try{E.end()}catch(D){p.warn(`cannot end response: ${D}`)}U=!0,this.nativeUpdater.removeListener("error",P),P(new Error(`Cannot pipe "${g}": ${M}`))}),E.writeHead(200,{"Content-Type":"application/zip","Content-Length":y}),x.pipe(E)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${A})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${C(this.server)}, ${A})`),this.nativeUpdater.setFeedURL({url:C(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${R.toString("base64")}`}}),this.dispatchUpdateDownloaded(a),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",P),this.nativeUpdater.checkForUpdates()):I([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return lr.MacUpdater=s,lr}var ur={},Ur={},_l;function If(){if(_l)return Ur;_l=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.verifySignature=c;const r=ke(),d=kr,h=qr,u=Ie;function c(i,s,n){return new Promise((o,a)=>{const m=s.replace(/'/g,"''");n.info(`Verifying signature ${m}`),(0,d.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`"Get-AuthenticodeSignature -LiteralPath '${m}' | ConvertTo-Json -Compress"`],{shell:!0,timeout:20*1e3},(g,y,p)=>{var A;try{if(g!=null||p){t(n,g,p,a),o(null);return}const C=l(y);if(C.Status===0){try{const R=u.normalize(C.Path),_=u.normalize(s);if(n.info(`LiteralPath: ${R}. Update Path: ${_}`),R!==_){t(n,new Error(`LiteralPath of ${R} is different than ${_}`),p,a),o(null);return}}catch(R){n.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(A=R.message)!==null&&A!==void 0?A:R.stack}`)}const P=(0,r.parseDn)(C.SignerCertificate.Subject);let $=!1;for(const R of i){const _=(0,r.parseDn)(R);if(_.size?$=Array.from(_.keys()).every(E=>_.get(E)===P.get(E)):R===P.get("CN")&&(n.warn(`Signature validated using only CN ${R}. Please add your full Distinguished Name (DN) to publisherNames configuration`),$=!0),$){o(null);return}}}const I=`publisherNames: ${i.join(" | ")}, raw info: `+JSON.stringify(C,(P,$)=>P==="RawData"?void 0:$,2);n.warn(`Sign verification failed, installer signed with incorrect certificate: ${I}`),o(I)}catch(C){t(n,C,null,a),o(null);return}})})}function l(i){const s=JSON.parse(i);delete s.PrivateKey,delete s.IsOSBinary,delete s.SignatureType;const n=s.SignerCertificate;return n!=null&&(delete n.Archived,delete n.Extensions,delete n.Handle,delete n.HasPrivateKey,delete n.SubjectName),s}function t(i,s,n,o){if(f()){i.warn(`Cannot execute Get-AuthenticodeSignature: ${s||n}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,d.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(a){i.warn(`Cannot execute ConvertTo-Json: ${a.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}s!=null&&o(s),n&&o(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${n}. Failing signature validation due to unknown stderr.`))}function f(){const i=h.release();return i.startsWith("6.")&&!i.startsWith("6.3")}return Ur}var Sl;function Al(){if(Sl)return ur;Sl=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.NsisUpdater=void 0;const r=ke(),d=Ie,h=qt(),u=au(),c=Pt(),l=Je(),t=pt(),f=If(),i=Lt;let s=class extends h.BaseUpdater{constructor(o,a){super(o,a),this._verifyUpdateCodeSignature=(m,g)=>(0,f.verifySignature)(m,g,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(o){o&&(this._verifyUpdateCodeSignature=o)}doDownloadUpdate(o){const a=o.updateInfoAndProvider.provider,m=(0,l.findFile)(a.resolveFiles(o.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:o,fileInfo:m,task:async(g,y,p,A)=>{const C=m.packageInfo,I=C!=null&&p!=null;if(I&&o.disableWebInstaller)throw(0,r.newError)(`Unable to download new version ${o.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!I&&!o.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(I||o.disableDifferentialDownload||await this.differentialDownloadInstaller(m,o,g,a,r.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(m.url,g,y);const P=await this.verifySignature(g);if(P!=null)throw await A(),(0,r.newError)(`New version ${o.updateInfoAndProvider.info.version} is not signed by the application owner: ${P}`,"ERR_UPDATER_INVALID_SIGNATURE");if(I&&await this.differentialDownloadWebPackage(o,C,p,a))try{await this.httpExecutor.download(new i.URL(C.path),p,{headers:o.requestHeaders,cancellationToken:o.cancellationToken,sha512:C.sha512})}catch($){try{await(0,t.unlink)(p)}catch{}throw $}}})}async verifySignature(o){let a;try{if(a=(await this.configOnDisk.value).publisherName,a==null)return null}catch(m){if(m.code==="ENOENT")return null;throw m}return await this._verifyUpdateCodeSignature(Array.isArray(a)?a:[a],o)}doInstall(o){const a=this.installerPath;if(a==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const m=["--updated"];o.isSilent&&m.push("/S"),o.isForceRunAfter&&m.push("--force-run"),this.installDirectory&&m.push(`/D=${this.installDirectory}`);const g=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;g!=null&&m.push(`--package-file=${g}`);const y=()=>{this.spawnLog(d.join(process.resourcesPath,"elevate.exe"),[a].concat(m)).catch(p=>this.dispatchError(p))};return o.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),y(),!0):(this.spawnLog(a,m).catch(p=>{const A=p.code;this._logger.info(`Cannot run installer: error code: ${A}, error message: "${p.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),A==="UNKNOWN"||A==="EACCES"?y():A==="ENOENT"?Ce.shell.openPath(a).catch(C=>this.dispatchError(C)):this.dispatchError(p)}),!0)}async differentialDownloadWebPackage(o,a,m,g){if(a.blockMapSize==null)return!0;try{const y={newUrl:new i.URL(a.path),oldFile:d.join(this.downloadedUpdateHelper.cacheDir,r.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:m,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,cancellationToken:o.cancellationToken};this.listenerCount(c.DOWNLOAD_PROGRESS)>0&&(y.onProgress=p=>this.emit(c.DOWNLOAD_PROGRESS,p)),await new u.FileWithEmbeddedBlockMapDifferentialDownloader(a,this.httpExecutor,y).download()}catch(y){return this._logger.error(`Cannot download differentially, fallback to full download: ${y.stack||y}`),process.platform==="win32"}return!1}};return ur.NsisUpdater=s,ur}var Tl;function Of(){return Tl||(Tl=1,(function(r){var d=_t&&_t.__createBinding||(Object.create?(function(p,A,C,I){I===void 0&&(I=C);var P=Object.getOwnPropertyDescriptor(A,C);(!P||("get"in P?!A.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return A[C]}}),Object.defineProperty(p,I,P)}):(function(p,A,C,I){I===void 0&&(I=C),p[I]=A[C]})),h=_t&&_t.__exportStar||function(p,A){for(var C in p)C!=="default"&&!Object.prototype.hasOwnProperty.call(A,C)&&d(A,p,C)};Object.defineProperty(r,"__esModule",{value:!0}),r.NsisUpdater=r.MacUpdater=r.RpmUpdater=r.PacmanUpdater=r.DebUpdater=r.AppImageUpdater=r.Provider=r.NoOpLogger=r.AppUpdater=r.BaseUpdater=void 0;const u=pt(),c=Ie;var l=qt();Object.defineProperty(r,"BaseUpdater",{enumerable:!0,get:function(){return l.BaseUpdater}});var t=fa();Object.defineProperty(r,"AppUpdater",{enumerable:!0,get:function(){return t.AppUpdater}}),Object.defineProperty(r,"NoOpLogger",{enumerable:!0,get:function(){return t.NoOpLogger}});var f=Je();Object.defineProperty(r,"Provider",{enumerable:!0,get:function(){return f.Provider}});var i=dl();Object.defineProperty(r,"AppImageUpdater",{enumerable:!0,get:function(){return i.AppImageUpdater}});var s=pl();Object.defineProperty(r,"DebUpdater",{enumerable:!0,get:function(){return s.DebUpdater}});var n=gl();Object.defineProperty(r,"PacmanUpdater",{enumerable:!0,get:function(){return n.PacmanUpdater}});var o=El();Object.defineProperty(r,"RpmUpdater",{enumerable:!0,get:function(){return o.RpmUpdater}});var a=wl();Object.defineProperty(r,"MacUpdater",{enumerable:!0,get:function(){return a.MacUpdater}});var m=Al();Object.defineProperty(r,"NsisUpdater",{enumerable:!0,get:function(){return m.NsisUpdater}}),h(Pt(),r);let g;function y(){if(process.platform==="win32")g=new(Al()).NsisUpdater;else if(process.platform==="darwin")g=new(wl()).MacUpdater;else{g=new(dl()).AppImageUpdater;try{const p=c.join(process.resourcesPath,"package-type");if(!(0,u.existsSync)(p))return g;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const A=(0,u.readFileSync)(p).toString().trim();switch(console.info("Found package-type:",A),A){case"deb":g=new(pl()).DebUpdater;break;case"rpm":g=new(El()).RpmUpdater;break;case"pacman":g=new(gl()).PacmanUpdater;break;default:break}}catch(p){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",p.message)}}return g}Object.defineProperty(r,"autoUpdater",{enumerable:!0,get:()=>g||y()})})(_t)),_t}var nt=Of();let dr=!1;const Df=5,Xi=3,Ki=process.env.VITE_DEV_SERVER_URL,ou=!!Ki;async function $r(r,{url:d,cookie:h,options:u}){try{const c=new URL(d);let l={"Content-Type":"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36",Origin:"https://labs.google",Referer:"https://labs.google/",...u.headers};if(h&&h.bearerToken){const s=h.bearerToken.startsWith("Bearer ")?h.bearerToken.substring(7):h.bearerToken;l.Authorization=`Bearer ${s}`}if(h&&h.value&&(l.Cookie=h.value),c.hostname==="aisandbox-pa.googleapis.com"&&!l.Authorization)throw new Error("Bearer Token is required for aisandbox API.");const t=typeof u.body=="object"?JSON.stringify(u.body):u.body,f=await fetch(d,{...u,headers:l,body:t});if(!f.ok){const s=await f.text();throw console.error("API Error Response:",s),new Error(`API request to ${d} failed with status ${f.status}`)}const i=await f.text();return i?JSON.parse(i):{}}catch(c){throw console.error(`Failed to fetch ${d}`,c),new Error(c.message||"An unknown network error occurred.")}}Ce.ipcMain.on("browser:stop-automation",()=>{console.log("Received stop automation signal."),dr=!0});Ce.ipcMain.on("download-video",async(r,{url:d,promptText:h,savePath:u,promptIndex:c})=>{const l=Ce.BrowserWindow.fromWebContents(r.sender);if(!l)return;let t=u;if(t)try{if(Ye.existsSync(u)||Ye.mkdirSync(u,{recursive:!0}),Ye.readdirSync(u).some(o=>o.startsWith(`${c+1}_`))){console.log(`Video for prompt #${c+1} already exists. Skipping download.`),l.webContents.send("download-complete",{success:!0,path:"Skipped"});return}const s=Math.random().toString(36).substring(2,8),n=`${c+1}_${h.replace(/[^a-z0-9]/gi,"_").substring(0,30)}_${s}.mp4`;t=Ie.join(u,n)}catch(f){console.error("Directory handling error:",f),l.webContents.send("download-complete",{success:!1,error:"Lỗi khi xử lý thư mục lưu."});return}else{const{canceled:f,filePath:i}=await Ce.dialog.showSaveDialog(l,{title:"Lưu video",defaultPath:`veo-video-${h.replace(/[^a-z0-9]/gi,"_").substring(0,50)}.mp4`,filters:[{name:"MP4 Videos",extensions:["mp4"]}]});if(f||!i){l.webContents.send("download-complete",{success:!1,error:"Download canceled"});return}t=i}try{const f=await fetch(d);if(!f.ok)throw new Error(`Failed to fetch video: ${f.statusText}`);const i=await f.arrayBuffer(),s=Buffer.from(i);Ye.writeFileSync(t,s),l.webContents.send("download-complete",{success:!0,path:t})}catch(f){console.error("Download error:",f),l.webContents.send("download-complete",{success:!1,error:f.message})}});Ce.ipcMain.on("download-image",async(r,{imageDataUrl:d,storyTitle:h})=>{const u=Ce.BrowserWindow.fromWebContents(r.sender);if(!u)return;const{canceled:c,filePath:l}=await Ce.dialog.showSaveDialog(u,{title:"Lưu ảnh thumbnail",defaultPath:`thumbnail-${h.replace(/[^a-z0-9]/gi,"_").substring(0,50)}.png`,filters:[{name:"PNG Images",extensions:["png"]}]});if(c||!l){u.webContents.send("download-complete",{success:!1,error:"Download canceled"});return}try{const t=d.replace(/^data:image\/png;base64,/,""),f=Buffer.from(t,"base64");Ye.writeFileSync(l,f),u.webContents.send("download-complete",{success:!0,path:l})}catch(t){console.error("Image download error:",t),u.webContents.send("download-complete",{success:!1,error:t.message})}});Ce.ipcMain.handle("select-download-directory",async r=>{const d=Ce.BrowserWindow.fromWebContents(r.sender),{canceled:h,filePaths:u}=await Ce.dialog.showOpenDialog(d,{properties:["openDirectory"]});return h||u.length===0?null:u[0]});Ce.ipcMain.on("browser:start-automation",async(r,{prompts:d,authToken:h,model:u,aspectRatio:c})=>{const l=Ce.BrowserWindow.fromWebContents(r.sender);dr=!1;const t=(s,n,o,a=null,m=null,g=null)=>{l&&!l.isDestroyed()&&l.webContents.send("browser:log",{promptId:s,message:n,status:o,videoUrl:a,operationName:m,sceneId:g}),console.log(`[${s||"general"}] ${n}`)},f=d[0]?.id||"automation-task",i=new Map;d.forEach(s=>i.set(s.id,0));try{t(f,"Đang lấy cookie từ máy chủ...","running");const s=await fetch("https://mmoreal.com/api/get_active_cookie.php",{method:"GET",headers:{Authorization:`Bearer ${h}`}}),n=await s.text();if(!s.ok)throw new Error(`Không thể lấy cookie (HTTP ${s.status}): ${n}`);let o;try{o=JSON.parse(n)}catch{throw new Error(`Phản hồi từ máy chủ cookie không hợp lệ. Nội dung: ${n}`)}if(!o.success||!o.cookie)throw new Error(o.message||"Không tìm thấy cookie hợp lệ từ máy chủ.");const a=o.cookie;t(f,`Đã lấy cookie "${a.name}". Bắt đầu tạo project...`,"running");const m=await $r(null,{url:"https://labs.google/fx/api/trpc/project.createProject",cookie:a,options:{method:"POST",body:{json:{projectTitle:`Veo Project API - ${new Date().toLocaleString()}`,toolName:"PINHOLE"}}}}),g=m?.result?.data?.json?.result?.projectId;if(!g)throw new Error("Không thể tạo project mới qua API. Phản hồi: "+JSON.stringify(m));t(f,`Đã tạo project ID: ${g}.`,"running"),t(f,"Chờ 3 giây để project được kích hoạt...","running"),await new Promise(P=>setTimeout(P,3e3));let y=[...d];const p=new Map,A=(P,$)=>{const R=i.get(P.id)||0;if(R<Xi){const _=R+1;i.set(P.id,_),t(P.id,`Lỗi: ${$}. Thử lại lần ${_}/${Xi}...`,"running"),y.unshift(P)}else t(P.id,`Lỗi cuối cùng sau ${Xi} lần thử: ${$}`,"error");p.delete(P.id)},C=async()=>{for(;y.length>0&&!dr;)if(p.size<Df){const P=y.shift();if(!P)continue;try{p.set(P.id,{text:P.text,status:"submitting"}),t(P.id,"Bắt đầu gửi prompt...","submitting");const $=`client-generated-uuid-${Date.now()}-${Math.random()}`;let R=u,_=`VIDEO_ASPECT_RATIO_${c.toUpperCase()}`;c==="PORTRAIT"&&(R="veo_3_0_t2v_fast_portrait_ultra",_="VIDEO_ASPECT_RATIO_PORTRAIT");const T={clientContext:{projectId:g,tool:"PINHOLE"},requests:[{aspectRatio:_,seed:Math.floor(Math.random()*1e5),textInput:{prompt:P.text},videoModelKey:R,metadata:{sceneId:$}}]},E=await $r(null,{url:"https://aisandbox-pa.googleapis.com/v1/video:batchAsyncGenerateVideoText",cookie:a,options:{method:"POST",body:T}});t(P.id,"Đã gửi prompt, đang chờ phản hồi...","running");const k=E?.operations?.[0];if(k?.operation?.name&&k?.sceneId)p.set(P.id,{...p.get(P.id),operationName:k.operation.name,sceneId:k.sceneId,status:"processing"}),t(P.id,"Đã nhận ID, bắt đầu xử lý...","processing",null,k.operation.name,k.sceneId);else throw new Error("Không lấy được operation/scene ID. Phản hồi: "+JSON.stringify(E))}catch($){A(P,$.message)}}else await new Promise(P=>setTimeout(P,2e3))},I=async()=>{for(;(y.length>0||p.size>0)&&!dr;){const P=Array.from(p.entries());for(const[$,R]of P){const _=R;if(!(_.status!=="processing"||!_.operationName||!_.sceneId))try{t($,"Đang kiểm tra trạng thái...","processing",null,_.operationName,_.sceneId);const E=(await $r(null,{url:"https://aisandbox-pa.googleapis.com/v1/video:batchCheckAsyncVideoGenerationStatus",cookie:a,options:{method:"POST",body:{operations:[[{operation:{name:_.operationName},sceneId:_.sceneId}]]}}})).operations[0],k=E.status;let U="Trạng thái: "+k.replace("MEDIA_GENERATION_STATUS_","").toLowerCase();if(t($,U,"processing",null,_.operationName,_.sceneId),k==="MEDIA_GENERATION_STATUS_SUCCESSFUL"){const x=E?.operation?.metadata?.video?.fifeUrl||E?.operation?.metadata?.video?.servingBaseUri;t($,"Video hoàn thành!","success",x,_.operationName,_.sceneId),p.delete($)}else if(k==="MEDIA_GENERATION_STATUS_FAILED"){const x=d.find(D=>D.id===$),M=E?.error?.message||"Lỗi không xác định";x?A(x,M):p.delete($)}}catch(T){const E=d.find(k=>k.id===$);E?A(E,T.message):p.delete($)}}await new Promise($=>setTimeout($,8e3))}dr||t(f,"Tất cả các prompt đã được xử lý!","success")};await Promise.all([C(),I()])}catch(s){let n=`Lỗi nghiêm trọng: ${s.message}`;d.forEach(o=>t(o.id,n,"error"))}});nt.autoUpdater.autoDownload=!1;nt.autoUpdater.autoInstallOnAppQuit=!0;function cr(r,d,h=null){r&&!r.isDestroyed()&&r.webContents.send("update-message",d,h)}function su(){const r=Ce.screen.getPrimaryDisplay(),{width:d,height:h}=r.workAreaSize,u=new Ce.BrowserWindow({width:d,height:h,autoHideMenuBar:!0,webPreferences:{contextIsolation:!0,nodeIntegration:!1,preload:Ie.join(__dirname,"preload.js"),devTools:ou}});Ki?u.loadURL(Ki):(u.loadFile(Ie.join(__dirname,"..","dist","index.html")),u.once("ready-to-show",()=>{nt.autoUpdater.checkForUpdatesAndNotify()})),nt.autoUpdater.on("update-available",c=>{cr(u,"update-available",c),nt.autoUpdater.downloadUpdate()}),nt.autoUpdater.on("update-not-available",c=>{cr(u,"update-not-available",c)}),nt.autoUpdater.on("download-progress",c=>{cr(u,"download-progress",c)}),nt.autoUpdater.on("update-downloaded",c=>{cr(u,"update-downloaded",c)}),nt.autoUpdater.on("error",c=>{cr(u,"error",c.message)})}Ce.app.whenReady().then(()=>{ou||Ce.session.defaultSession.webRequest.onHeadersReceived((r,d)=>{d({responseHeaders:{...r.responseHeaders,"Content-Security-Policy":["script-src 'self'"]}})}),Ce.ipcMain.handle("fetch-api",$r),su()});Ce.ipcMain.on("restart-and-install",()=>{nt.autoUpdater.quitAndInstall()});Ce.app.on("window-all-closed",()=>{process.platform!=="darwin"&&Ce.app.quit()});Ce.app.on("activate",()=>{Ce.BrowserWindow.getAllWindows().length===0&&su()});
